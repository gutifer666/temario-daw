
<!-- saved from url=(0112)https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&dopt=1 -->
<html><input type="hidden" id="__yoroi_connector_api_injected_type" value="prod"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script src="./recopila_files/exe_jquery.js" type="text/javascript"></script>
<script src="./recopila_files/common_i18n.js" type="text/javascript"></script>
<script src="./recopila_files/common.js" type="text/javascript"></script>
<script src="./recopila_files/SCORM_API_wrapper.js" type="text/javascript"></script>
<script src="./recopila_files/SCOFunctions.js" type="text/javascript"></script>
<script src="./recopila_files/exe_effects.js" type="text/javascript"></script>
<script src="./recopila_files/saved_resource" type="text/javascript"></script>
<link href="./recopila_files/base.css" type="text/css" rel="stylesheet">
<link href="./recopila_files/content.css" type="text/css" rel="stylesheet">
<link href="./recopila_files/exe_effects.css" type="text/css" rel="stylesheet">
</head>
<body class=" js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js js">
<script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main" role="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Programación de bases de datos.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id0">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id0-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta0_66" class="block iDevice_content">
<p>
<strong>Juan</strong> recuerda, de cuando estudió el Ciclo de Desarrollo de Aplicaciones Informáticos, que había muchas tareas que se podían automatizar dentro de la base de datos mediante el uso de un lenguaje de programación, e incluso que se podían programar algunas restricciones a la hora de manipular los datos. <strong>Juan</strong> se lo comenta a <strong>María</strong> y ésta se muestra ilusionada con dicha idea ya que muchas veces repiten el trabajo con la base de datos de juegos <span lang="en">on-line</span> que tienen entre manos (consultas, inserciones, <abbr title="Etcétera.">etc</abbr>. que son muy parecidas y que se podrían automatizar).
</p>
<p>
Para ello, hablan con <strong>Ada</strong> y ésta les comenta que claro que se puede hacer y que precisamente eso es lo que les toca hacer ahora. <strong>Ada</strong> les dice que para ese propósito existe un lenguaje de programación llamado <acronym lang="en" title="Procedural Language/Structured Query Language.">PL/SQL</acronym> que permite hacer lo que ellos quieren, así que les pasa un manual para que se lo vayan leyendo y se vayan poniendo manos a la obra con la base de datos de juegos <span lang="en">on-line</span>.
</p>
<div style="width: 100%">
<div style="width: 50%; float: left">
<div class="elemento_centrado">
<img alt="Imagen en primer plano de una chica joven con una camiseta de manga corta azul." class="elemento_centrado" height="132" src="./recopila_files/CASO_PERSONAJES_03.jpg" style="width: 200px; height: 132px" title="María." width="200">
</div>
</div>
<div style="width: 50%; float: right">
<div class="elemento_centrado">
<img alt="Imagen en primer plano de un chico joven con una camisa de rayas azules y blancas." class="elemento_centrado" height="132" src="./recopila_files/CASO_PERSONAJES_04.jpg" style="width: 200px; height: 132px" title="Juan." width="200">
</div>
    
</div>
</div>
<div style="clear: both">
</div>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id1">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id1-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta1_73" class="block iDevice_content">
Ahora que ya dominas el uso de <acronym lang="en" title="Structured Query Language.">SQL</acronym> para la manipulación y consulta de datos, es el momento de dar una vuelta de tuerca adicional para mejorar las aplicaciones que utilicen nuestra base de datos. Para ello nos vamos a centrar en la programación de bases de datos, utilizando el lenguaje PL/SQL. En esta unidad conoceremos qué es PL/SQL, cuál es su sintaxis y veremos cómo podemos sacarle el máximo partido a nuestra base de datos mediante su uso.

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id2">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id2-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta2_48" class="block iDevice_content">
<p style="text-align: left;">La mayor parte de los ejemplos de esta unidad están basados en el modelo de datos extraído del caso de estudio que puedes encontrar al final de la unidad en el Anexo I. Caso de estudio.<strong><br></strong></p>
<p style="text-align: left;">También encontrarás diferentes videotutoriales donde se utilizará el ejemplo de conferencias y asistentes cuyas tablas y datos conoces de la unidad 4 (donde se incluye el diagrama ER, el modelo relacional y el script de creación de tablas y datos). Se adjunta aquí el script para que puedas descargarlo y practicar con esta BD y los videotutoriales:</p>
<p style="text-align: center;"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/BDConferencias.zip" target="_blank" class="paquete" title="[zip - 1.68 KB]">Script creación de tablas y datos de BD Conferencia</a><span class="exe-link-data file-size"> (zip - 1.68 <abbr title="KiloBytes" lang="en">KB</abbr>)</span>.</p>
<p class="enlace_centrado"></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">1.- Introducción.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id6">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id6-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta6_66" class="block iDevice_content">
<img alt="Ilustración de una taza de café llena." class="elemento_derecha" height="160" src="./recopila_files/BD06_CONT_R02_Cafe.jpg" title="Taza de café." width="180"> 
<p>
<strong>Juan</strong> y <strong>María</strong> se han puesto a repasar el manual de PL/SQL que les ha pasado Ada. Aunque no han avanzado mucho con el mismo, ya saben a qué se van a enfrentar y los beneficios que pueden obtener del uso del mismo para su aplicación de juegos <span lang="en">on-line</span>. Cuando hacen la primera parada de la mañana para tomarse un café, ambos se ponen a comentar las primeras conclusiones que han sacado después de su primer acercamiento a este lenguaje. Ambos están deseosos de seguir avanzando en su aprendizaje y saben que para ello cuentan con la inestimable ayuda de <strong>Ada</strong>.
</p>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id8">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id8-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta8_73" class="block iDevice_content">
Estarás pensado que si no tenemos bastante con aprender SQL, sino que ahora tenemos que aprender otro lenguaje más que lo único que va a hacer es complicarnos la vida. Verás que eso no es cierto ya que lo más importante, que es el conocimiento de SQL, ya lo tienes. PL/SQL tiene una sintaxis muy sencilla y verás como pronto te acostumbras y luego no podrás vivir sin él.

</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id9">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id9-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta9_70" class="block iDevice_content">
<p>Pero, <strong>¿qué es realmente PL/SQL?</strong></p>
<p>PL/SQL es un <a class="glosario" href="./recopila_files/saved_resource">lenguaje procedimental<span><em>Lenguaje Procedimental</em>Lenguaje que utiliza los procedimientos y funciones para crear programas y así poder utilizar diferentes grados de abstracción y reutilización del código.</span></a> estructurado en bloques que amplía la funcionalidad de SQL. Con PL/SQL podemos usar sentencias SQL para manipular datos y sentencias de control de flujo para procesar los datos. Por tanto, PL/SQL combina la potencia de SQL para la manipulación de datos, con la potencia de los lenguajes procedimentales para procesar los datos.</p>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id10">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id10-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta10_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/BD06_CONT_R03_MotorPLSQL.png"><img alt="Esquema en el que se muestra cómo se ejecuta un bloque PL/SQL en la base de datos. El bloque se manda al motor de PL/SQL que reside en la base de datos y éste va mandado las diferentes sentencias SQL al motor de SQL." class="imagen_ampliable" src="./recopila_files/BD06_CONT_R03_MotorPLSQL_miniatura.png" style="width: 144px; height: 192px;" title="Ejecución de PL/SQL." height="192" width="144"></a></div>
</div>
<p>Aunque PL/SQL fue creado por <span lang="en">Oracle</span>, hoy día todos los gestores de bases de datos utilizan un lenguaje procedimental muy parecido al ideado por <span lang="en">Oracle</span> para poder programar las bases de datos.</p>
<p>Como veremos, en PL/SQL podemos definir variables, constantes, funciones, procedimientos, capturar errores en tiempo de ejecución, anidar cualquier número de bloques, etc. como solemos hacer en cualquier otro lenguaje de programación. Además, por medio de PL/SQL programaremos los disparadores de nuestra base de datos, tarea que no podríamos hacer sólo con SQL.</p>
<p>El motor de PL/SQL acepta como entrada bloques PL/SQL o subprogramas, ejecuta sentencias procedimentales y envía sentencias SQL al servidor de bases de datos. En el esquema adjunto puedes ver su funcionamiento.</p>
<p>Una de las grandes ventajas que nos ofrece PL/SQL es un mejor rendimiento en entornos de red <a class="glosario" href="./recopila_files/saved_resource">cliente-servidor<span><em>Cliente-Servidor</em>La arquitectura cliente-servidor es un modelo de aplicación distribuida en el que las tareas se reparten entre los proveedores de recursos o servicios, llamados servidores, y los demandantes, llamados clientes. Un cliente realiza peticiones a otro programa, el servidor, que le da respuesta.</span></a>, ya que permite mandar bloques PL/SQL desde el cliente al servidor a través de la red, reduciendo de esta forma el tráfico y así no tener que mandar una a una las sentencias SQL correspondientes.</p>
</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id127">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id127-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta127_66" class="block iDevice_content">
<p>En esta unidad vamos a trabajar con el <acronym title="Sistemas Gestores de Bases de Datos">SGBD </acronym>de Oracle. Por tanto, vamos a instalar <strong>Oracle <span lang="en">Database Express Edition 11g Release 2</span></strong> tal y como se explica en el <strong>Anexo I: Primeros pasos en Oracle Database</strong> que puedes encontrar en la primera unidad  del módulo "Almacenamiento de la Información". En este anexo, encontrarás el enlace de descarga de dicha versión y unos videotutoriales que te ayudarán en el proceso de instalación. También es recomendable que veas el videotutorial de la utilización básica para crear un espacio de trabajo, tablas y manejo de datos.</p>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id128">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id128-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta128_69" class="block iDevice_content">
<p>Además, como has podido ir viendo en las unidades anteriores se ha hecho referencia en todo momento a las diferencias entre Oracle y MySQL. Si lo deseas, puedes cargar algún script de la unidad 4 para Oracle y realizar algunos ejemplos en este sistema gestor de base de datos. En el tema que nos ocupa de esta unidad encontrarás al final de la unidad un caso práctico donde puedes crear las tablas y datos necesarios para practicar los ejemplos propuestos con PL/SQL.</p>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id120">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id120-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta120_69" class="block iDevice_content">
<p style="text-align: left;">Para trabajar con PL/SQL podemos trabajar directamente desde la aplicación gráfica de Oracle 11g, o bien podemos instalar una nueva herramienta llamada <strong>SQL Developer</strong> que nos ayude a trabajar con bloques PL/SQL. Dicha herramienta la podremos encontrar en la <a href="https://www.oracle.com/tools/downloads/sqldev-downloads.html" target="_blank" class="html">página oficial de Oracle</a>.</p>
<p style="text-align: left;">En el primer vídeo se puede ver cómo se carga un script con las tablas y datos usando Oracle XE 11g. En el siguiente vídeo se explica cómo crear una conexión en SQL Developer para utilizar una BD creada en Oracle XE. Y por último se explica la posibilidad de cargar un script con tablas y datos también desde SQL Developer.</p>
<p></p>
<table style="width: 100%;" cellspacing="5" cellpadding="5" border="0">
<tbody>
<tr>
<td style="text-align: center;"><strong>Cargar un script de BD en Oracle XE</strong></td>
<td style="text-align: center;"><strong>Crear una conexión en SQL Developer<br></strong></td>
<td style="text-align: center;"><strong>Cargar un script de BD en SQL Developer</strong></td>
</tr>
<tr>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/m__N7GYacps">https://www.youtube.com/embed/m__N7GYacps</a></span><iframe width="560" height="315" src="./recopila_files/m__N7GYacps.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/74onjlPot5o">https://www.youtube.com/embed/74onjlPot5o</a></span><iframe width="560" height="315" src="./recopila_files/74onjlPot5o.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/0TuX52UbaCM">https://www.youtube.com/embed/0TuX52UbaCM</a></span><iframe width="560" height="315" src="./recopila_files/0TuX52UbaCM.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id11">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id11-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta11_47" class="block iDevice_content">
<p>En estos enlaces podrás comprobar como los gestores de bases de datos incluyen hoy día un lenguaje procedimental para programar la base de datos muy parecido a PL/SQL.</p>
<p class="enlace_centrado"><a title="Acceder a un artículo de la wikipedia sobre el uso de procedimientos almacenados en MySQL." href="https://www.neoguias.com/procedimientos-almacenados-mysql/" target="_blank">Procedimientos almacenados en <span lang="en">MySQL</span>.</a></p>
<p class="enlace_centrado"><a title="Acceder a un artículo de la wikipedia sobre el lenguaje procedimental utilizado en PostgreSQL." href="http://es.wikipedia.org/wiki/PL/PgSQL" target="_blank">Lenguaje procedimental en <span lang="en">PostgreSQL</span>.</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.- Conceptos básicos.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id12">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id12-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta12_66" class="block iDevice_content">
<img alt="Pizarra en la que con tiza rosa se pueden leer las vocales." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R04_Vocales.jpg" title="Vocales." width="200">
<p>
<strong>Juan</strong> ha avanzado muy rápido en la lectura del manual que le pasó <strong>Ada</strong>. <strong>Juan</strong> ya sabe programar en otros lenguajes de programación y por tanto la lectura de los primeros capítulos que se centran en cómo se estructura el lenguaje, los tipos de datos, las estructuras de control, etc. le han resultado muy fáciles de comprender. Sabe que lo único que tendrá que tener en cuenta son algunos aspectos en cuanto a las reglas de escritura y demás, pero la lógica es la de cualquier otro lenguaje de programación.
</p>
<p>
Como <strong>María</strong> está un poco más verde en el tema de la programación, <strong>Juan</strong> se ha ofrecido a darle un repaso rápido a todo lo que él ha visto y a explicarle todo aquello en lo que tenga dudas y a ver si pronto se pueden poner manos a la obra con la base de datos de juegos <span lang="en">on-line</span>.
</p>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id13">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id13-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta13_73" class="block iDevice_content">
<p>
En este apartado nos vamos a ir introduciendo poco a poco en los diferentes conceptos que debemos tener claros para programar en PL/SQL. Como para cualquier otro lenguaje de programación, debemos conocer las reglas de sintaxis que podemos utilizar, los diferentes elementos de que consta, los tipos de datos de los que disponemos, las estructuras de control que nos ofrece (tanto iterativas como condicionales) y cómo se realiza el manejo de los errores.
</p>
<p>
Como podrás comprobar, es todo muy sencillo y pronto estaremos escribiendo fragmentos de código que realizan alguna tarea particular. ¡Vamos a ello!
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper SeleccionmultiplefpdIdevice em_iDevice" id="id14">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id14-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<div id="actitity-14_55">
<form name="multi-select-form-14_55" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" class="activity-form multi-select-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion14_55" class="block question iDevice_content">
<strong>Indica cuáles de las siguientes características que nos proporciona PL/SQL son ciertas.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op14_550" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_58">Opción 1</a></label><input type="checkbox" id="op14_550" value="True">
</p>
<div class="iDevice_answer-content" id="answer-14_58"><a name="answer-14_58" href="./recopila_files/saved_resource"></a>
<div id="taans14_58" class="block iDevice_content">
Permite reducir el tráfico en la red en entornos cliente-servidor.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-14_550" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op14_551" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_82">Opción 2</a></label><input type="checkbox" id="op14_551" value="False">
</p>
<div class="iDevice_answer-content" id="answer-14_82"><a name="answer-14_82" href="./recopila_files/saved_resource"></a>
<div id="taans14_82" class="block iDevice_content">
No podemos utilizar sentencias SQL dentro de un bloque PL/SQL.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-14_551" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op14_552" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_84">Opción 3</a></label><input type="checkbox" id="op14_552" value="True">
</p>
<div class="iDevice_answer-content" id="answer-14_84"><a name="answer-14_84" href="./recopila_files/saved_resource"></a>
<div id="taans14_84" class="block iDevice_content">
Nos ofrece las ventajas de SQL y la potencia de un lenguaje procedimental.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-14_552" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op14_553" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_86">Opción 4</a></label><input type="checkbox" id="op14_553" value="False">
</p>
<div class="iDevice_answer-content" id="answer-14_86"><a name="answer-14_86" href="./recopila_files/saved_resource"></a>
<div id="taans14_86" class="block iDevice_content">
Para utilizar PL/SQL debemos instalar diferentes <span lang="en">drivers</span> en nuestra base de datos <span lang="en">Oracle</span>.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-14_553" style="display:none"></div>
</div>
</div>
<div class="block iDevice_buttons feedback-button js-required">
<p>
<input type="button" name="submitSelect" class="feedbackbutton multi-select-feedback-toggler" value="Mostrar retroalimentación" id="multi-select-feedback-toggler-4-14_55"> 
</p>
</div>
<div id="f14_55" class="js-hidden js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>

<div id="tafeedback14_55" class="feedback iDevice_content">
Cuando utilizamos PL/SQL no debemos instalar nada adicional en nuestra base de datos <span lang="en">Oracle</span> y podemos hacer uso de las sentencias SQL dentro de un bloque PL/SQL.

</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_58" class="right">Correcto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_82" class="wrong">Incorrecto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_84" class="right">Correcto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-14_86" class="wrong">Incorrecto</a></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.1.- Unidades léxicas (I).</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id15">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id15-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta15_73" class="block iDevice_content">
<p><img alt="Bolígrafo azul y con adornos plateados." class="elemento_derecha" src="./recopila_files/BD06_CONT_R05_Boligrafo.jpg" title="Escritura." width="200" height="132"></p>
<p>En este apartado nos vamos a centrar en conocer cuáles son las unidades léxicas que podemos utilizar para escribir código en PL/SQL. Al igual que en nuestra lengua podemos distinguir diferentes unidades léxicas como palabras, signos de puntuación, etc. En los lenguajes de programación también existen diferentes unidades léxicas que definen los elementos más pequeños que tienen sentido propio y que al combinarlos de manera adecuada, siguiendo las reglas de sintaxis, dan lugar a sentencias válidas sintácticamente.</p>
<p>PL/SQL es un lenguaje no sensible a las mayúsculas, por lo que será equivalente escribir en mayúsculas o minúsculas, excepto cuando hablemos de literales de tipo cadena o de tipo carácter.</p>
<p>Cada unidad léxica puede estar separada por espacios (debe estar separada por espacios si se trata de 2 identificadores), por saltos de línea o por tabuladores para aumentar la legibilidad del código escrito.</p>
<div class="codigo elemento_centrado" style="width: 40.65em;">
<div class="texto_izquierda">
<pre>IF A=CLAVE THEN ENCONTRADO:=TRUE;ELSE ENCONTRADO:=FALSE;END IF;
</pre>
</div>
</div>
<p></p>
<p>Sería equivalente a escribir la siguiente línea:</p>
<div class="codigo elemento_centrado" style="width: 40.65em;">
<div class="texto_izquierda">
<pre>if a=clave then encontrado:=true;else encontrado:=false;end if;
</pre>
</div>
</div>
<p></p>
<p>Y también sería equivalente a este otro fragmento:</p>
<div class="codigo elemento_centrado" style="width: 19.75em;">
<div class="texto_izquierda">
<pre>IF a = clave THEN
</pre>
<pre>     encontrado := TRUE;
</pre>
<pre>ELSE
</pre>
<pre>     encontrado := FALSE;
</pre>
<pre>END IF;
</pre>
</div>
</div>
<p></p>
<p>Las unidades léxicas se pueden clasificar en:</p>
<ul class="lista_verificacion">
<li>Delimitadores.</li>
<li>Identificadores.</li>
<li>Literales.</li>
<li>Comentarios.</li>
</ul>
<p>Vamos a verlas más detenidamente.</p>
<p><strong>Delimitadores.</strong></p>
<p>PL/SQL tiene un conjunto de símbolos denominados delimitadores utilizados para representar operaciones entre tipos de datos, delimitar comentarios, etc. En la siguiente tabla puedes ver un resumen de los mismos.</p>
<table class="tabla" summary="Tabla en la que se muestran los delimitadores simples y compuestos que se pueden utilizar en PL/SQL acompañados por su significado."><caption>Delimitadores en PL/SQL.</caption>
<thead>
<tr><th colspan="2" id="delimitadorsimple">Delimitadores Simples.</th><th colspan="2" id="delimitadorcompuestos">Delimitadores Compuestos.</th></tr>
</thead>
<tbody>
<tr><th headers="delimitadorsimple" id="simbolo01">Símbolo.</th><th headers="delimitadorsimple" id="significado01">Significado.</th><th headers="delimitadorcompuestos" id="simbolo02">Símbolo.</th><th headers="delimitadorcompuestos" id="significado02">Significado.</th></tr>
<tr>
<td headers="simbolo01">+</td>
<td headers="significado01">Suma.</td>
<td headers="simbolo02">**</td>
<td headers="significado02">Exponenciación.</td>
</tr>
<tr>
<td headers="simbolo01">%</td>
<td headers="significado01">Indicador de atributo.</td>
<td headers="simbolo02">&lt;&gt;</td>
<td headers="significado02">Distinto.</td>
</tr>
<tr>
<td headers="simbolo01">.</td>
<td headers="significado01">Selector.</td>
<td headers="simbolo02">¡=</td>
<td headers="significado02">Distinto.</td>
</tr>
<tr>
<td headers="simbolo01">/</td>
<td headers="significado01">División.</td>
<td headers="simbolo02">&lt;=</td>
<td headers="significado02">Menor o igual.</td>
</tr>
<tr>
<td headers="simbolo01">(</td>
<td headers="significado01">Delimitador de lista.</td>
<td headers="simbolo02">&gt;=</td>
<td headers="significado02">Mayor o igual.</td>
</tr>
<tr>
<td headers="simbolo01">)</td>
<td headers="significado01">Delimitador de lista.</td>
<td headers="simbolo02">..</td>
<td headers="significado02">Rango.</td>
</tr>
<tr>
<td headers="simbolo01">:</td>
<td headers="significado01">Variable <span lang="en">host</span>.</td>
<td headers="simbolo02">||</td>
<td headers="significado02">Concatenación.</td>
</tr>
<tr>
<td headers="simbolo01">,</td>
<td headers="significado01">Separador de elementos.</td>
<td headers="simbolo02">&lt;&lt;</td>
<td headers="significado02">Delimitador de etiquetas.</td>
</tr>
<tr>
<td headers="simbolo01">*</td>
<td headers="significado01">Producto.</td>
<td headers="simbolo02">&gt;&gt;</td>
<td headers="significado02">Delimitador de etiquetas.</td>
</tr>
<tr>
<td headers="simbolo01">"</td>
<td headers="significado01">Delimitador de identificador acotado.</td>
<td headers="simbolo02">--</td>
<td headers="significado02">Comentario de una línea.</td>
</tr>
<tr>
<td headers="simbolo01">=</td>
<td headers="significado01">Igual relacional.</td>
<td headers="simbolo02">/*</td>
<td headers="significado02">Comentario de varias líneas.</td>
</tr>
<tr>
<td headers="simbolo01">&lt;</td>
<td headers="significado01">Menor.</td>
<td headers="simbolo02">*/</td>
<td headers="significado02">Comentario de varias líneas.</td>
</tr>
<tr>
<td headers="simbolo01">&gt;</td>
<td headers="significado01">Mayor.</td>
<td headers="simbolo02">:=</td>
<td headers="significado02">Asignación.</td>
</tr>
<tr>
<td headers="simbolo01">@</td>
<td headers="significado01">Indicador de acceso remoto.</td>
<td headers="simbolo02">=&gt;</td>
<td headers="significado02">Selector de nombre de parámetro.</td>
</tr>
<tr>
<td headers="simbolo01">;</td>
<td headers="significado01">Terminador de sentencias.</td>
<td headers="simbolo02"></td>
<td headers="significado02"></td>
</tr>
<tr>
<td headers="simbolo01">-</td>
<td headers="significado01">Resta/negación.</td>
<td headers="simbolo02"></td>
<td headers="significado02"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.1.1.- Unidades léxicas (II).</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id16">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id16-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta16_73" class="block iDevice_content">
<p>
Ya hemos visto qué son los delimitadores. Ahora vamos a continuar viendo el resto de unidades léxicas que nos podemos encontrar en PL/SQL.
</p>
<p>
<strong>Identificadores.</strong>
</p>
<p>
Los identificadores en PL/SQL, como en cualquier otro lenguaje de programación, son utilizados para nombrar elementos de nuestros programas.  A la hora de utilizar los identificadores debemos tener en cuenta los siguientes aspectos:
</p>
<ul class="lista_verificacion">
	<li>Un identificador es una letra seguida opcionalmente de letras, números, $, _, #. </li>
	<li>No podemos utilizar como identificador una palabra reservada.
	<ul>
		<li>Ejemplos válidos: X, <code>A1</code>, codigo_postal.</li>
		<li>Ejemplos no válidos: rock&amp;roll, on/off.</li>
	</ul>
	</li>
	<li>PL/SQL nos permite además definir los identificadores acotados, en los que podemos usar cualquier carácter con una longitud máxima de 30 y deben estar delimitados por ". Ejemplo: "X*Y".</li>
	<li>En PL/SQL existen algunos identificadores predefinidos y que tienen un significado especial ya que nos permitirán darle sentido sintáctico a nuestros programas. Estos identificadores son las palabras reservadas y no las podemos utilizar como identificadores en nuestros programas. Ejemplo: IF, <code>THEN</code>, ELSE ...</li>
	<li>Algunas palabras reservadas para PL/SQL no lo son para SQL, por lo que podríamos tener una tabla con una columna llamada 'type' por ejemplo, que nos daría un error de compilación al referirnos a ella en PL/SQL. La solución sería acotarlos. SELECT "TYPE" …</li>
</ul>
<p>
<strong>Literales.</strong>
</p>
<p>
Los literales se utilizan en las comparaciones de valores o para asignar valores concretos a los identificadores que actúan como variables o constantes. Para expresar estos literales tendremos en cuenta que:
</p>
<ul class="lista_verificacion">
	<li>Los literales numéricos se expresarán por medio de notación decimal o de notación exponencial. Ejemplos: 234, +341, 2e3, -2E-3, 7.45, 8.1e3.</li>
	<li>Los literales tipo carácter y tipo cadena se deben delimitar con unas comillas simples.</li>
	<li>Los literales lógicos son TRUE y <code>FALSE</code>.</li>
	<li>El literal NULL que expresa que una variable no tiene ningún valor asignado.</li>
</ul>
<p>
<strong>Comentarios.</strong>
</p>
<p>
En los lenguajes de programación es muy conveniente utilizar comentarios en mitad del código. Los comentarios no tienen ningún efecto sobre el código pero sí ayudan mucho al programador o la programadora a recordar qué se está intentando hacer en cada caso (más aún cuando el código es compartido entre varias personas que se dedican a mejorarlo o corregirlo).
</p>
<p>
En PL/SQL podemos utilizar dos tipos de comentarios:
</p>
<ul class="lista_verificacion">
	<li style="margin-bottom: 20px">Los comentarios de una línea se expresaran por medio del delimitador --. Ejemplo:
	<div class="codigo elemento_centrado" style="width: 16.45em">
	<div class="texto_izquierda">
<pre>a:=b;  --asignación
</pre>
	</div>
	</div>
	</li>
	<li>Los comentarios de varias líneas se acotarán por medio de los delimitadores /* y */. Ejemplo: 
	<div class="codigo elemento_centrado" style="width: 25.8em">
	<div class="texto_izquierda">
<pre>/* Primera línea de comentarios.
</pre>
<pre>    Segunda línea de comentarios. */
</pre>
	</div>
	</div>
	</li>
</ul>

</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id17">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id17-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta17_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b17" class="block iDevice_content">
<p>
Dada la siguiente línea de código, haz su descomposición en las diferentes unidades léxicas que contenga.
</p>
<div class="codigo elemento_centrado" style="width: 34.6em">
<div class="texto_izquierda">
<pre>IF A &lt;&gt; B THEN iguales := FALSE; --No son iguales
</pre>
</div>
</div>

</div>
<form name="feedback-form-quesFeedback0b17" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b17text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b17" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b17" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<p>
La descomposición en unidades léxicas sería la siguiente:
</p>
<ul class="lista_verificacion">
	<li>Identificadores: A, <code>B</code>, iguales.</li>
	<li>Identificadores (palabras reservadas): IF, <code>THEN</code>.</li>
	<li>Delimitadores: &lt;&gt;, :=, <code>;</code>.</li>
	<li>Comentarios: --No son iguales.</li>
</ul>
</div>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.2.- Tipos de datos simples, variables y constantes.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id18">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id18-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta18_73" class="block iDevice_content">
<p><img alt="Cero coma uno." class="elemento_derecha" src="./recopila_files/BD06_CONT_R07_NumeroDecimal.jpg" title="Número decimal." height="132" width="200"></p>
<p>En cualquier lenguaje de programación, las variables y las constantes tienen un tipo de dato asignado (bien sea explícitamente o implícitamente). Dependiendo del tipo de dato el lenguaje de programación sabrá la estructura que utilizará para su almacenamiento, las restricciones en los valores que puede aceptar, la precisión del mismo, etc.</p>
<p>En PL/SQL contamos con todos los <strong>tipos de datos simples</strong> utilizados en SQL y algunos más. En este apartado vamos a enumerar los más utilizados.</p>
<p><strong>Numéricos.</strong></p>
<ul class="lista_verificacion">
<li>BINARY_INTEGER: Tipo de dato numérico cuyo rango es de -2147483647 .. 2147483647. PL/SQL además define algunos subtipos de éste: NATURAL, <code>NATURALN</code>, POSITIVE, <code>POSITIVEN</code>, SIGNTYPE.</li>
<li>NUMBER: Tipo de dato numérico para almacenar números racionales. Podemos especificar su escala (-84 .. 127) y su precisión (1 .. 38). La escala indica cuándo se redondea y hacia dónde. Ejemplos. escala=2: 8.234 -&gt; 8.23, escala=-3: 7689 -&gt; 8000. PL/SQL también define algunos subtipos como: DEC, <code>DECIMAL</code>, DOUBLE <code>PRECISION</code>, FLOAT, <code>INTEGER</code>, INT, <code>NUMERIC</code>, REAL, <code>SMALLINT</code>.</li>
<li>PLS_INTEGER: Tipo de datos numérico cuyo rango es el mismo que el del tipo de dato BINARY_INTEGER, pero que su representación es distinta por lo que las operaciones aritméticas llevadas a cabo con los mismos serán más eficientes que en los dos casos anteriores.</li>
</ul>
<p><strong>Alfanuméricos.</strong></p>
<ul class="lista_verificacion">
<li>CHAR(n): <span lang="en">Array</span> de n caracteres, máximo 2000 <span lang="en">bytes</span>. Si no especificamos longitud sería 1.</li>
<li>LONG: <span lang="en">Array</span> de caracteres con un máximo de 32760 <span lang="en">bytes</span>.</li>
<li>RAW: <span lang="en">Array</span> de <span lang="en">bytes</span> con un número máximo de 2000.</li>
<li>LONG RAW: <span lang="en">Array</span> de <span lang="en">bytes</span> con un máximo de 32760.</li>
<li>VARCHAR2: Tipo de dato para almacenar cadenas de longitud variable con un máximo de 32760.</li>
</ul>
<p><strong>Grandes objetos.</strong></p>
<ul class="lista_verificacion">
<li>BFILE: <a class="glosario" href="./recopila_files/saved_resource">Puntero<span><em>Puntero</em>Un puntero o apuntador es una variable que referencia una región de memoria; en otras palabras es una variable cuyo valor es una dirección de memoria.</span></a> a un fichero del Sistema Operativo.</li>
<li>BLOB: Objeto binario con una capacidad de 4 <abbr title="GigaByte.">GB</abbr>.</li>
<li>CLOB: Objeto carácter con una capacidad de 2 GB.</li>
</ul>
<p><strong>Otros.</strong></p>
<ul class="lista_verificacion">
<li>BOOLEAN: <code>TRUE</code>/FALSE.</li>
<li>DATE: Tipo de dato para almacenar valores día/hora desde el 1 enero de 4712 <acronym title="Antes de Cristo.">a.c.</acronym> hasta el 31 diciembre de 4712 <acronym title="Después de Cristo.">d.c.</acronym></li>
</ul>
<p>Hemos visto los tipos de datos simples más usuales. Los tipos de datos compuestos los dejaremos para posteriores apartados.</p>
</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id19">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id19-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta19_47" class="block iDevice_content">
<p>En el siguiente enlace podrás ampliar información sobre los tipos de datos de los que disponemos en PL/SQL.</p>
<p class="enlace_centrado"><a href="https://www.plsql.biz/2006/10/tipos-de-datos-en-plsql.html" title="Acceder a un capítulo de un tutorial de PL/SQL donde puedes ampliar información sobre los tipos de datos." target="_blank" class="html">Tipos de datos en PL/SQL.</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id20">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id20-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-20_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion20_60" class="block question iDevice_content">
<strong>En PL/SQL cuando vamos a trabajar con enteros es preferible utilizar el tipo de dato BINARY_INTEGER, en vez de PLS_INTEGER.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i20_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-20_63">Opción 1</a></label><input type="radio" name="option20_60" id="i20_63" class="exe-radio-option exe-radio-option-0-2-20_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-20_63"><a name="answer-20_63" href="./recopila_files/saved_resource"></a>
<div id="taans20_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i20_90" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-20_90">Opción 2</a></label><input type="radio" name="option20_60" id="i20_90" class="exe-radio-option exe-radio-option-1-2-20_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-20_90"><a name="answer-20_90" href="./recopila_files/saved_resource"></a>
<div id="taans20_90" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b20_60" class="feedback js-hidden"><a name="sa0b20_60" href="./recopila_files/saved_resource"></a>
<div id="taf20_63" class=" iDevice_content">
No es correcto, ya que el tipo de dato PLS_INTEGER hace que nuestros programas sean más eficientes debido a la representación interna del mismo.

</div>
</div>
<div id="sa1b20_60" class="feedback js-hidden"><a name="sa1b20_60" href="./recopila_files/saved_resource"></a>
<div id="taf20_90" class=" iDevice_content">
Efectivamente, nuestros programas serán más eficientes al utilizar este tipo de dato debido a su representación interna.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-20_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b20_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-20_90">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b20_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.2.1.- Subtipos.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id21">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id21-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta21_73" class="block iDevice_content">
<img alt="Se ven dos palabras escritas “Hoy” y “Mañana”. La primera está tachada en rojo." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R08_HoyManana.jpg" title="Renombrar." width="200"> 
<p>
Cuántas veces no has deseado cambiarle el nombre a las cosas por alguno más común para ti. Precisamente, esa es la posibilidad que nos ofrece PL/SQL con la utilización de los subtipos.
</p>
<p>
PL/SQL nos permite definir subtipos de tipos de datos para darles un nombre diferente y así aumentar la legibilidad de nuestros programas. Los tipos de operaciones aplicables a estos subtipos serán las mismas que los tipos de datos de los que proceden. La sintaxis será:
</p>
<div class="codigo elemento_centrado" style="width: 21.95em">
<div class="texto_izquierda">
<pre>SUBTYPE subtipo IS tipo_base;
</pre>
</div>
</div>
<br>
<p>
Donde subtipo será el nombre que le demos a nuestro subtipo y tipo_base será cualquier tipo de dato en PL/SQL.
</p>
<p>
A la hora de especificar el tipo base, podemos utilizar el modificador %TYPE para indicar el tipo de dato de una variable o de una columna de la base de datos y %ROWTYPE para especificar el tipo de un cursor o tabla de una base de datos.
</p>
<div class="codigo elemento_centrado" style="width: 33.5em">
<div class="texto_izquierda">
<pre>SUBTYPE id_familia IS familias.identificador%TYPE;
</pre>
<pre>SUBTYPE agente IS agentes%ROWTYPE;
</pre>
</div>
</div>
<br>
<p>
Los subtipos no podemos restringirlos, pero podemos usar un truco para conseguir el mismo efecto y es por medio de una variable auxiliar:
</p>
<div class="codigo elemento_centrado" style="width: 32.4em">
<div class="texto_izquierda">
<pre>SUBTYPE apodo IS varchar2(20);          --ilegal
</pre>
<pre>aux varchar2(20);
</pre>
<pre>SUBTYPE apodo IS aux%TYPE;               --legal
</pre>
</div>
</div>
<br>
<p>
Los subtipos son intercambiables con su tipo base. También son intercambiables si tienen el mismo tipo base o si su tipo base pertenece a la misma familia:
</p>
<div class="codigo elemento_centrado" style="width: 42.3em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     SUBTYPE numero IS NUMBER;
</pre>
<pre>     numero_tres_digitos NUMBER(3);
</pre>
<pre>     mi_numero_de_la_suerte numero;
</pre>
<pre>     SUBTYPE encontrado IS BOOLEAN;
</pre>
<pre>     SUBTYPE resultado IS BOOLEAN;
</pre>
<pre>     lo_he_encontrado encontrado;
</pre>
<pre>     resultado_busqueda resultado;
</pre>
<pre>     SUBTYPE literal IS CHAR;
</pre>
<pre>     SUBTYPE sentencia IS VARCHAR2;
</pre>
<pre>     literal_nulo literal;
</pre>
<pre>     sentencia_vacia sentencia;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     numero_tres_digitos := mi_numero_de_la_suerte;     --legal
</pre>
<pre>     ...
</pre>
<pre>     lo_he_encontrado := resultado_busqueda;               --legal
</pre>
<pre>     ...
</pre>
<pre>     sentencia_vacia := literal_nulo;                    --legal
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id22">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id22-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-22_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion22_60" class="block question iDevice_content">
<strong>Indica la afirmación correcta.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i22_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_63">Opción 1</a></label><input type="radio" name="option22_60" id="i22_63" class="exe-radio-option exe-radio-option-0-4-22_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-22_63"><a name="answer-22_63" href="./recopila_files/saved_resource"></a>
<div id="taans22_63" class="block iDevice_content">
Los subtipos lo único que hacen es añadir complejidad a nuestros programas.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i22_93" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_93">Opción 2</a></label><input type="radio" name="option22_60" id="i22_93" class="exe-radio-option exe-radio-option-1-4-22_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-22_93"><a name="answer-22_93" href="./recopila_files/saved_resource"></a>
<div id="taans22_93" class="block iDevice_content">
No hay manera de restringir los subtipos con respecto a su tipo base.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i22_96" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_96">Opción 3</a></label><input type="radio" name="option22_60" id="i22_96" class="exe-radio-option exe-radio-option-2-4-22_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-22_96"><a name="answer-22_96" href="./recopila_files/saved_resource"></a>
<div id="taans22_96" class="block iDevice_content">
Podemos definir un subtipo cuyo tipo base sea una tabla de la base de datos.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i22_99" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_99">Opción 4</a></label><input type="radio" name="option22_60" id="i22_99" class="exe-radio-option exe-radio-option-3-4-22_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-22_99"><a name="answer-22_99" href="./recopila_files/saved_resource"></a>
<div id="taans22_99" class="block iDevice_content">
Podemos definir un subtipo de una variable pero no de una columna de la base de datos.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b22_60" class="feedback js-hidden"><a name="sa0b22_60" href="./recopila_files/saved_resource"></a>
<div id="taf22_63" class=" iDevice_content">
Incorrecto. Los subtipos añaden legibilidad y no complejidad.

</div>
</div>
<div id="sa1b22_60" class="feedback js-hidden"><a name="sa1b22_60" href="./recopila_files/saved_resource"></a>
<div id="taf22_93" class=" iDevice_content">
No es cierto. Los subtipos  podemos restringirlos con respecto a su tipo base de forma indirecta.

</div>
</div>
<div id="sa2b22_60" class="feedback js-hidden"><a name="sa2b22_60" href="./recopila_files/saved_resource"></a>
<div id="taf22_96" class=" iDevice_content">
Efectivamente, veo que lo estás entendiendo.

</div>
</div>
<div id="sa3b22_60" class="feedback js-hidden"><a name="sa3b22_60" href="./recopila_files/saved_resource"></a>
<div id="taf22_99" class=" iDevice_content">
No es correcto. Los subtipos pueden ser de una variable y también de una columna de la base de datos.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b22_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_93">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b22_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_96">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa2b22_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-22_99">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa3b22_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.2.2.- Variables y constantes.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id23">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id23-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta23_73" class="block iDevice_content">
<img alt="Pizarra en la que se puede leer “π=3&#39;1416”." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R09_Pi.jpg" title="Constante." width="200">
<p>
Llevamos un buen rato hablando de tipos de datos, variables e incluso de constantes y te estarás preguntando cuál es la forma adecuada de definirlas. En este apartado vamos a ver las diferentes posibilidades a la hora de definirlas y dejaremos para el apartado siguiente ver cuál es el lugar adecuado para hacerlo dentro de un bloque PL/SQL.
</p>
<p>
Para declarar variables o constantes pondremos el nombre de la variable, seguido del tipo de datos y opcionalmente una asignación. Si es una constante antepondremos la palabra CONSTANT al tipo de dato (lo que querrá decir que no podemos cambiar su valor). Podremos sustituir el operador de asignación en las declaraciones por la palabra reservada DEFAULT. También podremos forzar a que no sea nula utilizando la palabra NOT NULL después del tipo y antes de la asignación. Si restringimos una variable con NOT NULL deberemos asignarle un valor al declararla, de lo contrario PL/SQL lanzará la excepción VALUE_ERROR (no te asustes que más adelante veremos lo que son las excepciones, pero como adelanto te diré que es un error en tiempo de ejecución).
</p>
<div class="codigo elemento_centrado" style="width: 39.55em">
<div class="texto_izquierda">
<pre>id SMALLINT;
</pre>
<pre>hoy DATE := sysdate;
</pre>
<pre>pi CONSTANT REAL:= 3.1415;
</pre>
<pre>id SMALLINT NOT NULL;          --ilegal, no está inicializada
</pre>
<pre>id SMALLINT NOT NULL := 9999;     --legal
</pre>
</div>
</div>
<br>
<p>
El alcance y la visibilidad de las variables en PL/SQL será el típico de los lenguajes estructurados basados en bloques, aunque eso lo veremos más adelante.
</p>
<p>
<strong>Conversión de tipos.</strong>
</p>
<p>
Aunque en PL/SQL existe la conversión implícita de tipos para tipos parecidos, siempre es aconsejable utilizar la conversión explícita de tipos por medio de funciones de conversión (TO_CHAR, <code>TO_DATE</code>, TO_NUMBER, …) y así evitar resultados inesperados.
</p>
<p>
<strong>Precedencia de operadores.</strong>
</p>
<p>
Al igual que en nuestro lenguaje matemático se utiliza una precedencia entre operadores a la hora de realizar las operaciones aritméticas, en PL/SQL también se establece dicha precedencia para evitar confusiones. Si dos operadores tienen la misma precedencia lo aconsejable es utilizar los paréntesis (al igual que hacemos en nuestro lenguaje matemático) para alterar la precedencia de los mismos ya que las operaciones encerradas entre paréntesis tienen mayor precedencia. En la tabla siguiente se muestra la precedencia de los operadores de mayor a menor.
</p>
<table class="tabla" summary="Tabla en la que se muestra la precedencia de operadores de mayor a menor y se acompaña de la operación asociada a dicho operador.">
	<caption>Precedencia de operadores.</caption>
	<thead>
		<tr>
			<th scope="col">Operador.</th>
			<th scope="col">Operación.</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>**, <code>NOT</code></td>
			<td>Exponenciación, negación lógica.</td>   
		</tr>
		<tr>
			<td>+, <code>-</code></td>
			<td>Identidad, negación.</td>   
		</tr>
		<tr>
			<td>*, <code>/</code></td>
			<td>Multiplicación, división.</td>   
		</tr>
		<tr>
			<td>+, <code>-</code>, ||</td>
			<td>Suma, resta y concatenación.</td>   
		</tr>
		<tr>
			<td>=, <code>¡=</code>, &lt;, &gt;, &lt;=, &gt;=, IS NULL, <code>LIKE</code>, BETWEEN, <code>IN</code></td>
			<td>Comparaciones.</td>   
		</tr>
		<tr>
			<td>AND</td>
			<td>Conjunción lógica</td>   
		</tr>
		<tr>
			<td>OR</td>
			<td>Disyunción lógica.</td>   
		</tr>
	</tbody>
</table>

</div>
</div>
</div>
<div class="iDevice_wrapper ClozefpdIdevice em_iDevice" id="id24">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id24-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta24_41" class="block instructions iDevice_content">
<strong>Rellena el hueco con el resultado de las siguientes operaciones.</strong>

</div>
<div class="activity" id="activity-24_42">
<form name="cloze-form-24_42" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" class="activity-form cloze-activity-form">
<div id="cloze24_42">
<input type="hidden" name="clozeFlag24_42.strictMarking" id="clozeFlag24_42.strictMarking" value="false">

<input type="hidden" name="clozeFlag24_42.checkCaps" id="clozeFlag24_42.checkCaps" value="false">

<input type="hidden" name="clozeFlag24_42.instantMarking" id="clozeFlag24_42.instantMarking" value="false">

<ul class="lista_verificacion">
	<li>5+3*2**2 es igual a: 
<label for="clozeBlank24_42.0" class="sr-av">Rellenar huecos (1):</label>
<input class="autocomplete-off" type="text" value="" id="clozeBlank24_42.0" style="width:2em" autocomplete="off">
<span style="display:none" id="clozeAnswer24_42.0">JXUwMDY5JXUwMDA2
</span>
.</li>
	<li>2**3+6/3 es igual a: 
<label for="clozeBlank24_42.1" class="sr-av">Rellenar huecos (2):</label>
<input class="autocomplete-off" type="text" value="" id="clozeBlank24_42.1" style="width:2em" autocomplete="off">
<span style="display:none" id="clozeAnswer24_42.1">JXUwMDY5JXUwMDAx
</span>
.</li>
	<li>2**(3+6/3) es igual a: 
<label for="clozeBlank24_42.2" class="sr-av">Rellenar huecos (3):</label>
<input class="autocomplete-off" type="text" value="" id="clozeBlank24_42.2" style="width:2em" autocomplete="off">
<span style="display:none" id="clozeAnswer24_42.2">JXUwMDZiJXUwMDAx
</span>
.</li>
</ul>

<div class="block iDevice_buttons">
<p>
<input class="button" type="submit" name="submit24_42" value="Enviar" id="submit24_42">

<input type="button" name="restart24_42" value="Reiniciar" style="display:none" id="restart24_42" onclick="$exe.cloze.restart(&#39;24_42&#39;)">

 
<input type="button" name="24_42showAnswersButton" value="Mostrar las respuestas" style="display:none" id="showAnswersButton24_42" onclick="$exe.cloze.fillInputs(&#39;24_42&#39;)">

<span class="js-hidden js-warning">Habilitar JavaScript</span>
</p>
</div>
<div id="clozeScore24_42"></div>
</div>
</form>
</div></div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.3.- El bloque PL/SQL.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id26">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id26-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta26_73" class="block iDevice_content">
<p>
Ya hemos visto las unidades léxicas que componen PL/SQL, los tipos de datos que podemos utilizar y cómo se definen las variables y las constantes. Ahora vamos a ver la unidad básica en PL/SQL que es el bloque.
</p>
<p>
Un bloque PL/SQL consta de tres zonas:
</p>
<ul class="lista_verificacion">
	<li><strong>Declaraciones</strong>: definiciones de variables, constantes, cursores y excepciones.</li>
	<li><strong>Proceso</strong>: zona donde se realizará el proceso en sí, conteniendo las sentencias ejecutables.</li>
	<li><strong>Excepciones</strong>: zona de manejo de errores en tiempo de ejecución.</li>
</ul>
<p>
La sintaxis es la siguiente:
</p>
<div class="codigo elemento_centrado" style="width: 43.4em">
<div class="texto_izquierda">
<pre>[DECLARE
</pre>
<pre>     [Declaración de variables, constantes, cursores y excepciones]]
</pre>
<pre>BEGIN
</pre>
<pre>     [Sentencias ejecutables]
</pre>
<pre>[EXCEPTION
</pre>
<pre>     Manejadores de excepciones]
</pre>
<pre>END;
</pre>
</div>
</div>
<br>
<p>
Los bloques PL/SQL pueden anidarse a cualquier nivel. Como hemos comentado anteriormente el ámbito y la visibilidad de las variables es la normal en un lenguaje procedimental. Por ejemplo, en el siguiente fragmento de código se declara la variable aux en ambos bloques, pero en el bloque anidado aux con valor igual a 10 actúa de variable global y aux con valor igual a 5 actúa como variable local, por lo que en la comparación evaluaría a FALSE, ya que al tener el mismo nombre la visibilidad dominante sería la de la variable local.
</p>
<div class="codigo elemento_centrado" style="width: 39em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     aux number := 10;
</pre>
<pre>BEGIN
</pre>
<pre>     DECLARE
</pre>
<pre>          aux number := 5;          
</pre>
<pre>     BEGIN
</pre>
<pre>          ...
</pre>
<pre>          IF aux = 10 THEN     --evalúa a FALSE, no entraría
</pre>
<pre>          ...
</pre>
<pre>     END;
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id27">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id27-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta27_47" class="block iDevice_content">
<p>En el siguiente enlace podrás ampliar información sobre el ámbito y la visibilidad de las variables en PL/SQL.</p>
<p class="enlace_centrado"><a href="http://informatica.uv.es/iiguia/2000/BD2/apuPLSQL.PDF" title="Acceder al capítulo de un tutorial de PL/SQL donde se habla del ámbito y la visibilidad de las variables.">Ámbito y visibilidad en PL/SQL.</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id28">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id28-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-28_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion28_60" class="block question iDevice_content">
<strong>En PL/SQL el bloque es la unidad básica, por lo que éstos no pueden anidarse.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i28_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-28_63">Opción 1</a></label><input type="radio" name="option28_60" id="i28_63" class="exe-radio-option exe-radio-option-0-2-28_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-28_63"><a name="answer-28_63" href="./recopila_files/saved_resource"></a>
<div id="taans28_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i28_104" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-28_104">Opción 2</a></label><input type="radio" name="option28_60" id="i28_104" class="exe-radio-option exe-radio-option-1-2-28_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-28_104"><a name="answer-28_104" href="./recopila_files/saved_resource"></a>
<div id="taans28_104" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b28_60" class="feedback js-hidden"><a name="sa0b28_60" href="./recopila_files/saved_resource"></a>
<div id="taf28_63" class=" iDevice_content">
No, los bloques se pueden anidar según nos convenga.

</div>
</div>
<div id="sa1b28_60" class="feedback js-hidden"><a name="sa1b28_60" href="./recopila_files/saved_resource"></a>
<div id="taf28_104" class=" iDevice_content">
Efectivamente, veo que lo vas entendiendo.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-28_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b28_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-28_104">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b28_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id121">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id121-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta121_69" class="block iDevice_content">
<p>Para comenzar a ver cómo se programa en PL/SQL puedes visualizar el siguiente videotutorial donde se muestra cómo trabajar con bloques PL/SQL </p>
<p></p>
<p style="text-align: center;"><strong>Trabajando con bloques PL/SQL</strong></p>
<p style="text-align: center;"><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/eNVd2UnjGLU">https://www.youtube.com/embed/eNVd2UnjGLU</a></span><iframe width="560" height="315" src="./recopila_files/eNVd2UnjGLU.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></p>
<p></p>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.4.- Estructuras de control (I).</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id29">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id29-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta29_73" class="block iDevice_content">
<p>En la vida constantemente tenemos que tomar decisiones que hacen que llevemos a cabo unas acciones u otras dependiendo de unas circunstancias o repetir una serie de acciones un número dado de veces o hasta que se cumpla una condición. En PL/SQL también podemos imitar estas situaciones por medio de las estructuras de control que son sentencias que nos permiten manejar el <a class="glosario" href="./recopila_files/saved_resource">flujo de control<span><em>Flujo de control</em>Se llama flujo de control al orden en el que se ejecutan las instrucciones de un programa, siendo las propias instrucciones las que determinan o controlan dicho flujo. En un programa, a menos que el flujo de control se vea modificado por una instrucción de control, las instrucciones siempre se ejecutan secuencialmente, una detrás de otra.</span></a> de nuestro programa, y éstas son dos: condicionales e iterativas.</p>
<p><strong>Control condicional.</strong></p>
<p>Las estructuras de control condicional nos permiten llevar a cabo una acción u otra dependiendo de una condición. Vemos sus diferentes variantes:</p>
<ul class="lista_verificacion">
<li style="margin-bottom: 20px;">IF-THEN: Forma más simple de las sentencias de control condicional. Si la evaluación de la condición es TRUE, entonces se ejecuta la secuencia de sentencias encerradas entre el THEN y el final de la sentencia.
<table class="tabla" summary="Tabla en la que se muestra la sintaxis de la sentencia IF-THEN y se acompaña de un ejemplo de su uso."><caption>Sentencia IF-THEN.</caption>
<thead>
<tr><th scope="col">Sintaxis.</th><th scope="col">Ejemplo.</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 19.2em;">
<div class="texto_izquierda">
<pre>IF condicion THEN
</pre>
<pre>secuencia_de_sentencias;
</pre>
<pre>END IF;
</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 15.35em;">
<div class="texto_izquierda">
<pre>IF (b&lt;&gt;0) THEN
</pre>
<pre>     c:=a/b;
</pre>
<pre>END IF;
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<ul>
<li style="margin-bottom: 20px;">IF-THEN-ELSE: Con esta forma de la sentencia ejecutaremos la primera secuencia de sentencias si la condición evalúa a TRUE y en caso contrario ejecutaremos la segunda secuencia de sentencias.
<table class="tabla" summary="Tabla en la que se muestra la sintaxis de la sentencia IF-THEN-ELSE y se acompaña de un ejemplo de su uso."><caption>Sentencia IF-THEN-ELSE.</caption>
<thead>
<tr><th scope="col">Sintaxis.</th><th scope="col">Ejemplo.</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 22.5em;">
<div class="texto_izquierda">
<pre>IF condicion THEN
</pre>
<pre>     Secuencia_de_sentencias1;
</pre>
<pre>ELSE
</pre>
<pre>     Secuencia_de_sentencias2;
</pre>
<pre>END IF;
</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 15.35em;">
<div class="texto_izquierda">
<pre>IF (b&gt;0) THEN
</pre>
<pre>     c:=a*b;&lt;br /&gt;ELSE&lt;br /&gt;     c:=a+b;&lt;br /&gt;END IF;
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>IF-THEN-ELSIF: Con esta última forma de la sentencia condicional podemos hacer una selección múltiple. Si la evaluación de la condición 1 da TRUE, ejecutamos la secuencia de sentencias 1, sino evaluamos la condición 2. Si esta evalúa a TRUE ejecutamos la secuencia de sentencias 2 y así para todos los ELSIF que haya. El último ELSE es opcional y es por si no se cumple ninguna de las condiciones anteriores.
<table class="tabla" summary="Tabla en la que se muestra la sintaxis de la sentencia IF-THEN-ELSIF y se acompaña de un ejemplo de su uso."><caption>Sentencia IF-THEN-ELSIF.</caption>
<thead>
<tr><th scope="col">Sintaxis.</th><th scope="col">Ejemplo.</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 22.5em;">
<div class="texto_izquierda">
<pre>IF condicion1 THEN
</pre>
<pre>     Secuencia_de_sentencias1;
</pre>
<pre>ELSIF condicion2 THEN
</pre>
<pre>     Secuencia_de_sentencias2;
</pre>
<pre>     ...
</pre>
<pre>[ELSE
</pre>
<pre>     Secuencia_de_sentencias;]
</pre>
<pre>END IF;
</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 35.7em;">
<div class="texto_izquierda">
<pre>IF (operacion = ‘SUMA’) THEN
</pre>
<pre>     resultado := arg1 + arg2;
</pre>
<pre>ELSIF (operacion = ‘RESTA’) THEN
</pre>
<pre>     resultado := arg1 – arg2;
</pre>
<pre>ELSIF (operacion = ‘PRODUCTO’) THEN
</pre>
<pre>     resultado := arg1 * arg2;
</pre>
<pre>ELSIF (arg2 &lt;&gt; 0) AND (operacion = ‘DIVISION’) THEN
</pre>
<pre>     resultado := arg1 / arg2;
</pre>
<pre>ELSE
</pre>
<pre>     RAISE operacion_no_permitida;
</pre>
<pre>END IF;				
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id30">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id30-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-30_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion30_60" class="block question iDevice_content">
<strong>En PL/SQL no existen sentencias que nos permitan tomar una acción u otra dependiendo de una condición.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i30_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-30_63">Opción 1</a></label><input type="radio" name="option30_60" id="i30_63" class="exe-radio-option exe-radio-option-0-2-30_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-30_63"><a name="answer-30_63" href="./recopila_files/saved_resource"></a>
<div id="taans30_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i30_107" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-30_107">Opción 2</a></label><input type="radio" name="option30_60" id="i30_107" class="exe-radio-option exe-radio-option-1-2-30_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-30_107"><a name="answer-30_107" href="./recopila_files/saved_resource"></a>
<div id="taans30_107" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b30_60" class="feedback js-hidden"><a name="sa0b30_60" href="./recopila_files/saved_resource"></a>
<div id="taf30_63" class=" iDevice_content">
Incorrecto, deberías volver a leerte este apartado ya que es de lo que trata.

</div>
</div>
<div id="sa1b30_60" class="feedback js-hidden"><a name="sa1b30_60" href="./recopila_files/saved_resource"></a>
<div id="taf30_107" class=" iDevice_content">
Efectivamente, para eso existen las sentencias de control condicional.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-30_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b30_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-30_107">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b30_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.4.1.- Estructuras de control (II).</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id31">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id31-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta31_73" class="block iDevice_content">
<p><img alt="Estantería con el mismo ratón de peluche repetido." class="elemento_derecha" src="./recopila_files/BD06_CONT_R12_PelucheRepetido.jpg" title="Repetido." height="132" width="200"></p>
<p>Ya que hemos visto las estructuras de control condicional, veamos ahora las estructuras de control iterativo.</p>
<p><strong>Control iterativo.</strong></p>
<p>Estas estructuras nos permiten ejecutar una secuencia de sentencias un determinado número de veces.</p>
<ul class="lista_verificacion">
<li style="margin-bottom: 20px;">LOOP: La forma más simple es el <a class="glosario" href="./recopila_files/saved_resource">bucle infinito<span><em>Bucle infinito</em>Bucle infinito es aquel ciclo que se repite de forma indefinida, ya que su condición para finalizar nunca se cumple o no tiene dicha condición.</span></a>, cuya sintaxis es:
<div class="codigo elemento_centrado" style="width: 21.95em;">
<div class="texto_izquierda">
<pre>LOOP
</pre>
<pre>     secuencia_de_sentencias;
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</li>
<li style="margin-bottom: 20px;">EXIT: Con esta sentencia forzamos a un bucle a terminar y pasa el control a la siguiente sentencia después del bucle. Un EXIT no fuerza la salida de un bloque PL/SQL, sólo la salida del bucle.
<div class="codigo elemento_centrado" style="width: 22.5em;">
<div class="texto_izquierda">
<pre>LOOP
</pre>
<pre>     ...
</pre>
<pre>     IF encontrado = TRUE THEN
</pre>
<pre>          EXIT;
</pre>
<pre>     END IF;
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</li>
<li style="margin-bottom: 20px;">EXIT WHEN condicion: Fuerza a salir del bucle cuando se cumple una determinada condición.
<div class="codigo elemento_centrado" style="width: 20.3em;">
<div class="texto_izquierda">
<pre>LOOP
</pre>
<pre>     ...
</pre>
<pre>     EXIT WHEN encontrado;
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</li>
<li style="margin-bottom: 20px;">WHILE LOOP: Este tipo de bucle ejecuta la secuencia de sentencias mientras la condición sea cierta.
<table class="tabla" summary="Tabla en la que se muestra la sintaxis de la sentencia IF-THEN-ELSIF y se acompaña de un ejemplo de su uso."><caption>Sentencia WHILE LOOP.</caption>
<thead>
<tr><th scope="col">Sintaxis.</th><th scope="col">Ejemplo.</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 21.95em;">
<div class="texto_izquierda">
<pre>WHILE condicion LOOP
</pre>
<pre>     Secuencia_de_sentencias;
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 20.85em;">
<div class="texto_izquierda">
<pre>WHILE (not encontrado) LOOP
</pre>
<pre>     ...
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li>FOR LOOP: Este bucle itera mientras el contador se encuentre en el rango definido.
<table class="tabla" summary="Tabla en la que se muestra la sintaxis de la sentencia FOR LOOP y se acompaña de ejemplos de su uso."><caption>Sentencia FOR LOOP.</caption>
<thead>
<tr><th scope="col">Sintaxis.</th><th scope="col">Ejemplo.</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 40.65em;">
<div class="texto_izquierda">
<pre>FOR contador IN [REVERSE] limite_inferior..limite_superior LOOP
</pre>
<pre>     Secuencia_de_sentencias;
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 31.3em;">
<div class="texto_izquierda">
<pre>FOR i IN 1..3 LOOP     --i=1, i=2, i=3
</pre>
<pre>     ...
</pre>
<pre>END LOOP;
</pre>
<pre> </pre>
<pre>SELECT count(*) INTO num_agentes FROM agentes;
</pre>
<pre>FOR i IN 1..num_agentes LOOP
</pre>
<pre>     ...
</pre>
<pre>END LOOP;
</pre>
<pre> </pre>
<pre> </pre>
<pre>FOR i IN REVERSE 1..3 LOOP --i=3, i=2, i=1
</pre>
<pre>     ...
</pre>
<pre>END LOOP;
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id32">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id32-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-32_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion32_60" class="block question iDevice_content">
<strong>Al utilizar REVERSE en un bucle FOR, en el rango debemos poner el número mayor el primero y el menor el último.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i32_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-32_63">Opción 1</a></label><input type="radio" name="option32_60" id="i32_63" class="exe-radio-option exe-radio-option-0-2-32_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-32_63"><a name="answer-32_63" href="./recopila_files/saved_resource"></a>
<div id="taans32_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i32_111" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-32_111">Opción 2</a></label><input type="radio" name="option32_60" id="i32_111" class="exe-radio-option exe-radio-option-1-2-32_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-32_111"><a name="answer-32_111" href="./recopila_files/saved_resource"></a>
<div id="taans32_111" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b32_60" class="feedback js-hidden"><a name="sa0b32_60" href="./recopila_files/saved_resource"></a>
<div id="taf32_63" class=" iDevice_content">
No, el rango lo especificamos de misma forma, el menor el primero y el mayor el último, aunque luego se itere del mayor al menor.

</div>
</div>
<div id="sa1b32_60" class="feedback js-hidden"><a name="sa1b32_60" href="./recopila_files/saved_resource"></a>
<div id="taf32_111" class=" iDevice_content">
Efectivamente, vas por buen camino.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-32_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b32_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-32_111">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b32_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.5.- Excepciones.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id33">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id33-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta33_73" class="block iDevice_content">
<img alt="Dibujo de una cara de un chico sorprendido." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R13_Sorpresa.jpg" title="Sorpresa." width="156"> 
<p>
Muchas veces te habrá pasado que surgen situaciones inesperadas con las que no contabas y a las que tienes que hacer frente. Pues cuando programamos con PL/SQL pasa lo mismo, que a veces tenemos que manejar errores debidos a situaciones diversas. Vamos a ver cómo tratarlos.
</p>
<p>
Cualquier situación de error es llamada <strong>excepción</strong> en PL/SQL. Cuando se detecta un error, una excepción es lanzada, es decir, la ejecución normal se para y el control se transfiere a la parte de manejo de excepciones. La parte de manejo de excepciones es la parte etiquetada como EXCEPTION y constará de sentencias para el manejo de dichas excepciones, llamadas <strong>manejadores de excepciones</strong>.
</p>
<table class="tabla" summary="Tabla en la que se muestra la sintaxis para escribir manejadores de excepciones y se acompaña de un ejemplo.">
	<caption>Manejadores de excepciones.</caption>
	<thead>
		<tr>
			<th scope="col">Sintaxis.</th>
			<th scope="col">Ejemplo.</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>
			<div class="codigo elemento_centrado" style="width: 25.25em">
			<div class="texto_izquierda">
<pre>WHEN nombre_excepcion THEN
</pre>
<pre>     &lt;sentencias para su manejo&gt;
</pre>
<pre>     ....
</pre>
<pre>WHEN OTHERS THEN
</pre>
<pre>     &lt;sentencias para su manejo&gt;
</pre>
			</div>
			</div>
			</td>
			<td>
			<div class="codigo elemento_centrado" style="width: 30.75em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     supervisor agentes%ROWTYPE;
</pre>
<pre>BEGIN
</pre>
<pre>     SELECT * INTO supervisor FROM agentes
</pre>
<pre>     WHERE categoria = 2 AND oficina = 3;
</pre>
<pre>          ...
</pre>
<pre>EXCEPTION
</pre>
<pre>     WHEN NO_DATA_FOUND THEN
</pre>
<pre>     --Manejamos el no haber encontrado datos
</pre>
<pre>WHEN OTHERS THEN
</pre>
<pre>     --Manejamos cualquier error inesperado
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>   
		</tr>
	</tbody>
</table>
<br>
<p>
La parte OTHERS captura cualquier excepción no capturada.
</p>
<p>
Las excepciones pueden estar definidas por el usuario o definidas internamente. Las excepciones predefinidas se lanzarán automáticamente asociadas a un error de <span lang="en">Oracle</span>. Las excepciones definidas por el usuario deberán definirse y lanzarse explícitamente.
</p>
<p>
En PL/SQL nosotros podemos definir nuestras propias excepciones en la parte DECLARE de cualquier bloque. Estas excepciones podemos lanzarlas explícitamente por medio de la sentencia RAISE nombre_excepción.
</p>
<table class="tabla" summary="Tabla en la que se muestra la sintaxis para definir y lanzar excepciones y se acompaña de un ejemplo.">
	<caption>Excepciones definidas por el usuario.</caption>
	<thead>
		<tr>
			<th scope="col">Sintaxis.</th>
			<th scope="col">Ejemplo.</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>
			<div class="codigo elemento_centrado" style="width: 23.6em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     nombre_excepcion EXCEPTION;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     RAISE nombre_excepcion;
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>
			<td>
			<div class="codigo elemento_centrado" style="width: 29.1em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     categoria_erronea EXCEPTION;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     IF categoria&lt;0 OR categoria&gt;3 THEN
</pre>
<pre>          RAISE categoria_erronea;
</pre>
<pre>     END IF;
</pre>
<pre>     ...
</pre>
<pre>EXCEPTION
</pre>
<pre>     WHEN categoria_erronea THEN
</pre>
<pre>          --manejamos la categoria errónea
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>   
		</tr>
	</tbody>
</table>

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id34">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id34-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta34_48" class="block iDevice_content">
<p>Las diferentes excepciones predefinidas en Oracle, junto a su código de error asociado (que luego veremos lo que es) y una explicación de cuándo son lanzadas las puedes ver al final de la unidad en el&nbsp;<strong>Anexo II. Excepciones predefinidas en Oracle.</strong></p>
<p class="enlace_centrado"></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">2.5.1.- Manejo de errores.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id36">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id36-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta36_73" class="block iDevice_content">
<img alt="Dibujo de una regla de medir." class="elemento_derecha" height="188" src="./recopila_files/BD06_CONT_R15_Regla.jpg" title="Regla." width="160">
<p>
Ahora que ya sabemos lo que son las excepciones, cómo capturarlas y manejarlas y cómo definir y lanzar las nuestras propias. Es la hora de comentar algunos detalles sobre el uso de las mismas.
</p>
<ul class="lista_verificacion">
	<li>El alcance de una excepción sigue las mismas reglas que el de una variable, por lo que si nosotros redefinimos una excepción que ya es global para el bloque, la definición local prevalecerá y no podremos capturar esa excepción a menos que el bloque en la que estaba definida esa excepción fuese un bloque nombrado, y podremos capturarla usando la sintaxis: nombre_bloque.nombre_excepcion.</li>
	<li style="margin-bottom: 20px">Las excepciones predefinidas están definidas globalmente. No necesitamos (ni debemos) redefinir las excepciones predefinidas.
	<div class="codigo elemento_centrado" style="width: 42.3em">
	<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     no_data_found EXCEPTION;
</pre>
<pre>BEGIN
</pre>
<pre>     SELECT * INTO ...
</pre>
<pre>EXCEPTION
</pre>
<pre>     WHEN no_data_found THEN     --captura la excepción local, no 
</pre>
<pre>                         --la global
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li> 
	<li style="margin-bottom: 20px">Cuando manejamos una excepción no podemos continuar por la siguiente sentencia a la que la lanzó.
	<div class="codigo elemento_centrado" style="width: 41.2em">
	<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     ...
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     INSERT INTO familias VALUES 
</pre>
<pre>(id_fam, nom_fam, NULL, oficina);
</pre>
<pre>     INSERT INTO agentes VALUES 
</pre>
<pre>(id_ag, nom_ag, login, password, 0, 0, id_fam, NULL);
</pre>
<pre>     ...
</pre>
<pre>EXCEPTION
</pre>
<pre>     WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>          --manejamos la excepción debida a que el nombre de
</pre>
<pre>          --la familia ya existe, pero no podemos continuar por 
</pre>
<pre>          --el INSERT INTO agentes, a no ser que lo pongamos 
</pre>
<pre>          --explícitamente en el manejador
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li> 
	<li>Pero sí podemos encerrar la sentencia dentro de un bloque, y ahí capturar las posibles excepciones, para continuar con las siguientes sentencias.
	<div class="codigo elemento_centrado" style="width: 52.75em">
	<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     id_fam NUMBER;
</pre>
<pre>     nom_fam VARCHAR2(40);
</pre>
<pre>     oficina NUMBER;
</pre>
<pre>     id_ag NUMBER;
</pre>
<pre>     nom_ag VARCHAR2(60);
</pre>
<pre>     usuario VARCHAR2(20);
</pre>
<pre>     clave VARCHAR2(20);
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     BEGIN
</pre>
<pre>          INSERT INTO familias VALUES (id_fam, nom_fam, NULL, oficina);
</pre>
<pre>     EXCEPTION
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>SELECT identificador INTO id_fam FROM familias WHERE nombre = nom_fam;
</pre>
<pre>     END;
</pre>
<pre>     INSERT INTO agentes VALUES (id_ag, nom_ag, login, password, 1, 1, id_fam, null);
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li>
</ul>

</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id37">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id37-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta37_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b37" class="block iDevice_content">
Supongamos que queremos reintentar una transacción hasta que no nos dé ningún error. Para ello deberemos encapsular la transacción en un bloque y capturar en éste las posibles excepciones. El bloque lo metemos en un bucle y así se reintentará la transacción hasta que sea posible llevarla a cabo.

</div>
<form name="feedback-form-quesFeedback0b37" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b37text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b37" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b37" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<div class="codigo elemento_centrado" style="width: 29.65em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     id_fam NUMBER;
</pre>
<pre>     nombre VARCHAR2(40);
</pre>
<pre>     oficina NUMBER;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     LOOP
</pre>
<pre>          BEGIN
</pre>
<pre>               SAVEPOINT inicio;
</pre>
<pre>               INSERT INTO familias VALUES 
</pre>
<pre>(id_fam, nombre, NULL, oficina);
</pre>
<pre>               ...
</pre>
<pre>               COMMIT;
</pre>
<pre>               EXIT;
</pre>
<pre>          EXCEPTION
</pre>
<pre>               WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>                    ROLLBACK TO inicio;
</pre>
<pre>                    id_fam := id_fam + 1;
</pre>
<pre>          END;
</pre>
<pre>     END LOOP;
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>
</div>
</form>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id119">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id119-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta119_43" class="block iDevice_content">
<p style="text-align: left;">Puedes aprender más sobre el manejo de excepciones (errores) en los<strong> Anexos II (a y b) </strong>que se encuentran<strong> </strong>al final de la unidad.<strong><br></strong></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.- Tipos de datos compuestos.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id43">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id43-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta43_66" class="block iDevice_content">
<img alt="Chica de mediana edad con el pelo corto y una chaqueta." class="elemento_derecha" height="200" src="./recopila_files/CASO_PERSONAJES_24.png" title="Ada." width="132">
<p>
<strong>María</strong>, gracias a la ayuda de Juan, ha comprendido muy bien el manejo básico de PL/SQL. <strong>Juan</strong> le comenta que en la mayoría de los lenguajes de programación, además de los tipos de datos simples, existen tipos de datos compuestos que le dan mucha más versatibilidad a los mismos y una gran potencia. <strong>Juan</strong> no conoce bien si PL/SQL dispone de estos tipos de datos y si dispone de ellos ¿de cuáles?
</p>
<p>
<strong>María</strong> y <strong>Juan</strong> van a hablar con <strong>Ada</strong> para ver si les puede aclarar un poco la situación y dar unas pequeñas pautas para empezar. <strong>Ada</strong> les comenta que claro que PL/SQL cuenta con este tipo de datos, pero que hoy tiene una reunión importantísima y que tiene que terminar de preparársela, por lo que los remite al capítulo sobre tipos de datos compuestos del manual que les pasó. <strong>Juan</strong> y <strong>María</strong> le dicen que no se preocupe y que ya verá como a la vuelta de esa reunión son capaces de saber cuáles son e incluso de dominarlos. <strong>Ada</strong>, para motivarlos, les dice que si es así los invita a un aperitivo a su vuelta. Así que <strong>Juan</strong> y <strong>María</strong> se ponen con el capítulo de tipos de datos compuestos del manual para ver si pueden sorprender a <strong>Ada</strong> a su vuelta.
</p>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id44">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id44-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta44_73" class="block iDevice_content">
En el capítulo anterior, entre otras cosas, hemos conocido los tipos de datos simples con los que cuenta PL/SQL. Pero dependiendo de la complejidad de los problemas, necesitamos disponer de otras estructuras en las que apoyarnos para poder modelar nuestro problema. En este capítulo nos vamos a centrar en conocer los tipos de datos complejos que nos ofrece PL/SQL y cómo utilizarlos para así poder sacarle el mayor partido posible.

</div>
</div>
</div>
<div class="iDevice_wrapper CitasparapensarfpdIdevice em_iDevice" id="id45">
<div class="iDevice emphasis_citasparapensarfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_citasparapensarfpd.png)"><h2 class="iDeviceTitle">Citas para pensar</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id45-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta45_49" class="block iDevice_content">
<blockquote>
	"Todo lo complejo puede dividirse en partes simples".<cite class="elemento_derecha"><span lang="fr">René Descartes</span>.</cite>
</blockquote>

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.1.- Registros.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id46">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id46-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta46_73" class="block iDevice_content">
El uso de los registros es algo muy común en los lenguajes de programación. PL/SQL también nos ofrece este tipo de datos. En este apartado veremos qué son y cómo definirlos y utilizarlos.

</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id47">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id47-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta47_70" class="block iDevice_content">
Un registro es un grupo de elementos relacionados almacenados en campos, cada uno de los cuales tiene su propio nombre y tipo de dato. 

</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id48">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id48-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta48_73" class="block iDevice_content">
<img alt="Imagen de una carta con su sello y con la dirección de destino." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R19_Carta.jpg" title="Carta." width="200">
<p>
Por ejemplo, una dirección podría ser un registro con campos como calle, número, piso, puerta, código postal, ciudad, provincia y país. Los registros hacen que la información sea más fácil de organizar y representar. Para declarar un registro seguiremos la siguiente sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 37.9em">
<div class="texto_izquierda">
<pre>TYPE nombre_tipo IS RECORD (decl_campo[, decl_campo] ...);
</pre>
</div>
</div>
&nbsp;
<p>
donde:
</p>
<div class="codigo elemento_centrado" style="width: 39.55em">
<div class="texto_izquierda">
<pre>decl_campo := nombre tipo [[NOT NULL] {:=|DEFAULT} expresion]
</pre>
</div>
</div>
&nbsp;
<p>
El tipo del campo será cualquier tipo de dato válido en PL/SQL excepto REF CURSOR. La expresión será cualquier expresión que evalúe al tipo de dato del campo.
</p>
<div class="codigo elemento_centrado" style="width: 26.9em">
<div class="texto_izquierda">
<pre>TYPE direccion IS RECORD
</pre>
<pre>(
</pre>
<pre>calle          VARCHAR2(50),
</pre>
<pre>numero          INTEGER(4),
</pre>
<pre>piso          INTEGER(4),
</pre>
<pre>puerta          VARCHAR2(2),
</pre>
<pre>codigo_postal     INTEGER(5),
</pre>
<pre>ciudad          VARCHAR2(30),
</pre>
<pre>provincia     VARCHAR2(20),
</pre>
<pre>pais          VARCHAR2(20) := ‘España’
</pre>
<pre>);
</pre>
<pre>mi_direccion direccion;
</pre>
</div>
</div>
&nbsp;
<p>
Para acceder a los campos usaremos la notación del punto.
</p>
<div class="codigo elemento_centrado" style="width: 28.55em">
<div class="texto_izquierda">
<pre>...
</pre>
<pre>mi_direccion.calle := ‘Ramirez Arellano’;
</pre>
<pre>mi_direccion.numero := 15;
</pre>
<pre>...
</pre>
</div>
</div>
&nbsp;
<p>
Para asignar un registro a otro, éstos deben ser del mismo tipo, no basta que tengan el mismo número de campos y éstos emparejen uno a uno. Tampoco podemos comparar registros aunque sean del mismo tipo, ni tampoco comprobar si éstos son nulos. Podemos hacer SELECT en registros, pero no podemos hacer INSERT desde registros.
</p>
<div class="codigo elemento_centrado" style="width: 39em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>TYPE familia IS RECORD
</pre>
<pre>(
</pre>
<pre>     identificador     NUMBER,
</pre>
<pre>     nombre          VARCHAR2(40),
</pre>
<pre>     padre          NUMBER,
</pre>
<pre>     oficina          NUMBER
</pre>
<pre>);
</pre>
<pre>TYPE familia_aux IS RECORD
</pre>
<pre>(
</pre>
<pre>     identificador     NUMBER,
</pre>
<pre>     nombre          VARCHAR2(40),
</pre>
<pre>     padre          NUMBER,
</pre>
<pre>     oficina          NUMBER
</pre>
<pre>     );
</pre>
<pre>     SUBTYPE familia_fila IS familias%ROWTYPE;
</pre>
<pre>     mi_fam familia;
</pre>
<pre>     mi_fam_aux familia_aux;
</pre>
<pre>     mi_fam_fila familia_fila;
</pre>
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>mi_fam := mi_fam_aux;                         --ilegal
</pre>
<pre>mi_fam := mi_fam_fila;                         --legal
</pre>
<pre>IF mi_fam IS NULL THEN ...                    --ilegal
</pre>
<pre>IF mi_fam = mi_fam_fila THEN ...               --ilegal
</pre>
<pre>SELECT * INTO mi_fam FROM familias ...          --legal
</pre>
<pre>INSERT INTO familias VALUES (mi_fam_fila);          --ilegal
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>
&nbsp;

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id49">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id49-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-49_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion49_60" class="block question iDevice_content">
<strong>Un registro se puede asignar a otro siempre que tenga el mismo número de campos y éstos emparejen uno a uno.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i49_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-49_63">Opción 1</a></label><input type="radio" name="option49_60" id="i49_63" class="exe-radio-option exe-radio-option-0-2-49_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-49_63"><a name="answer-49_63" href="./recopila_files/saved_resource"></a>
<div id="taans49_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i49_146" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-49_146">Opción 2</a></label><input type="radio" name="option49_60" id="i49_146" class="exe-radio-option exe-radio-option-1-2-49_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-49_146"><a name="answer-49_146" href="./recopila_files/saved_resource"></a>
<div id="taans49_146" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b49_60" class="feedback js-hidden"><a name="sa0b49_60" href="./recopila_files/saved_resource"></a>
<div id="taf49_63" class=" iDevice_content">
No, deben ser del mismo tipo para poder asignarlos.

</div>
</div>
<div id="sa1b49_60" class="feedback js-hidden"><a name="sa1b49_60" href="./recopila_files/saved_resource"></a>
<div id="taf49_146" class=" iDevice_content">
Efectivamente, veo que lo vas entendiendo.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-49_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b49_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-49_146">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b49_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.2.- Colecciones. Arrays de longitud variable.</h1></div></div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id50">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id50-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta50_70" class="block iDevice_content">
Una colección es un grupo ordenado de elementos, todos del mismo tipo. Cada elemento tiene un subíndice único que determina su posición en la colección. 

</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id51">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id51-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta51_73" class="block iDevice_content">
<img alt="Estantería llena de libros de diferentes tamaños." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R20_Estanteria.jpg" title="Estantería." width="200">
<p>
En PL/SQL las colecciones sólo pueden tener una dimensión. PL/SQL ofrece 2 clases de colecciones: <span lang="en">arrays</span> de longitud variable y tablas anidadas.
</p>
<p>
<strong><span lang="en">Arrays</span> de longitud variable.</strong>
</p>
<p>
Los elementos del tipo VARRAY son los llamados <span lang="en">arrays</span> de longitud variable. Son como los <span lang="en">arrays</span> de cualquier otro lenguaje de programación, pero con la salvedad de que a la hora de declararlos, nosotros indicamos su tamaño máximo y el <span lang="en">array</span> podrá ir creciendo dinámicamente hasta alcanzar ese tamaño. Un VARRAY siempre tiene un límite inferior igual a 1 y un límite superior igual al tamaño máximo.
</p>
<p>
Para declarar un VARRAY usaremos la sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 49.45em">
<div class="texto_izquierda">
<pre>TYPE nombre IS {VARRAY | VARYING} (tamaño_máximo) OF tipo_elementos [NOT NULL];
</pre>
</div>
</div>
<br>
<p>
Donde tamaño_máximo será un entero positivo y tipo_elementos será cualquier tipo de dato válido en PL/SQL, excepto BINARY_INTEGER, <code>BOOLEAN</code>, LONG, <code>LONG RAW</code>, NATURAL, <code>NATURALN</code>, NCHAR, <code>NCLOB</code>, NVARCHAR2, objetos que tengan como atributos TABLE o <code>VARRAY</code>, PLS_INTEGER, <code>POSITIVE</code>, POSITIVEN, <code>SIGNTYPE</code>, STRING, <code>TABLE</code>, VARRAY. Si tipo_elementos es un registro, todos los campos deberían ser de un tipo escalar.
</p>
<p>
Cuando definimos un VARRAY, éste es automáticamente nulo, por lo que para empezar a utilizarlo deberemos inicializarlo. Para ello podemos usar un constructor:
</p>
<div class="codigo elemento_centrado" style="width: 73.65em">
<div class="texto_izquierda">
<pre>TYPE familias_hijas IS VARRAY(100) OF familia;
</pre>
<pre>familias_hijas1 familias_hijas := familias_hijas( familia(100, ’Fam100’, 10, null), ..., familia(105, ’Fam105’, 10, null));
</pre>
</div>
</div>
&nbsp;
<p>
También podemos usar constructores vacíos.
</p>
<div class="codigo elemento_centrado" style="width: 34.05em">
<div class="texto_izquierda">
<pre>familias_hijas2 familias_hijas := familias_hijas();
</pre>
</div>
</div>
&nbsp;
<p>
Para referenciar elementos en un VARRAY utilizaremos la sintaxis nombre_colección(subíndice). Si una función devuelve un VARRAY, podemos usar la sintaxis: nombre_funcion(lista_parametros)(subindice).
</p>
<div class="codigo elemento_centrado" style="width: 37.9em">
<div class="texto_izquierda">
<pre>IF familias_hijas1(i).identificador = 100 THEN ...
</pre>
<pre>IF dame_familias_hijas(10)(i).identificador = 100 THEN ...
</pre>
</div>
</div>
&nbsp;
<p>
Un VARRAY puede ser asignado a otro si ambos son del mismo tipo.
</p>
<div class="codigo elemento_centrado" style="width: 27.45em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>TYPE tabla1 IS VARRAY(10) OF NUMBER;
</pre>
<pre>TYPE tabla2 IS VARRAY(10) OF NUMBER;
</pre>
<pre>mi_tabla1 tabla1 := tabla1();
</pre>
<pre>mi_tabla2 tabla2 := tabla2();
</pre>
<pre>mi_tabla tabla1 := tabla1();
</pre>
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>mi_tabla := mi_tabla1;          --legal
</pre>
<pre>mi_tabla1 := mi_tabla2;     --ilegal
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>
&nbsp;
<p>
Para extender un VARRAY usaremos el método EXTEND. Sin parámetros, extendemos en 1 elemento nulo el VARRAY. <code>EXTEND(n)</code> añade n elementos nulos al VARRAY y <code>EXTEND(n,i)</code> añade n copias del i-ésimo elemento.
</p>
<p>
COUNT nos dirá el número de elementos del VARRAY. <code>LIMIT</code> nos dice el tamaño máximo del VARRAY. <code>FIRST</code> siempre será 1. LAST siempre será igual a COUNT. <code>PRIOR</code> y NEXT devolverá el antecesor y el sucesor del elemento.
</p>
<p>
Al trabajar con VARRAY podemos hacer que salte alguna de las siguientes excepciones, debidas a un mal uso de los mismos: COLECTION_IS_NULL, <code>SUBSCRIPT_BEYOND_COUNT</code>, SUBSCRIPT_OUTSIDE_LIMIT y <code>VALUE_ERROR</code>.
</p>
<table class="tabla" summary="Tabla en la que se muestran tres ejemplos de uso de los VARRAY. De izquierda a derecha: Extender un VARRAY, consulta un VARRAY y posibles excepciones.">
	<caption>Ejemplos de uso de los VARRAY.</caption>
	<thead>
		<tr>
			<th scope="col">Extender un VARRAY.</th>
			<th scope="col">Consultar propiedades VARRAY.</th>
			<th scope="col">Posibles excepciones.</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>
			<div class="codigo elemento_centrado" style="width: 28em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>   TYPE tab_num IS VARRAY(10) OF NUMBER;
</pre>
<pre>   mi_tab tab_num;
</pre>
<pre>BEGIN
</pre>
<pre>   mi_tab := tab_num();
</pre>
<pre>   FOR i IN 1..10 LOOP
</pre>
<pre>      mi_tab.EXTEND;
</pre>
<pre>      mi_tab(i) := calcular_elemento(i);
</pre>
<pre>   END LOOP;
</pre>
<pre>   ...
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>
			<td>
			<div class="codigo elemento_centrado" style="width: 33.5em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>   TYPE numeros IS VARRAY(20) OF NUMBER;
</pre>
<pre>   tabla_numeros numeros := numeros();
</pre>
<pre>   num NUMBER;
</pre>
<pre>BEGIN
</pre>
<pre>   num := tabla_numeros.COUNT;          --num := 0
</pre>
<pre>   FOR i IN 1..10 LOOP
</pre>
<pre>      tabla_numeros.EXTEND;
</pre>
<pre>      tabla_numeros(i) := i;
</pre>
<pre>   END LOOP;
</pre>
<pre>   num := tabla_numeros.COUNT; --num := 10
</pre>
<pre>   num := tabla_numeros.LIMIT; --num := 20
</pre>
<pre>   num := tabla_numeros.FIRST; --num := 1;
</pre>
<pre>   num := tabla_numeros.LAST; --num := 10;
</pre>
<pre>   ...
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>   
			<td>
			<div class="codigo elemento_centrado" style="width: 37.9em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>  TYPE numeros IS VARRAY(20) OF INTEGER;
</pre>
<pre>   v_numeros numeros := numeros( 10, 20, 30, 40 );
</pre>
<pre>    v_enteros numeros;
</pre>
<pre>BEGIN
</pre>
<pre>    v_enteros(1) := 15; --lanzaría COLECTION_IS_NULL
</pre>
<pre>    v_numeros(5) := 20; --lanzaría SUBSCRIPT_BEYOND_COUNT
</pre>
<pre>    v_numeros(-1) := 5; --lanzaría SUBSCRIPT_OUTSIDE_LIMIT
</pre>
<pre>   v_numeros(‘A’) := 25; --lanzaría VALUE_ERROR
</pre>
<pre>    ....
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>   
		</tr>
	</tbody>
</table>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id52">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id52-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-52_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion52_60" class="block question iDevice_content">
<strong>Indica, de entre las siguientes, cuál es la afirmación correcta referida a VARRAY.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i52_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-52_63">Opción 1</a></label><input type="radio" name="option52_60" id="i52_63" class="exe-radio-option exe-radio-option-0-3-52_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-52_63"><a name="answer-52_63" href="./recopila_files/saved_resource"></a>
<div id="taans52_63" class="block iDevice_content">
Un VARRAY no hace falta inicializarlo.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i52_150" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-52_150">Opción 2</a></label><input type="radio" name="option52_60" id="i52_150" class="exe-radio-option exe-radio-option-1-3-52_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-52_150"><a name="answer-52_150" href="./recopila_files/saved_resource"></a>
<div id="taans52_150" class="block iDevice_content">
COUNT y <code>LIMIT</code> siempre nos devolverán el mismo valor.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i52_153" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-52_153">Opción 3</a></label><input type="radio" name="option52_60" id="i52_153" class="exe-radio-option exe-radio-option-2-3-52_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-52_153"><a name="answer-52_153" href="./recopila_files/saved_resource"></a>
<div id="taans52_153" class="block iDevice_content">
LAST y <code>COUNT</code> siempre nos devolverán el mismo valor.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b52_60" class="feedback js-hidden"><a name="sa0b52_60" href="./recopila_files/saved_resource"></a>
<div id="taf52_63" class=" iDevice_content">
Incorrecto, sí es necesario inicializar un VARRAY para poder empezar a utilizarlo.

</div>
</div>
<div id="sa1b52_60" class="feedback js-hidden"><a name="sa1b52_60" href="./recopila_files/saved_resource"></a>
<div id="taf52_150" class=" iDevice_content">
No, esta afirmación será cierta en el caso en el que el VARRAY esté lleno totalmente.

</div>
</div>
<div id="sa2b52_60" class="feedback js-hidden"><a name="sa2b52_60" href="./recopila_files/saved_resource"></a>
<div id="taf52_153" class=" iDevice_content">
Efectivamente, estás en lo cierto.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-52_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b52_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-52_150">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b52_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-52_153">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa2b52_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.2.1.- Colecciones. Tablas anidadas.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id54">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id54-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta54_73" class="block iDevice_content">
<img alt="Tabla encabezada por el texto “Presupuesto” y con algunas filas rellenas." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R21_Presupuesto.jpg" title="Tabla." width="200"> 
<p>
Las tablas anidadas son colecciones de elementos, que no tienen límite superior fijo, y pueden aumentar dinámicamente su tamaño. Además podemos borrar elementos individuales.
</p>
<p>
Para declararlos utilizaremos la siguiente sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 33.5em">
<div class="texto_izquierda">
<pre>TYPE nombre IS TABLE OF tipo_elementos [NOT NULL];
</pre>
</div>
</div>
<p>
Donde tipo_elementos tendrá las mismas restricciones que para los VARRAY.
</p>
<p>
Al igual que pasaba con los VARRAY, al declarar una tabla anidada, ésta es automáticamente nula, por lo que deberemos inicializarla antes de usarla.
</p>
<div class="codigo elemento_centrado" style="width: 29.65em">
<div class="texto_izquierda">
<pre>TYPE hijos IS TABLE OF agente;
</pre>
<pre>hijos_fam hijos := hijos( agente(...) ...);
</pre>
</div>
</div>
<p>
También podemos usar un constructor nulo.
</p>
<p>
Para referenciar elementos usamos la misma sintaxis que para los VARRAY.
</p>
<p>
Para extender una tabla usamos EXTEND exactamente igual que para los VARRAY. <code>COUNT</code> nos dirá el número de elementos, que no tiene por qué coincidir con LAST. <code>LIMIT</code> no tiene sentido y devuelve NULL. <code>EXISTS(n)</code> devuelve TRUE si el elemento existe, y FALSE en otro caso (el elemento ha sido borrado). FIRST devuelve el primer elemento que no siempre será 1, ya que hemos podido borrar elementos del principio. LAST devuelve el último elemento. PRIOR y <code>NEXT</code> nos dicen el antecesor y sucesor del elemento (ignorando elementos borrados). TRIM sin argumentos borra un elemento del final de la tabla. TRIM(n) borra n elementos del final de la tabla. TRIM opera en el tamaño interno, por lo que si encuentra un elemento borrado con DELETE, lo incluye para ser eliminado de la colección. DELETE(n) borra el n-ésimo elemento. DELETE(n, m) borra del elemento n al m. Si después de hacer DELETE, consultamos si el elemento existe nos devolverá FALSE.
</p>
<p>
Al trabajar con tablas anidadas podemos hacer que salte alguna de las siguientes excepciones, debidas a un mal uso de las mismas: COLECTION_IS_NULL, <code>NO_DATA_FOUND</code>, SUBSCRIPT_BEYOND_COUNT y <code>VALUE_ERROR</code>.
</p>
<table class="tabla" summary="Tabla en la que se muestran dos ejemplos de uso de tablas anidadas.">
	<caption>Ejemplos de uso de las tablas anidadas.</caption>
	<thead>
		<tr>
			<th scope="col">Diferentes operaciones sobre tablas anidadas.</th>
			<th scope="col">Posibles excepciones en su uso.</th>
		</tr>
	</thead>
	 
	<tbody>
		      
		<tr>
			<td>
			<div class="codigo elemento_centrado" style="width: 29.65em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>TYPE numeros IS TABLE OF NUMBER;
</pre>
<pre>tabla_numeros numeros := numeros();
</pre>
<pre>num NUMBER;
</pre>
<pre>BEGIN
</pre>
<pre>num := tabla_numeros.COUNT;     --num := 0
</pre>
<pre>FOR i IN 1..10 LOOP
</pre>
<pre>     tabla_numeros.EXTEND;
</pre>
<pre>     tabla_numeros(i) := i;
</pre>
<pre>END LOOP;
</pre>
<pre>num := tabla_numeros.COUNT;     --num := 10
</pre>
<pre>tabla_numeros.DELETE(10);
</pre>
<pre>num := tabla_numeros.LAST;     --num := 9
</pre>
<pre>num := tabla_numeros.FIRST;     --num := 1
</pre>
<pre>tabla_numeros.DELETE(1);
</pre>
<pre>num := tabla_numeros.FIRST;     --num := 2
</pre>
<pre>FOR i IN 1..4 LOOP
</pre>
<pre>     tabla_numeros.DELETE(2*i);
</pre>
<pre>END LOOP;
</pre>
<pre>num := tabla_numeros.COUNT;     --num := 4
</pre>
<pre>num := tabla_numeros.LAST;     --num := 9
</pre>
<pre>...
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>
			<td>
			<div class="codigo elemento_centrado" style="width: 37.9em">
			<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>TYPE numeros IS TABLE OF NUMBER;
</pre>
<pre>tabla_num numeros := numeros();
</pre>
<pre>tabla1 numeros;
</pre>
<pre>BEGIN
</pre>
<pre>tabla1(5) := 0;     --lanzaría COLECTION_IS_NULL
</pre>
<pre>tabla_num.EXTEND(5);
</pre>
<pre>tabla_num.DELETE(4);
</pre>
<pre>tabla_num(4) := 3;     --lanzaría NO_DATA_FOUND
</pre>
<pre>tabla_num(6) := 10;     --lanzaría SUBSCRIPT_BEYOND_COUNT
</pre>
<pre>tabla_num(-1) := 0;     --lanzaría SUBSCRIPT_OUTSIDE_LIMIT
</pre>
<pre>tabla_num(‘y’) := 5;--lanzaría VALUE_ERROR
</pre>
<pre>END;
</pre>
			</div>
			</div>
			</td>   
		</tr>
	</tbody>
</table>
  

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id55">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id55-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-55_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion55_60" class="block question iDevice_content">
<strong>Las tablas anidadas podemos hacer que crezcan dinámicamente, pero no podemos borrar elementos.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i55_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-55_63">Opción 1</a></label><input type="radio" name="option55_60" id="i55_63" class="exe-radio-option exe-radio-option-0-2-55_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-55_63"><a name="answer-55_63" href="./recopila_files/saved_resource"></a>
<div id="taans55_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i55_157" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-55_157">Opción 2</a></label><input type="radio" name="option55_60" id="i55_157" class="exe-radio-option exe-radio-option-1-2-55_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-55_157"><a name="answer-55_157" href="./recopila_files/saved_resource"></a>
<div id="taans55_157" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b55_60" class="feedback js-hidden"><a name="sa0b55_60" href="./recopila_files/saved_resource"></a>
<div id="taf55_63" class=" iDevice_content">
No, en las tablas anidadas también podemos borrar elementos.

</div>
</div>
<div id="sa1b55_60" class="feedback js-hidden"><a name="sa1b55_60" href="./recopila_files/saved_resource"></a>
<div id="taf55_157" class=" iDevice_content">
¡Muy bien!

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-55_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b55_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-55_157">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b55_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.3.- Cursores.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id56">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id56-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta56_73" class="block iDevice_content">
En los apartados anteriores hemos visto algunos tipos de datos compuestos cuyo uso es común en otros lenguajes de programación. Sin embargo, en este apartado vamos a ver un tipo de dato, que aunque se puede asemejar a otros que ya conozcas, su uso es exclusivo en la programación de las bases de datos y que es el <strong>cursor</strong>.

</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id57">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id57-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta57_70" class="block iDevice_content">
Un cursor no es más que una estructura que almacena el conjunto de filas devuelto por una consulta a la base de datos.

</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id58">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id58-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta58_73" class="block iDevice_content">
<img alt="Vista de un auditorio con muchas filas de butacas vacías." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R22_Butacas.jpg" title="Filas." width="132">
<p>
<span lang="en">Oracle</span> usa áreas de trabajo para ejecutar sentencias SQL y almacenar la información procesada. Hay 2 clases de cursores: <strong>implícitos</strong> y <strong>explícitos</strong>. PL/SQL declara implícitamente un cursor para todas las sentencias SQL de manipulación de datos, incluyendo consultas que devuelven una sola fila. Para las consultas que devuelven más de una fila, se debe declarar explícitamente un cursor para procesar las filas individualmente.
</p>
<p>
En este primer apartado vamos a hablar de los cursores implícitos y de los atributos de un cursor (estos atributos tienen sentido con los cursores explícitos, pero los introducimos aquí para ir abriendo boca), para luego pasar a ver los cursores explícitos y terminaremos hablando de los cursores variables.
</p>
<p>
<strong>Cursores implícitos.</strong>
</p>
<p>
<span lang="en">Oracle</span> abre implícitamente un cursor para procesar cada sentencia SQL que no esté asociada con un cursor declarado explícitamente.
</p>
<p>
Con un cursor implícito no podemos usar las sentencias OPEN, <code>FETCH</code> y CLOSE para controlar el cursor. Pero sí podemos usar los atributos del cursor para obtener información sobre las sentencias SQL más recientemente ejecutadas.
</p>
<p>
<strong>Atributos de un cursor.</strong>
</p>
<p>
Cada cursor tiene 4 atributos que podemos usar para obtener información sobre la ejecución del mismo o sobre los datos. Estos atributos pueden ser usados en PL/SQL, pero no en SQL. Aunque estos atributos se refieren en general a cursores explícitos y tienen que ver con las operaciones que hayamos realizado con el cursor, es deseable comentarlas aquí y en el siguiente apartado tomarán pleno sentido.
</p>
<ul class="lista_verificacion">
	<li>%FOUND: Después de que el cursor esté abierto y antes del primer FETCH, <code>%FOUND</code> devuelve NULL. Después del primer FETCH, <code>%FOUND</code> devolverá TRUE si el último FETCH ha devuelto una fila y FALSE en caso contrario. Para cursores implícitos %FOUND devuelve TRUE si un INSERT, <code>UPDATE</code> o DELETE afectan a una o más de una fila, o un SELECT ... INTO ... devuelve una o más filas. En otro caso %FOUND devuelve FALSE.</li>
	<li>%NOTFOUND: Es lógicamente lo contrario a %FOUND.</li>
	<li>%ISOPEN: Evalúa a TRUE si el cursor está abierto y FALSE en caso contrario. Para cursores implícitos, como <span lang="en">Oracle</span> los cierra automáticamente, %ISOPEN evalúa siempre a FALSE.</li>
	<li>%ROWCOUNT: Para un cursor abierto y antes del primer FETCH, <code>%ROWCOUNT</code> evalúa a 0. Después de cada FETCH, <code>%ROWCOUNT</code> es incrementado y evalúa al número de filas que hemos procesado. Para cursores implícitos %ROWCOUNT evalúa al número de filas afectadas por un INSERT, <code>UPDATE</code> o DELETE o el número de filas devueltas por un SELECT ... INTO ...</li>
</ul>

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id59">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id59-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta59_48" class="block iDevice_content">
<p>Aunque todavía no hemos visto las operaciones que se pueden realizar con un cursor explícito, es conveniente que te vayas familiarizando con la evaluación de sus atributos según las operaciones que hayamos realizado con el cursor y que tomarán pleno sentido cuando veamos el siguiente apartado. Lo puedes ver en el <strong>Anexo III. Evaluación de los atributos de un cursor explícito.</strong></p>
<p class="enlace_centrado"></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.3.1.- Cursores explícitos.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id61">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id61-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta61_73" class="block iDevice_content">
<img alt="Chico en una biblioteca consultando un libro." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R24_Consultar.jpg" title="Consultar." width="200">
<p>
Cuando una consulta devuelve múltiples filas, podemos declarar explícitamente un cursor para procesar las filas devueltas. Cuando declaramos un cursor, lo que hacemos es darle un nombre y asociarle una consulta usando la siguiente sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 58.8em">
<div class="texto_izquierda">
<pre>CURSOR nombre_cursor [(parametro [, parametro] ...)] [RETURN tipo_devuelto] IS sentencia_select;
</pre>
</div>
</div>
<br>
<p>
Donde tipo_devuelto debe representar un registro o una fila de una tabla de la base de datos, y parámetro sigue la siguiente sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 45.05em">
<div class="texto_izquierda">
<pre>parametro := nombre_parametro [IN] tipo_dato [{:= | DEFAULT} expresion]
</pre>
</div>
</div>
<br>
<p>
Ejemplos:
</p>
<div class="codigo elemento_centrado" style="width: 47.8em">
<div class="texto_izquierda">
<pre>CURSOR cAgentes IS SELECT * FROM agentes;
</pre>
<pre>CURSOR cFamilias RETURN familias%ROWTYPE IS SELECT * FROM familias WHERE ...
</pre>
</div>
</div>
<br>
<p>
Además, como hemos visto en la declaración, un cursor puede tomar parámetros, los cuales pueden aparecer en la consulta asociada como si fuesen constantes. Los parámetros serán de entrada, un cursor no puede devolver valores en los parámetros actuales. A un parámetro de un cursor no podemos imponerle la restricción NOT NULL.
</p>
<div class="codigo elemento_centrado" style="width: 50.55em">
<div class="texto_izquierda">
<pre>CURSOR c1 (cat INTEGER DEFAULT 0) IS SELECT * FROM agentes WHERE categoria = cat;
</pre>
</div>
</div>
<br>
<p>
Cuando abrimos un cursor, lo que se hace es ejecutar la consulta asociada e identificar el conjunto resultado, que serán todas las filas que emparejen con el criterio de búsqueda de la consulta. Para abrir un cursor usamos la sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 34.05em">
<div class="texto_izquierda">
<pre>OPEN nombre_cursor [(parametro [, parametro] ...)];
</pre>
</div>
</div>
<p>
Ejemplos:
</p>
<br>
<div class="codigo elemento_centrado" style="width: 13.7em">
<div class="texto_izquierda">
<pre>OPEN cAgentes;
</pre>
<pre>OPEN c1(1);
</pre>
<pre>OPEN c1;
</pre>
</div>
</div>
<br>
<p>
La sentencia FETCH devuelve una fila del conjunto resultado. Después de cada FETCH, el cursor avanza a la próxima fila en el conjunto resultado.
</p>
<div class="codigo elemento_centrado" style="width: 34.05em">
<div class="texto_izquierda">
<pre>FETCH cFamilias INTO mi_id, mi_nom, mi_fam, mi_ofi;
</pre>
</div>
</div>
<br>
<p>
Para cada valor de columna devuelto por la consulta asociada al cursor, debe haber una variable que se corresponda en la lista de variables después del INTO.
</p>
<p>
Para procesar un cursor entero deberemos hacerlo por medio de un bucle.
</p>
<div class="codigo elemento_centrado" style="width: 36.8em">
<div class="texto_izquierda">
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>OPEN cFamilias;
</pre>
<pre>LOOP
</pre>
<pre>     FETCH cFamilias INTO mi_id, mi_nom, mi_fam, mi_ofi;
</pre>
<pre>     EXIT WHEN cFamilias%NOTFOUND;
</pre>
<pre>     ...
</pre>
<pre>END LOOP;
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>
<br>
<p>
Una vez procesado el cursor, deberemos cerrarlo, con lo que desabilitamos el cursor y el conjunto resultado queda indefinido.
</p>
<div class="codigo elemento_centrado" style="width: 14.8em">
<div class="texto_izquierda">
<pre>CLOSE cFamilias;
</pre>
</div>
</div>
<br>
<p>
Una vez cerrado el cursor podemos reabrirlo, pero cualquier otra operación que hagamos con el cursor cerrado lanzará la excepción INVALID_CURSOR.
</p>
<p>
También podemos simplificar la operación de procesamiento de un cursor, por medio de los bucles para cursores, los cuales declaran implícitamente una variable índice definida como %ROWTYPE para el cursor, abren el cursor, se van trayendo los valores de cada fila del cursor, almacenándolas en la variable índice, y finalmente cierran el cursor.
</p>
<div class="codigo elemento_centrado" style="width: 40.1em">
<div class="texto_izquierda">
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     FOR cFamilias_rec IN cFamilias LOOP
</pre>
<pre>          --Procesamos las filas accediendo a 
</pre>
<pre>          --cFamilias_rec.identificador, cFamilias_rec.nombre,
</pre>
<pre>          --cFamilias_rec.familia, ...
</pre>
<pre>     END LOOP;
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id62">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id62-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-62_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion62_60" class="block question iDevice_content">
<strong>En PL/SQL los cursores son abiertos al definirlos.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i62_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-62_63">Opción 1</a></label><input type="radio" name="option62_60" id="i62_63" class="exe-radio-option exe-radio-option-0-2-62_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-62_63"><a name="answer-62_63" href="./recopila_files/saved_resource"></a>
<div id="taans62_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i62_74" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-62_74">Opción 2</a></label><input type="radio" name="option62_60" id="i62_74" class="exe-radio-option exe-radio-option-1-2-62_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-62_74"><a name="answer-62_74" href="./recopila_files/saved_resource"></a>
<div id="taans62_74" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b62_60" class="feedback js-hidden"><a name="sa0b62_60" href="./recopila_files/saved_resource"></a>
<div id="taf62_63" class=" iDevice_content">
No, un cursor se debe abrir por medio de la sentencia OPEN.

</div>
</div>
<div id="sa1b62_60" class="feedback js-hidden"><a name="sa1b62_60" href="./recopila_files/saved_resource"></a>
<div id="taf62_74" class=" iDevice_content">
Efectivamente, debemos abrirlos por medio de la sentencia OPEN.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-62_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b62_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-62_74">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b62_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id125">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id125-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta125_44" class="block iDevice_content">
<p>En los siguientes videotutoriales puedes ver cómo se trabaja con cursores implícitos y cursores explícitos. Básicamente la diferencia está en el resultado que obtenemos de la sentencia de consulta que hagamos. Cuando la sentencia de consulta sólo recupera un registro por cada uno de los campos que ponemos en la cláusula SELECT podemos guardar esos valores únicos en variables para después trabajar con ellos. Si por el contrario, la sentencia de consulta devuelve más de un registro, necesitamos declarar un cursor explícito para ir recogiendo esos valores, registro por registro.</p>
<table cellspacing="10" cellpadding="10" border="0" align="center">
<tbody>
<tr>
<td style="text-align: center;"><strong>Utilizando un cursor implícito</strong></td>
<td style="text-align: center;"><strong>Utilizando un cursor explícito</strong></td>
</tr>
<tr>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/lCicPCpJNM8">https://www.youtube.com/embed/lCicPCpJNM8</a></span><iframe width="560" height="315" src="./recopila_files/lCicPCpJNM8.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/8Uqvw_g4tLs">https://www.youtube.com/embed/8Uqvw_g4tLs</a></span><iframe width="560" height="315" src="./recopila_files/8Uqvw_g4tLs.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">3.3.2.- Cursores variables.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id63">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id63-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta63_73" class="block iDevice_content">
<img alt="Ilustración en la que se ven tres monos en primer plano y uno de ellos está señalando con el dedo." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R25_Senalar.jpg" title="Apuntar." width="200"> 
<p>
<span lang="en">Oracle</span>, además de los cursores vistos anteriormente, nos permite definir cursores variables que son como punteros a cursores, por lo que podemos usarlos para referirnos a cualquier tipo de consulta. Los cursores serían estáticos y los cursores variables serían dinámicos.
</p>
<p>
Para declarar un cursor variable debemos seguir 2 pasos:
</p>
<ul class="lista_verificacion">
	<li style="margin-bottom: 20px">Definir un tipo REF CURSOR y entonces declarar una variable de ese tipo.
	<div class="codigo elemento_centrado" style="width: 35.7em">
	<div class="texto_izquierda">
<pre>TYPE tipo_cursor IS REF CURSOR RETURN agentes%ROWTYPE;
</pre>
<pre>cAgentes tipo_cursor;
</pre>
	</div>
	</div>
	</li>
	<li>Una vez definido el cursor variable debemos asociarlo a una consulta (notar que esto no se hace en la parte declarativa, sino dinámicamente en la parte de ejecución) y esto lo hacemos con la sentencia OPEN-FOR utilizando la siguiente sintaxis:
	<div class="codigo elemento_centrado" style="width: 37.9em">
	<div class="texto_izquierda">
<pre>OPEN nombre_variable_cursor FOR sentencia_select;
</pre>
<pre>
</pre>
<pre>OPEN cAgentes FOR SELECT * FROM agentes WHERE oficina = 1;
</pre>
	</div>
	</div>
	</li>
</ul>
<p>
Un cursor variable no puede tomar parámetros. Podemos usar los atributos de los cursores para cursores variables.
</p>
<p>
Además, podemos usar varios OPEN-FOR para abrir el mismo cursor variable para diferentes consultas. No necesitamos cerrarlo antes de reabrirlo. Cuando abrimos un cursor variable para una consulta diferente, la consulta previa se pierde.
</p>
<p>
Una vez abierto el cursor variable, su manejo es idéntico a un cursor. Usaremos FETCH para traernos las filas, usaremos sus atributos para hacer comprobaciones y lo cerraremos cuando dejemos de usarlo.
</p>
<div class="codigo elemento_centrado" style="width: 37.9em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>TYPE cursor_Agentes IS REF CURSOR RETURN agentes%ROWTYPE;
</pre>
<pre>cAgentes cursor_Agentes;
</pre>
<pre>agente cAgentes%ROWTYPE;
</pre>
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>OPEN cAgentes FOR SELECT * FROM agentes WHERE oficina = 1;
</pre>
<pre>LOOP
</pre>
<pre>     FETCH cAgentes INTO agente;
</pre>
<pre>     EXIT WHEN cAgentes%NOTFOUND;
</pre>
<pre>     ...
</pre>
<pre>END LOOP;
</pre>
<pre>CLOSE cAgentes;
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id64">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id64-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-64_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion64_60" class="block question iDevice_content">
<strong>A los cursores variables no podemos pasarles parámetros al abrirlos.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i64_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_63">Opción 1</a></label><input type="radio" name="option64_60" id="i64_63" class="exe-radio-option exe-radio-option-0-2-64_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-64_63"><a name="answer-64_63" href="./recopila_files/saved_resource"></a>
<div id="taans64_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i64_77" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_77">Opción 2</a></label><input type="radio" name="option64_60" id="i64_77" class="exe-radio-option exe-radio-option-1-2-64_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-64_77"><a name="answer-64_77" href="./recopila_files/saved_resource"></a>
<div id="taans64_77" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b64_60" class="feedback js-hidden"><a name="sa0b64_60" href="./recopila_files/saved_resource"></a>
<div id="taf64_63" class=" iDevice_content">
Correcto, veo que lo vas entendiendo.

</div>
</div>
<div id="sa1b64_60" class="feedback js-hidden"><a name="sa1b64_60" href="./recopila_files/saved_resource"></a>
<div id="taf64_77" class=" iDevice_content">
No, a este tipo de cursores no podemos pasarles parámetros al abrirlos.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_63">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b64_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_77">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b64_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-64_80" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion64_80" class="block question iDevice_content">
<strong>Los cursores variables se abren exactamente igual que los cursores explícitos.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i64_83" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_83">Opción 1</a></label><input type="radio" name="option64_80" id="i64_83" class="exe-radio-option exe-radio-option-0-2-64_80-multi">
</p>
<div class="iDevice_answer-content" id="answer-64_83"><a name="answer-64_83" href="./recopila_files/saved_resource"></a>
<div id="taans64_83" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i64_86" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_86">Opción 2</a></label><input type="radio" name="option64_80" id="i64_86" class="exe-radio-option exe-radio-option-1-2-64_80-multi">
</p>
<div class="iDevice_answer-content" id="answer-64_86"><a name="answer-64_86" href="./recopila_files/saved_resource"></a>
<div id="taans64_86" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b64_80" class="feedback js-hidden"><a name="sa0b64_80" href="./recopila_files/saved_resource"></a>
<div id="taf64_83" class=" iDevice_content">
No, al abrir un cursor variable debemos asociarle la consulta por medio de la sentencia OPEN-FOR.

</div>
</div>
<div id="sa1b64_80" class="feedback js-hidden"><a name="sa1b64_80" href="./recopila_files/saved_resource"></a>
<div id="taf64_86" class=" iDevice_content">
Correcto, ya que debemos abrirlo por medio de la sentencia OPEN-FOR con la que le asociamos la consulta.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_83">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b64_80">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-64_86">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b64_80">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.- Abstracción en PL/SQL.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id65">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id65-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta65_66" class="block iDevice_content">
<img alt="Cuadro abstracto de Joan Miró." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R26_Abstracto.jpg" title="Abstracto." width="132">
<p>
<strong>María</strong>, gracias a la ayuda de <strong>Juan</strong>, tiene bastante claro cómo programar en PL/SQL pero no entiende muy bien cómo integrar todo esto con la base de datos de juegos <span lang="en">on-line</span>. Sabe que puede utilizar unos tipos de datos, que hay unas estructuras de control y que se pueden manejar los errores que surjan, pero lo que no sabe es cómo y donde utilizar todo eso.
</p>
<p>
<strong>Juan</strong> le explica que lo que hasta ahora ha aprendido es el comienzo, pero que ahora viene lo bueno y que será donde le va a encontrar pleno sentido a lo aprendido anteriormente. Le explica que PL/SQL permite crear funciones y procedimientos y además agruparlos en paquetes y que eso será lo que realmente van a hacer con la base de datos de juegos <span lang="en">on-line</span>. Deberán ver qué es lo que utilizan más comúnmente e implementarlo en PL/SQL utilizando funciones y procedimientos según convenga. <strong>Juan</strong> la tranquiliza y le dice que lo primero que va a hacer es explicarle cómo se escriben dichas funciones y procedimientos y luego pasarán a implementar alguno y que así verá la potencia real de PL/SQL. <strong>María</strong> se queda más tranquila y está deseando implementar esa primera función o procedimiento que le resolverá la gran duda que tiene.
</p>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id66">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id66-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta66_73" class="block iDevice_content">
<p>
Hoy día cualquier lenguaje de programación permite definir diferentes grados de abstracción en sus programas. La abstracción permite a los programadores crear unidades lógicas y posteriormente utilizarlas pensando en qué hace y no en cómo lo hace. La abstracción se consigue utilizando funciones, procedimientos, librerías, objetos, etc.
</p>
<p>
PL/SQL nos permite definir funciones y procedimientos. Además nos permite agrupar todas aquellas que tengan relación en paquetes. También permite la utilización de objetos. Todo esto es lo que veremos en este apartado y conseguiremos darle modularidad a nuestras aplicaciones, aumentar la reusabilidad y mantenimiento del código y añadir grados de abstracción a los problemas.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id67">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id67-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta67_47" class="block iDevice_content">
<p>
En los siguientes enlaces puedes ampliar información sobre la abstracción en programación.
</p>
<p class="enlace_centrado">
<a href="http://es.wikipedia.org/wiki/Abstracci%C3%B3n_%28inform%C3%A1tica%29" title="Acceder a un artículo de la wikipedia que habla de la abstracción en programación." target="_self">Abstracción en los lenguajes de programación.</a>
</p>
<p class="enlace_centrado">
<a href="http://es.wikipedia.org/wiki/Programaci%C3%B3n_orientada_a_objetos" title="Acceder a un artículo de la wikipedia que habla trata la programación dirigida a objetos." target="_self">Programación dirigida a objetos.</a>
</p>

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.1.- Subprogramas.</h1></div></div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id68">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id68-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta68_70" class="block iDevice_content">
Los subprogramas son bloques nombrados a los cuales les podemos pasar parámetros y los podemos invocar. Además, los subprogramas pueden estar almacenados en la base de datos o estar encerrados en otros bloques. Si el programa está almacenado en la base de datos, podremos invocarlo si tenemos permisos suficientes y si está encerrado en otro bloque lo podremos invocar si tenemos visibilidad sobre el mismo.

</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id70">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id70-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta70_73" class="block iDevice_content">
<p>
Hay dos clases de subprogramas: las funciones y los procedimientos. Las funciones devuelven un valor y los procedimientos no.
</p>
<p>
Para declarar un subprograma utilizamos la siguiente sintaxis:
</p>
<table class="tabla" summary="Tabla en la que se muestra la sintaxis para declarar funciones y para declarar procedimientos.">
	<caption>Sintaxis para la declaración de subprogramas.</caption>
	<thead>
		<tr>
			<th scope="col">Funciones.</th>
			<th scope="col">Procedimientos.</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>
			<div class="codigo elemento_centrado" style="width: 31.85em">
			<div class="texto_izquierda">
<pre>FUNCTION nombre [(parametro [, parametro] ...)]
</pre>
<pre>RETURN tipo_dato IS
</pre>
<pre>[declaraciones_locales]
</pre>
<pre>BEGIN
</pre>
<pre>sentencias_ejecutables
</pre>
<pre>[EXCEPTION
</pre>
<pre>manejadores_de_excepciones]
</pre>
<pre>END [nombre];
</pre>
			</div>
			</div>
			</td>
			<td>
			<div class="codigo elemento_centrado" style="width: 35.15em">
			<div class="texto_izquierda">
<pre>PROCEDURE nombre [( parametro [, parametro] ... )] IS
</pre>
<pre>     [declaraciones_locales]
</pre>
<pre>BEGIN
</pre>
<pre>sentencias_ejecutables
</pre>
<pre>[EXCEPTION
</pre>
<pre>manejadores_de_excepciones]
</pre>
<pre>END [nombre];
</pre>
			</div>
			</div>
			</td>   
		</tr>
	</tbody>
</table>
<br>
<img alt="Ilustración de un ojo con la pupila verde." class="elemento_derecha" height="160" src="./recopila_files/BD06_CONT_R27_Ojo.jpg" title="Ojo." width="196"> 
<p>
Donde:
</p>
<div class="codigo elemento_centrado" style="width: 50em">
<div class="texto_izquierda">
<pre>parametro := nombre_parametro [IN|OUT|IN OUT] tipo_dato [{:=|DEFAULT} expresion]
</pre>
</div>
</div>
<p>
Algunas consideraciones que debes tener en cuenta son las siguientes:
</p>
<ul class="lista_verificacion">
	<li>No podemos imponer una restricción NOT NULL a un parámetro.</li>
	<li>No podemos especificar una restricción del tipo:
	<div class="codigo elemento_centrado" style="width: 34.6em">
	<div class="texto_izquierda">
<pre>PROCEDURE KK(a NUMBER(10)) IS ...           --ilegal
</pre>
	</div>
	</div>
	</li>
	<li>Una función siempre debe acabar con la sentencia RETURN.</li>
</ul>
<p>
Podemos definir subprogramas al final de la parte declarativa de cualquier bloque. En <span lang="en">Oracle</span>, cualquier identificador debe estar declarado antes de usarse, y eso mismo pasa con los subprogramas, por lo que deberemos declararlos antes de usarlos.
</p>
<div class="codigo elemento_centrado" style="width: 30.75em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>hijos NUMBER;
</pre>
<pre>FUNCTION hijos_familia( id_familia NUMBER ) 
</pre>
<pre>     RETURN NUMBER IS
</pre>
<pre>     hijos NUMBER;
</pre>
<pre>BEGIN
</pre>
<pre>     SELECT COUNT(*) INTO hijos FROM agentes 
</pre>
<pre>          WHERE familia = id_familia;
</pre>
<pre>     RETURN hijos;
</pre>
<pre>END hijos_familia;
</pre>
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>
<p>
Si quisiéramos definir subprogramas en orden alfabético o lógico, o necesitamos definir subprogramas mutuamente recursivos (uno llama a otro, y éste a su vez llama al anterior), deberemos usar la definición hacia delante, para evitar errores de compilación.
</p>
<div class="codigo elemento_centrado" style="width: 41.75em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     PROCEDURE calculo(...);          --declaración hacia delante
</pre>
<pre>     --Definimos subprogramas agrupados lógicamente
</pre>
<pre>     PROCEDURE inicio(...) IS
</pre>
<pre>     BEGIN
</pre>
<pre>          ...
</pre>
<pre>          calculo(...);
</pre>
<pre>          ...
</pre>
<pre>     END;
</pre>
<pre>     ...
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id71">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id71-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-71_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion71_60" class="block question iDevice_content">
<strong>Una función siempre debe devolver un valor.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i71_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_63">Opción 1</a></label><input type="radio" name="option71_60" id="i71_63" class="exe-radio-option exe-radio-option-0-2-71_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-71_63"><a name="answer-71_63" href="./recopila_files/saved_resource"></a>
<div id="taans71_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i71_92" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_92">Opción 2</a></label><input type="radio" name="option71_60" id="i71_92" class="exe-radio-option exe-radio-option-1-2-71_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-71_92"><a name="answer-71_92" href="./recopila_files/saved_resource"></a>
<div id="taans71_92" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b71_60" class="feedback js-hidden"><a name="sa0b71_60" href="./recopila_files/saved_resource"></a>
<div id="taf71_63" class=" iDevice_content">
Efectivamente, una función obligatoriamente debe devolver un valor.

</div>
</div>
<div id="sa1b71_60" class="feedback js-hidden"><a name="sa1b71_60" href="./recopila_files/saved_resource"></a>
<div id="taf71_92" class=" iDevice_content">
Incorrecto, creo que debería repasar este apartado.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_63">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b71_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_92">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b71_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-71_95" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion71_95" class="block question iDevice_content">
<strong>En PL/SQL no podemos definir subprogramas mutuamente recursivos.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i71_98" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_98">Opción 1</a></label><input type="radio" name="option71_95" id="i71_98" class="exe-radio-option exe-radio-option-0-2-71_95-multi">
</p>
<div class="iDevice_answer-content" id="answer-71_98"><a name="answer-71_98" href="./recopila_files/saved_resource"></a>
<div id="taans71_98" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i71_101" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_101">Opción 2</a></label><input type="radio" name="option71_95" id="i71_101" class="exe-radio-option exe-radio-option-1-2-71_95-multi">
</p>
<div class="iDevice_answer-content" id="answer-71_101"><a name="answer-71_101" href="./recopila_files/saved_resource"></a>
<div id="taans71_101" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b71_95" class="feedback js-hidden"><a name="sa0b71_95" href="./recopila_files/saved_resource"></a>
<div id="taf71_98" class=" iDevice_content">
Incorrecto ya que podemos hacerlo usando la definición hacia delante.

</div>
</div>
<div id="sa1b71_95" class="feedback js-hidden"><a name="sa1b71_95" href="./recopila_files/saved_resource"></a>
<div id="taf71_101" class=" iDevice_content">
¡Muy bien!

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_98">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b71_95">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-71_101">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b71_95">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.1.1.- Almacenar subprogramas en la base de datos.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id72">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id72-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta72_73" class="block iDevice_content">
<img alt="Ilustración de una caja con forma de cubo y adornada cada cara con diferentes figuras y colores." class="elemento_derecha" height="160" src="./recopila_files/BD06_CONT_R27_Caja.jpg" title="Caja." width="168">
<p>
Para almacenar un subprograma en la base de datos utilizaremos la misma sintaxis que para declararlo, anteponiendo CREATE [OR REPLACE] a <code>PROCEDURE</code> o FUNCTION, y finalizando el subprograma con una línea que simplemente contendrá el carácter '/' para indicarle a <span lang="en">Oracle</span> que termina ahí. Si especificamos OR REPLACE y el subprograma ya existía, éste será reemplazado. Si no lo especificamos y el subprograma ya existe, <span lang="en">Oracle</span> nos devolverá un error indicando que el nombre ya está siendo utilizado por otro objeto de la base de datos.
</p>
<div class="codigo elemento_centrado" style="width: 39em">
<div class="texto_izquierda">
<pre>CREATE OR REPLACE FUNCTION hijos_familia(id_familia NUMBER) 
</pre>
<pre>RETURN NUMBER IS
</pre>
<pre>hijos NUMBER;
</pre>
<pre>BEGIN
</pre>
<pre>SELECT COUNT(*) INTO hijos FROM agentes
</pre>
<pre>WHERE familia = id_familia;
</pre>
<pre>RETURN hijos;
</pre>
<pre>END;
</pre>
<pre>/
</pre>
</div>
</div>
<br>
<p>
Cuando los subprogramas son almacenados en la base de datos, para ellos no podemos utilizar las declaraciones hacia delante, por lo que cualquier subprograma almacenado en la base de datos deberá conocer todos los subprogramas que utilice.
</p>
<p>
Para invocar un subprograma usaremos la sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 38.45em">
<div class="texto_izquierda">
<pre>nombre_procedimiento [(parametro [,parametro] ...)];
</pre>
<pre>variable := nombre_funcion [(parametro [, parametro] ...)];
</pre>
<pre>
</pre>
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>hijos := hijos_familia(10);
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>
<br>
<p>
Si el subprograma está almacenado en la base de datos y queremos invocarlo desde <span lang="en">SQL*Plus</span> usaremos la sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 36.25em">
<div class="texto_izquierda">
<pre>EXECUTE nombre_procedimiento [(parametros)];
</pre>
<pre>EXECUTE :variable_sql := nombre_funcion [(parametros)];
</pre>
</div>
</div>
<br>
<p>
Cuando almacenamos un subprograma en la base de datos éste es compilado antes. Si hay algún error se nos informará de los mismos y deberemos corregirlos por medio de la cláusula OR REPLACE, antes de que el subprograma pueda ser utilizado.
</p>
<p>
Hay varias vistas del diccionario de datos que nos ayudan a llevar un control de los subprogramas, tanto para ver su código, como los errores de compilación. También hay algunos comandos de <span lang="en">SQL*Plus</span> que nos ayudan a hacer lo mismo pero de forma algo menos engorrosa.
</p>
<table class="tabla" summary="Tabla en la que se muestran las vistas del diccionario de datos y los comandos SQL*Plus relacionadas con los subprogramas.">
	<caption>Vistas y comandos asociados a los subprogramas.</caption>
	<thead>
		<tr>
			<th scope="col">Información almacenada.</th>
			<th scope="col">Vista del diccionario.</th>
			<th scope="col">Comando.</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Código fuente.</td>
			<td>USER_SOURCE</td>   
			<td>DESCRIBE
			</td>   
		</tr>
		<tr>
			<td>Errores de compilación.</td>
			<td>USER_ERRORS</td>   
			<td>SHOW ERRORS
			</td>   
		</tr>
		<tr>
			<td>Ocupación de memoria.</td>
			<td>USER_OBJECT_SIZE</td>   
			<td>&nbsp;</td>   
		</tr>
	</tbody>
</table>
<br>
<p>
También existe la vista USER_OBJECTS de la cual podemos obtener los nombres de todos los subprogramas almacenados.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id74">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id74-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-74_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion74_60" class="block question iDevice_content">
<strong>Una vez que hemos almacenado un subprograma en la base de datos podemos consultar su código mediante la vista USER_OBJECTS.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i74_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-74_63">Opción 1</a></label><input type="radio" name="option74_60" id="i74_63" class="exe-radio-option exe-radio-option-0-2-74_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-74_63"><a name="answer-74_63" href="./recopila_files/saved_resource"></a>
<div id="taans74_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i74_108" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-74_108">Opción 2</a></label><input type="radio" name="option74_60" id="i74_108" class="exe-radio-option exe-radio-option-1-2-74_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-74_108"><a name="answer-74_108" href="./recopila_files/saved_resource"></a>
<div id="taans74_108" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b74_60" class="feedback js-hidden"><a name="sa0b74_60" href="./recopila_files/saved_resource"></a>
<div id="taf74_63" class=" iDevice_content">
No, podemos hacerlo mediante la vista USER_SOURCE.

</div>
</div>
<div id="sa1b74_60" class="feedback js-hidden"><a name="sa1b74_60" href="./recopila_files/saved_resource"></a>
<div id="taf74_108" class=" iDevice_content">
Sí, lo estás captando a la primera.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-74_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b74_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-74_108">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b74_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id122">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id122-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta122_69" class="block iDevice_content">
<p>Vamos a ver algún ejemplo de procedimiento y función en PL/SQL. En estos vídeotutoriales se puede ver el proceso de creación de un procedimiento almacenado y de una función. Recuerda que la principal diferencia es que las funciones devuelven un valor y los procedimientos no.</p>
<table style="margin-left: auto; margin-right: auto;" cellspacing="20" border="0">
<tbody>
<tr>
<td style="text-align: center;"><strong>Ejemplo de Procedimiento Almacenado en PL/SQL</strong></td>
<td style="text-align: center;"><strong>Ejemplo de Función en PL/SQL</strong></td>
</tr>
<tr>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/eHrER2Gk_0w">https://www.youtube.com/embed/eHrER2Gk_0w</a></span><iframe width="560" height="315" src="./recopila_files/eHrER2Gk_0w.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/FTWkZ4vXbic">https://www.youtube.com/embed/FTWkZ4vXbic</a></span><iframe width="560" height="315" src="./recopila_files/FTWkZ4vXbic.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id129">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id129-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta129_43" class="block iDevice_content">
<p>En la siguiente presentación te mostramos las vistas relacionadas con los subprogramas, la compilación de un subprograma con errores y cómo mostrar los mismos, la compilación de un subprograma correctamente y cómo mostrar su código fuente y la ejecución de un subprograma desde <span lang="en">SQL*Plus</span>.</p>
<p style="text-align: center;"><a href="http://localhost:51235/ContenidosUT6/resources/Subprogramas.pdf" title="Subpragrama en PL/SQL" target="_blank" class="pdf">Subprograma en PL/SQL</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.1.2.- Parámetros de los subprogramas.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id75">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id75-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta75_73" class="block iDevice_content">
Ahora vamos a profundizar un poco más en los parámetros que aceptan los subprogramas y cómo se los podemos pasar  a  la hora de invocarlos.

</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id76">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id76-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta76_70" class="block iDevice_content">
Las variables pasadas como parámetros a un subprograma son llamadas <strong>parámetros actuales</strong>. Las variables referenciadas en la especificación del subprograma como parámetros, son llamadas <strong>parámetros formales</strong>.

</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id77">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id77-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta77_73" class="block iDevice_content">
<img alt="Ilustración en la que una señora llama a una pequeña." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R30_Llamando.jpg" title="Llamada." width="200">
<p>
Cuando llamamos a un subprograma, los parámetros actuales podemos escribirlos utilizando notación posicional o notación nombrada, es decir, la asociación entre parámetros actuales y formales podemos hacerla por posición o por nombre.
</p>
<p>
En la notación posicional, el primer parámetro actual se asocia con el primer parámetro formal, el segundo con el segundo, y así para el resto. En la notación nombrada usamos el operador &lt;span title="Igual y mayor."&gt;=&gt;&lt;/span&gt; para asociar el parámetro actual al parámetro formal. También podemos usar notación mixta.
</p>
<p>
Los parámetros pueden ser de <strong>entrada</strong> al subprograma, de <strong>salida</strong>, o de <strong>entrada/salida</strong>. Por defecto si a un parámetro no le especificamos el modo, éste será de entrada. Si el parámetro es de salida o de entrada/salida, el parámetro actual debe ser una variable.
</p>
<p>
Un parámetro de entrada permite que pasemos valores al subprograma y no puede ser modificado en el cuerpo del subprograma. El parámetro actual pasado a un subprograma como parámetro formal de entrada puede ser una constante o una variable.
</p>
<p>
Un parámetro de salida permite devolver valores y dentro del subprograma actúa como variable no inicializada. El parámetro formal debe ser siempre una variable.
</p>
<p>
Un parámetro de entrada-salida se utiliza para pasar valores al subprograma y/o para recibirlos, por lo que un parámetro formal que actúe como parámetro actual de entrada-salida siempre deberá ser una variable.
</p>
<p>
Los parámetros de entrada los podemos inicializar a un valor por defecto. Si un subprograma tiene un parámetro inicializado con un valor por defecto, podemos invocarlo prescindiendo del parámetro y aceptando el valor por defecto o pasando el parámetro y sobreescribiendo el valor por defecto. Si queremos prescindir de un parámetro colocado entre medias de otros, deberemos usar notación nombrada o si los parámetros restantes también tienen valor por defecto, omitirlos todos.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id78">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id78-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta78_48" class="block iDevice_content">
<p>Puedes encontrar ejemplos sobre el paso de parámetros a nuestros subprogramas en el <strong>Anexo IV. Paso de parámetros a subprogramas.</strong></p>
<p class="enlace_centrado"></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper SeleccionmultiplefpdIdevice em_iDevice" id="id80">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id80-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<div id="actitity-80_55">
<form name="multi-select-form-80_55" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" class="activity-form multi-select-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion80_55" class="block question iDevice_content">
<strong>Indica de entre las siguientes afirmaciones las que creas que son correctas.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op80_550" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-80_58">Opción 1</a></label><input type="checkbox" id="op80_550" value="True">
</p>
<div class="iDevice_answer-content" id="answer-80_58"><a name="answer-80_58" href="./recopila_files/saved_resource"></a>
<div id="taans80_58" class="block iDevice_content">
En PL/SQL podemos usar la notación posicional para pasar parámetros.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-80_550" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op80_551" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-80_112">Opción 2</a></label><input type="checkbox" id="op80_551" value="False">
</p>
<div class="iDevice_answer-content" id="answer-80_112"><a name="answer-80_112" href="./recopila_files/saved_resource"></a>
<div id="taans80_112" class="block iDevice_content">
No existen los parámetros de salida ya que para eso existen las funciones.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-80_551" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op80_552" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-80_114">Opción 3</a></label><input type="checkbox" id="op80_552" value="True">
</p>
<div class="iDevice_answer-content" id="answer-80_114"><a name="answer-80_114" href="./recopila_files/saved_resource"></a>
<div id="taans80_114" class="block iDevice_content">
Los parámetros de entrada los podemos inicializar a un valor por defecto.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-80_552" style="display:none"></div>
</div>
</div>
<div class="block iDevice_buttons feedback-button js-required">
<p>
<input type="button" name="submitSelect" class="feedbackbutton multi-select-feedback-toggler" value="Mostrar retroalimentación" id="multi-select-feedback-toggler-3-80_55"> 
</p>
</div>
<div id="f80_55" class="js-hidden js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>

<div id="tafeedback80_55" class="feedback iDevice_content">
En PL/SQL podemos usar la notación posicional para pasar parámetros, los parámetros de entrada podemos inicializarlos a un valor por defecto y también podemos utilizar los parámetros de salida.

</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-80_58" class="right">Correcto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-80_112" class="wrong">Incorrecto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-80_114" class="right">Correcto</a></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.1.3.- Sobrecarga de subprogramas y recursividad.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id81">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id81-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta81_73" class="block iDevice_content">
<img alt="Vehículo con muchas maletas sobre el techo." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R32_Sobrecarga.jpg" title="Sobrecarga." width="132">
<p>
PL/SQL también nos ofrece la posibilidad de sobrecargar funciones o procedimientos, es decir, llamar con el mismo nombre subprogramas que realizan el mismo cometido y que aceptan distinto número y/o tipo de parámetros. No podemos sobrecargar subprogramas que aceptan el mismo número y tipo de parámetros y sólo difieren en el modo. Tampoco podemos sobrecargar subprogramas con el mismo número de parámetros y que los tipos de los parámetros sean diferentes, pero de la misma familia, o sean subtipos basados en la misma familia.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id82">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id82-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta82_48" class="block iDevice_content">
<p>Puedes ver un ejemplo de una función que es sobrecarga tres veces dependiendo del tipo de parámetros que acepta en el<strong> Anexo V. Sobrecarga de subprogramas.</strong></p>
<p class="enlace_centrado"></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id84">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id84-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta84_73" class="block iDevice_content">
PL/SQL también nos ofrece la posibilidad de utilizar la recursión en nuestros subprogramas. Un subprograma es recursivo si éste se invoca a él mismo.

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id85">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id85-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta85_48" class="block iDevice_content">
<p>En el siguiente enlace podrás ampliar información sobre la recursividad.</p>
<p class="enlace_centrado"><a href="http://es.wikipedia.org/wiki/Recursi%C3%B3n" title="Acceder a un artículo de la wikipedia que trata sobre recursividad." target="_blank"><span title="Acceder a un artículo de la wikipedia que trata sobre recursividad." class="html">Recursividad</span></a></p>
<p>Por otra parte puedes ver un ejemplo del uso de la recursividad en nuestros subprogramas en el <strong>Anexo VI. Ejemplo de Recursividad.</strong></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id87">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id87-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-87_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion87_60" class="block question iDevice_content">
<strong>En PL/SQL no podemos sobrecargar subprogramas que aceptan el mismo número y tipo de parámetros, pero sólo difieren en el modo.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i87_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_63">Opción 1</a></label><input type="radio" name="option87_60" id="i87_63" class="exe-radio-option exe-radio-option-0-2-87_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-87_63"><a name="answer-87_63" href="./recopila_files/saved_resource"></a>
<div id="taans87_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i87_117" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_117">Opción 2</a></label><input type="radio" name="option87_60" id="i87_117" class="exe-radio-option exe-radio-option-1-2-87_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-87_117"><a name="answer-87_117" href="./recopila_files/saved_resource"></a>
<div id="taans87_117" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b87_60" class="feedback js-hidden"><a name="sa0b87_60" href="./recopila_files/saved_resource"></a>
<div id="taf87_63" class=" iDevice_content">
Correcto, veo que lo has entendido.

</div>
</div>
<div id="sa1b87_60" class="feedback js-hidden"><a name="sa1b87_60" href="./recopila_files/saved_resource"></a>
<div id="taf87_117" class=" iDevice_content">
No, no podemos hacerlo.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_63">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b87_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_117">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b87_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-87_120" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion87_120" class="block question iDevice_content">
<strong>En PL/SQL no podemos utilizar la recursión y tenemos que imitarla mediante la iteración.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i87_123" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_123">Opción 1</a></label><input type="radio" name="option87_120" id="i87_123" class="exe-radio-option exe-radio-option-0-2-87_120-multi">
</p>
<div class="iDevice_answer-content" id="answer-87_123"><a name="answer-87_123" href="./recopila_files/saved_resource"></a>
<div id="taans87_123" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i87_126" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_126">Opción 2</a></label><input type="radio" name="option87_120" id="i87_126" class="exe-radio-option exe-radio-option-1-2-87_120-multi">
</p>
<div class="iDevice_answer-content" id="answer-87_126"><a name="answer-87_126" href="./recopila_files/saved_resource"></a>
<div id="taans87_126" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b87_120" class="feedback js-hidden"><a name="sa0b87_120" href="./recopila_files/saved_resource"></a>
<div id="taf87_123" class=" iDevice_content">
Incorrecto, creo que deberías mirar otra vez el segundo enlace del segundo "Debes conocer".

</div>
</div>
<div id="sa1b87_120" class="feedback js-hidden"><a name="sa1b87_120" href="./recopila_files/saved_resource"></a>
<div id="taf87_126" class=" iDevice_content">
¡Muy bien!

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_123">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b87_120">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-87_126">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b87_120">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.2.- Paquetes.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id88">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id88-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta88_73" class="block iDevice_content">
<img alt="Paquete envuelto en papel de regalo rojo y con una cinta rosa." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R32_Paquete.jpg" title="Paquete." width="200">
<p>
Un paquete es un objeto que agrupa tipos, elementos y subprogramas. Suelen tener dos partes: la especificación y el cuerpo, aunque algunas veces el cuerpo no es necesario.
</p>
<p>
En la parte de especificación declararemos la interfaz del paquete con nuestra aplicación y en el cuerpo es donde implementaremos esa interfaz.
</p>
<p>
Para crear un paquete usaremos la siguiente sintaxis:
</p>
<div class="codigo elemento_centrado" style="width: 45.6em">
<div class="texto_izquierda">
<pre>CREATE [OR REPLACE] PACKAGE nombre AS
</pre>
<pre>     [declaraciones públicas y especificación de subprogramas]
</pre>
<pre>END [nombre];
</pre>
<pre>
</pre>
<pre>CREATE [OR REPLACE] PACKAGE BODY nombre AS
</pre>
<pre>     [declaraciones privadas y cuerpo de los subprogramas especificados]
</pre>
<pre>[BEGIN
</pre>
<pre>     sentencias de inicialización]
</pre>
<pre>END [nombre];
</pre>
</div>
</div>
<br>
<p>
La parte de inicialización sólo se ejecuta una vez, la primera vez que el paquete es referenciado.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id89">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id89-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta89_48" class="block iDevice_content">
<p>Te mostramos un ejemplo de un paquete que agrupa las principales tareas que realizamos con nuestra base de datos de ejemplo en el <strong>Anexo VII. Ejemplo de paquete.</strong></p>
<p class="enlace_centrado"></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id91">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id91-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta91_73" class="block iDevice_content">
<p>
Para referenciar las partes visibles de un paquete, lo haremos por medio de la notación del punto.
</p>
<div class="codigo elemento_centrado" style="width: 25.8em">
<div class="texto_izquierda">
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     call_center.borra_agente( 10 );
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>
&nbsp;

</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id92">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id92-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta92_47" class="block iDevice_content">
<p>
<span lang="en">Oracle</span> nos suministra varios paquetes para simplificarnos algunas tareas. En el siguiente enlace puedes encontrar más información sobre los mismos.
</p>
<p class="enlace_centrado">
<a href="http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/toc.htm" title="Acceder a la documentación de Oracle donde puedes ampliar información sobre los paquetes que suministra." target="_self">Paquetes suministrados por <span lang="en">Oracle</span>.</a>
</p>

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.2.1.- Ejemplos de utilización del paquete DBMS_OUTPUT.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id93">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id93-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta93_73" class="block iDevice_content">
<img alt="Dibujo tipo comic de una impresora con ojos." class="elemento_derecha" height="160" src="./recopila_files/BD06_CONT_R37_Impresora.jpg" title="Impresora." width="172">
<p>
<span lang="en">Oracle</span> nos suministra un paquete público con el cual podemos enviar mensajes desde subprogramas almacenados, paquetes y disparadores, colocarlos en un <span lang="en">buffer</span> y leerlos desde otros subprogramas almacenados, paquetes o disparadores.
</p>
<p>
<span lang="en">SQL*Plus</span> permite visualizar los mensajes que hay en el <span lang="en">buffer</span>, por medio del comando SET SERVEROUTPUT ON. La utilización fundamental de este paquete es para la depuración de nuestros subprogramas.
</p>
<p>
Veamos uno a uno los subprogramas que nos suministra este paquete:
</p>
<ul class="lista_verificacion">
	<li style="margin-bottom: 20px">
	Habilita las llamadas a los demás subprogramas. No es necesario cuando está activada la opción SERVEROUTPUT. Podemos pasarle un parámetro indicando el tamaño del <span lang="en">buffer</span>.
	<div class="codigo elemento_centrado" style="width: 30.75em">
	<div class="texto_izquierda">
<pre>ENABLE
</pre>
<pre>ENABLE( buffer_size IN INTEGER DEFAULT 2000);
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Deshabilita las llamadas a los demás subprogramas y purga el <span lang="en">buffer</span>. Como con ENABLE no es necesario si estamos usando la opción SERVEROUTPUT.
	<div class="codigo elemento_centrado" style="width: 11.5em">
	<div class="texto_izquierda">
<pre>DISABLE
</pre>
<pre>DISABLE();
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Coloca elementos en el <span lang="en">buffer</span>, los cuales son convertidos a VARCHAR2.
	<div class="codigo elemento_centrado" style="width: 18.1em">
	<div class="texto_izquierda">
<pre>PUT
</pre>
<pre>PUT(item IN NUMBER);
</pre>
<pre>PUT(item IN VARCHAR2);
</pre>
<pre>PUT(item IN DATE);
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Coloca elementos en el <span lang="en">buffer</span> y los termina con un salto de línea.
	<div class="codigo elemento_centrado" style="width: 20.85em">
	<div class="texto_izquierda">
<pre>PUT_LINE
</pre>
<pre>PUT_LINE(item IN NUMBER);
</pre>
<pre>PUT_LINE(item IN VARCHAR2);
</pre>
<pre>PUT_LINE(item IN DATE);
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Coloca un salto de línea en el <span lang="en">buffer</span>. Utilizado cuando componemos una línea usando varios PUT.
	<div class="codigo elemento_centrado" style="width: 12.05em">
	<div class="texto_izquierda">
<pre>NEW_LINE
</pre>
<pre>NEW_LINE();
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Lee una línea del <span lang="en">buffer</span> colocándola en el parámetro line y obviando el salto de línea. El parámetro status devolverá 0 si nos hemos traído alguna línea y 1 en caso contrario.
	<div class="codigo elemento_centrado" style="width: 32.95em">
	<div class="texto_izquierda">
<pre>GET_LINE
</pre>
<pre>GET_LINE(line OUT VARCHAR2, status OUT VARCHAR2);
</pre>
	</div>
	</div>
	</li>
	<li>Intenta leer el número de líneas indicado en numlines. Una vez ejecutado, numlines contendrá el número de líneas que se ha traído. Las líneas traídas las coloca en el parámetro lines del tipo CHARARR, tipo definido el paquete DBMS_OUTPUT como una tabla de VARCHAR2(255).
	<div class="codigo elemento_centrado" style="width: 35.7em">
	<div class="texto_izquierda">
<pre>GET_LINES
</pre>
<pre>GET_LINES(lines OUT CHARARR, numlines IN OUT INTEGER);
</pre>
	</div>
	</div>
	</li>
</ul>

</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id94">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id94-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta94_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b94" class="block iDevice_content">
Debes crear un procedimiento que visualice todos los agentes, su nombre, nombre de la familia y/o nombre de la oficina a la que pertenece.

</div>
<form name="feedback-form-quesFeedback0b94" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b94text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b94" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b94" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<div class="codigo elemento_centrado" style="width: 64.3em">
<div class="texto_izquierda">
<pre>CREATE OR  REPLACE PROCEDURE lista_agentes IS
</pre>
<pre>     CURSOR cAgentes IS SELECT identificador, nombre,familia, oficina FROM agentes;
</pre>
<pre>     fam familias.nombre%TYPE;
</pre>
<pre>     ofi oficinas.nombre%TYPE;
</pre>
<pre>     num_ag INTEGER := 0;
</pre>
<pre>BEGIN
</pre>
<pre>     DBMS_OUTPUT.ENABLE( 1000000 );
</pre>
<pre>     DBMS_OUTPUT.PUT_LINE('Agente              |Familia             |Oficina             ');
</pre>
<pre>     DBMS_OUTPUT.PUT_LINE('---------------------------------------------------------------');
</pre>
<pre>     FOR ag_rec IN cAgentes LOOP
</pre>
<pre>          IF (ag_rec.familia IS NOT NULL) THEN
</pre>
<pre>               SELECT nombre INTO fam FROM familias WHERE identificador = ag_rec.familia;
</pre>
<pre>               ofi := NULL;
</pre>
<pre>               DBMS_OUTPUT.PUT_LINE(rpad(ag_rec.nombre,20) || '|' || rpad(fam,20) || '|' || rpad(ofi,20));
</pre>
<pre>               num_ag := num_ag + 1;
</pre>
<pre>          ELSIF (ag_rec.oficina IS NOT NULL) THEN
</pre>
<pre>               SELECT nombre INTO ofi FROM oficinas WHERE identificador = ag_rec.oficina;
</pre>
<pre>               fam := NULL;
</pre>
<pre>               DBMS_OUTPUT.PUT_LINE(rpad(ag_rec.nombre,20) || '|' || rpad(fam,20) || '|' || rpad(ofi,20));
</pre>
<pre>               num_ag := num_ag + 1;
</pre>
<pre>          END IF;
</pre>
<pre>     END LOOP;
</pre>
<pre>DBMS_OUTPUT.PUT_LINE('---------------------------------------------------------------');
</pre>
<pre>     DBMS_OUTPUT.PUT_LINE('Número de agentes: ' || num_ag);
</pre>
<pre>END lista_agentes;
</pre>
<pre>/
</pre>
</div>
</div>
<br>
<p>
Recuerda que para ejecutarlo desde <span lang="en">SQL*Plus</span> debes ejecutar las siguientes sentencias:
</p>
<div class="codigo elemento_centrado" style="width: 19.2em">
<div class="texto_izquierda">
<pre>SQL&gt;SET SERVEROUTPUT ON;
</pre>
<pre>SQL&gt;EXEC lista_agentes;
</pre>
</div>
</div>
&nbsp;
</div>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.3.- Objetos.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id95">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id95-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta95_73" class="block iDevice_content">
<p><img alt="Diferentes objetos de cerámica." class="elemento_derecha" src="./recopila_files/BD06_CONT_R38_Objetos.jpg" title="Objetos." height="132" width="200"></p>
<p>Hoy día, la programación orientada a objetos es uno de los <a class="glosario" href="./recopila_files/saved_resource">paradigmas<span><em>Paradigma</em>Un paradigma de programación es una propuesta tecnológica que es adoptada por una comunidad de programadores cuyo núcleo central es incuestionable en cuanto a que unívocamente trata de resolver uno o varios problemas claramente delimitados. La resolución de estos problemas debe suponer consecuentemente un avance significativo en al menos un parámetro que afecte a la ingeniería de software. Probablemente, el paradigma de programación que actualmente es el más usado a todos los niveles es la orientación a objeto. El núcleo central de este paradigma es la unión de datos y procesamiento en una entidad llamada "objeto", relacionable a su vez con otras entidades "objeto".</span></a> más utilizados y casi todos los lenguajes de programación la soportan. En este apartado vamos a dar unas pequeñas pinceladas de su uso en PL/SQL que serán ampliados en la siguiente unidad de trabajo.</p>
<p>Un tipo de objeto es un tipo de dato compuesto, que encapsula unos datos y las funciones y procedimientos necesarios para manipular esos datos. Las variables son los atributos y los subprogramas son llamados métodos. Podemos pensar en un tipo de objeto como en una entidad que posee unos atributos y un comportamiento (que viene dado por los métodos).</p>
<ul class="lista_verificacion">
<li>Cuando creamos un tipo de objeto, lo que estamos creando es una entidad abstracta que especifica los atributos que tendrán los objetos de ese tipo y define su comportamiento.</li>
<li>Cuando instanciamos un objeto estamos particularizando la entidad abstracta a una en particular, con los atributos que tiene el tipo de objeto, pero con un valor dado y con el mismo comportamiento.</li>
</ul>
<p>Los tipos de objetos tiene 2 partes: una <strong>especificación</strong> y un <strong>cuerpo</strong>. La parte de especificación declara los atributos y los métodos que harán de interfaz de nuestro tipo de objeto. En el cuerpo se implementa la parte de especificación. En la parte de especificación debemos declarar primero los atributos y después los métodos. Todos los atributos son públicos (visibles). No podemos declarar atributos en el cuerpo, pero sí podemos declarar subprogramas locales que serán visibles en el cuerpo del objeto y que nos ayudarán a implementar nuestros métodos.</p>
<p>Los atributos pueden ser de cualquier tipo de datos <span lang="en">Oracle</span>, excepto:</p>
<ul class="lista_verificacion">
<li>LONG y <code>LONG RAW</code>.</li>
<li>NCHAR, <code>NCLOB</code> y NVARCHAR2.</li>
<li>MLSLABEL y <code>ROWID</code>.</li>
<li>Tipos específicos de PL/SQL: BINARY_INTEGER, <code>BOOLEAN</code>, PLS_INTEGER, <code>RECORD</code>, REF CURSOR, <code>%TYPE</code> y %ROWTYPE.</li>
<li>Tipos definidos dentro de un paquete PL/SQL.</li>
</ul>
<p>No podemos inicializar un atributo en la declaración. Tampoco podemos imponerle la restricción NOT NULL.</p>
<p>Un <strong>método</strong> es un subprograma declarado en la parte de especificación de un tipo de objeto por medio de: MEMBER. Un método no puede llamarse igual que el tipo de objeto o que cualquier atributo. Para cada método en la parte de especificación, debe haber un método implementado en el cuerpo con la misma cabecera.</p>
<p>Todos los métodos en un tipo de objeto aceptan como primer parámetro una instancia de su tipo. Este parámetro es SELF y siempre está accesible a un método. Si lo declaramos explícitamente debe ser el primer parámetro, con el nombre SELF y del tipo del tipo de objeto. Si SELF no está declarado explícitamente, por defecto será IN para las funciones e IN OUT para los procedimientos.</p>
<p>Los métodos dentro de un tipo de objeto pueden sobrecargarse. No podemos sobrecargarlos si los parámetros formales sólo difieren en el modo o pertenecen a la misma familia. Tampoco podremos sobrecargar una función miembro si sólo difiere en el tipo devuelto.</p>
<p>Una vez que tenemos creado el objeto, podemos usarlo en cualquier declaración. Un objeto cuando se declara sigue las mismas reglas de alcance y visibilidad que cualquier otra variable.</p>
<p>Cuando un objeto se declara éste es automáticamente NULL. Dejará de ser nulo cuando lo inicialicemos por medio de su constructor o cuando le asignemos otro. Si intentamos acceder a los atributos de un objeto NULL saltará la excepción ACCES_INTO_NULL.</p>
<p>Todos los objetos tienen constructores por defecto con el mismo nombre que el tipo de objeto y acepta tantos parámetros como atributos del tipo de objeto y con el mismo tipo. PL/SQL no llama implícitamente a los constructores, deberemos hacerlo nosotros explícitamente.</p>
<div class="codigo elemento_centrado" style="width: 32.95em;">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     familia1 Familia;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     familia1 := Familia( 10, ‘Fam10’, 1, NULL );
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>
<p> </p>
<p>Un tipo de objeto puede tener a otro tipo de objeto entre sus atributos. El tipo de objeto que hace de atributo debe ser conocido por <span lang="en">Oracle</span>. Si 2 tipos de objetos son mutuamente dependientes, podemos usar una declaración hacia delante para evitar errores de compilación.</p>
</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id96">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id96-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta96_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b96" class="block iDevice_content">
Cómo declararías los objetos para nuestra base de datos de ejemplo.

</div>
<form name="feedback-form-quesFeedback0b96" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b96text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b96" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b96" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<div class="codigo elemento_centrado" style="width: 35.15em">
<div class="texto_izquierda">
<pre>CREATE OBJECT Oficina;     --Definición hacia delante
</pre>
<pre>
</pre>
<pre>CREATE OBJECT Familia AS OBJECT (
</pre>
<pre>     identificador     NUMBER,
</pre>
<pre>     nombre          VARCHAR2(20),
</pre>
<pre>     familia_     Familia,
</pre>
<pre>     oficina_     Oficina,
</pre>
<pre>     ...
</pre>
<pre>);
</pre>
<pre>
</pre>
<pre>CREATE OBJECT Agente AS OBJECT (
</pre>
<pre>     identificador     NUMBER,
</pre>
<pre>     nombre          VARCHAR2(20),
</pre>
<pre>     familia_     Familia,
</pre>
<pre>     oficina_     Oficina,
</pre>
<pre>     ...
</pre>
<pre>);
</pre>
<pre>
</pre>
<pre>CREATE OBJECT Oficina AS OBJECT (
</pre>
<pre>     identificador     NUMBER,
</pre>
<pre>     nombre          VARCHAR2(20),
</pre>
<pre>     jefe          Agente,
</pre>
<pre>     ...
</pre>
<pre>);
</pre>
</div>
</div>
</div>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">4.3.1.- Objetos. Funciones mapa y funciones de orden.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id97">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id97-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta97_73" class="block iDevice_content">
<img alt="Cinco pinceles ordenados de mayor a menor." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R39_Orden.jpg" title="Orden." width="132">
<p>
En la mayoría de los problemas es necesario hacer comparaciones entre tipos de datos, ordenarlos, etc. Sin embargo, los tipos de objetos no tienen orden predefinido por lo que no podrán ser comparados ni ordenados (x&gt;y, DISTINCT, <code>ORDER BY</code>, ...). Nosotros podemos definir el orden que seguirá un tipo de objeto por medio de las funciones mapa y las funciones de orden.
</p>
<p>
Una función miembro mapa es una función sin parámetros que devuelve un tipo de dato: DATE, <code>NUMBER</code> o VARCHAR2 y sería similar a una función <span lang="en">hash</span>. Se definen anteponiendo la palabra clave MAP y sólo puede haber una para el tipo de objeto.
</p>
<div class="codigo elemento_centrado" style="width: 29.1em">
<div class="texto_izquierda">
<pre>CREATE TYPE Familia AS OBJECT (
</pre>
<pre>identificador      NUMBER,
</pre>
<pre>nombre           VARCHAR2(20),
</pre>
<pre>familia_          NUMBER,
</pre>
<pre>oficina_          NUMBER,
</pre>
<pre>MAP MEMBER FUNCTION orden RETURN NUMBER,
</pre>
<pre>...
</pre>
<pre>);
</pre>
<pre>     
</pre>
<pre>CREATE TYPE BODY Familia AS
</pre>
<pre>MAP MEMBER FUNCTION orden RETURN NUMBER IS
</pre>
<pre>BEGIN
</pre>
<pre>     RETURN identificador;
</pre>
<pre>END;
</pre>
<pre>...
</pre>
<pre>END;
</pre>
</div>
</div>
<br>
<p>
Una función miembro de orden es una función que acepta un parámetro del mismo tipo del tipo de objeto y que devuelve un número negativo si el objeto pasado es menor, cero si son iguales y un número positivo si el objeto pasado es mayor.
</p>
<div class="codigo elemento_centrado" style="width: 42.3em">
<div class="texto_izquierda">
<pre>CREATE TYPE Oficina AS OBJECT (
</pre>
<pre>     identificador          NUMBER,
</pre>
<pre>     nombre               VARCHAR2(20),
</pre>
<pre>     ...
</pre>
<pre>     ORDER MEMBER FUNCTION igual ( ofi Oficina ) RETURN INTEGER,
</pre>
<pre>     ...
</pre>
<pre>);
</pre>
<pre>     
</pre>
<pre>CREATE TYPE BODY Oficina AS
</pre>
<pre>     ORDER MEMBER FUNCTION igual ( ofi Oficina ) RETURN INTEGER IS
</pre>
<pre>     BEGIN
</pre>
<pre>          IF (identificador &lt; ofi.identificador) THEN
</pre>
<pre>               RETURN –1;
</pre>
<pre>          ELSIF (identificador = ofi.identificador) THEN
</pre>
<pre>               RETURN 0;
</pre>
<pre>          ELSE
</pre>
<pre>               RETURN 1;
</pre>
<pre>          END IF;
</pre>
<pre>     END;
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id98">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id98-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-98_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion98_60" class="block question iDevice_content">
<strong>Los métodos de un objeto sólo pueden ser procedimientos.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i98_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_63">Opción 1</a></label><input type="radio" name="option98_60" id="i98_63" class="exe-radio-option exe-radio-option-0-2-98_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-98_63"><a name="answer-98_63" href="./recopila_files/saved_resource"></a>
<div id="taans98_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i98_133" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_133">Opción 2</a></label><input type="radio" name="option98_60" id="i98_133" class="exe-radio-option exe-radio-option-1-2-98_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-98_133"><a name="answer-98_133" href="./recopila_files/saved_resource"></a>
<div id="taans98_133" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b98_60" class="feedback js-hidden"><a name="sa0b98_60" href="./recopila_files/saved_resource"></a>
<div id="taf98_63" class=" iDevice_content">
Incorrecto, creo que deberías dar un repaso a este apartado.

</div>
</div>
<div id="sa1b98_60" class="feedback js-hidden"><a name="sa1b98_60" href="./recopila_files/saved_resource"></a>
<div id="taf98_133" class=" iDevice_content">
Efectivamente, ya que las funciones también pueden ser métodos.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b98_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_133">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b98_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-98_136" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion98_136" class="block question iDevice_content">
<strong>El orden de un objeto se consigue:</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i98_139" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_139">Opción 1</a></label><input type="radio" name="option98_136" id="i98_139" class="exe-radio-option exe-radio-option-0-3-98_136-multi">
</p>
<div class="iDevice_answer-content" id="answer-98_139"><a name="answer-98_139" href="./recopila_files/saved_resource"></a>
<div id="taans98_139" class="block iDevice_content">
Al crearlo.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i98_142" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_142">Opción 2</a></label><input type="radio" name="option98_136" id="i98_142" class="exe-radio-option exe-radio-option-1-3-98_136-multi">
</p>
<div class="iDevice_answer-content" id="answer-98_142"><a name="answer-98_142" href="./recopila_files/saved_resource"></a>
<div id="taans98_142" class="block iDevice_content">
En PL/SQL los objetos no pueden ser ordenados.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i98_151" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_151">Opción 3</a></label><input type="radio" name="option98_136" id="i98_151" class="exe-radio-option exe-radio-option-2-3-98_136-multi">
</p>
<div class="iDevice_answer-content" id="answer-98_151"><a name="answer-98_151" href="./recopila_files/saved_resource"></a>
<div id="taans98_151" class="block iDevice_content">
Mediante las funciones mapa y las funciones de orden.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b98_136" class="feedback js-hidden"><a name="sa0b98_136" href="./recopila_files/saved_resource"></a>
<div id="taf98_139" class=" iDevice_content">
No, los objetos no tienen ningún orden predefinido.

</div>
</div>
<div id="sa1b98_136" class="feedback js-hidden"><a name="sa1b98_136" href="./recopila_files/saved_resource"></a>
<div id="taf98_142" class=" iDevice_content">
No es cierto, el orden lo podemos conseguir mediante el uso de funciones mapa y funciones de orden.

</div>
</div>
<div id="sa2b98_136" class="feedback js-hidden"><a name="sa2b98_136" href="./recopila_files/saved_resource"></a>
<div id="taf98_151" class=" iDevice_content">
¡Muy bien!

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_139">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b98_136">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_142">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b98_136">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-98_151">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa2b98_136">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">5.- Disparadores.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id99">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id99-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta99_66" class="block iDevice_content">
<img alt="Ilustración en la que se representa un chico rodeado de muchas columnas y una tira de papel con algún texto se extiende por entre todas las columnas." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R40_Clave.jpg" title="Clave." width="132">
<p>
<strong>Juan</strong> y <strong>María</strong> ya han hecho un paquete en el que tienen agrupadas las funciones más usuales que realizan sobre la base de datos de juegos <span lang="en">on-line</span>. Sin embargo, <strong>María</strong> ve que hay cosas que aún no pueden controlar. Por ejemplo, <strong>María</strong> quiere que la clave y el usuario de un jugador o jugadora no puedan ser la misma y eso no sabe cómo hacerlo. <strong>Juan</strong> le dice que para ese cometido están los disparadores y sin más dilaciones se pone a explicarle a <strong>María</strong> para qué sirven y cómo utilizarlos.
</p>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id100">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id100-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta100_73" class="block iDevice_content">
En este apartado vamos a tratar una herramienta muy potente proporcionada por PL/SQL para programar nuestra base de datos que son los disparadores o <span lang="en">triggers</span> en inglés.

</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id101">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id101-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta101_70" class="block iDevice_content">
<p>
Pero, ¿qué es un disparador?
</p>
<p>
Un disparador no es más que un procedimiento que es ejecutado cuando se realiza alguna sentencia de manipulación de datos sobre una tabla dada y bajo unas circunstancias establecidas a la hora de definirlo.
</p>

</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id102">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id102-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta102_73" class="block iDevice_content">
<p>
Por lo que un disparador puede ser usado para:
</p>
<ul class="lista_verificacion">
	<li>Llevar a cabo auditorías sobre la historia de los datos en nuestra base de datos.</li>
	<li>Garantizar complejas reglas de integridad.</li>
	<li>Automatizar la generación de valores derivados de columnas.</li>
	<li>Etc.</li>
</ul>
<p>
Cuando diseñamos un disparador debemos tener en cuenta que:
</p>
<ul class="lista_verificacion">
	<li>No debemos definir disparadores que dupliquen la funcionalidad que ya incorpora <span lang="en">Oracle</span>.</li>
	<li>Debemos limitar el tamaño de nuestros disparadores, y si estos son muy grandes codificarlos por medio de subprogramas que sean llamados desde el disparador.</li>
	<li>Cuidar la creación de disparadores recursivos.</li>
</ul>
<p>
Un disparador puede ser lanzado antes o después de realizar la operación que lo lanza. Por lo que tendremos disparadores BEFORE y disparadores AFTER.
</p>
<p>
Un disparador puede ser lanzado una vez por sentencia o una vez por cada fila a la que afecta. Por lo que tendremos disparadores de sentencia y disparadores de fila.
</p>
<p>
Un disparador puede ser lanzado al insertar, al actualizar o al borrar de una tabla, por lo que tendremos disparadores INSERT, <code>UPDATE</code> o DELETE (o mezclados).
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id103">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id103-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-103_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion103_60" class="block question iDevice_content">
<strong>En PL/SQL sólo podemos definir disparadores de fila.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i103_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_63">Opción 1</a></label><input type="radio" name="option103_60" id="i103_63" class="exe-radio-option exe-radio-option-0-2-103_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-103_63"><a name="answer-103_63" href="./recopila_files/saved_resource"></a>
<div id="taans103_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i103_155" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_155">Opción 2</a></label><input type="radio" name="option103_60" id="i103_155" class="exe-radio-option exe-radio-option-1-2-103_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-103_155"><a name="answer-103_155" href="./recopila_files/saved_resource"></a>
<div id="taans103_155" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b103_60" class="feedback js-hidden"><a name="sa0b103_60" href="./recopila_files/saved_resource"></a>
<div id="taf103_63" class=" iDevice_content">
No, también podemos definir disparadores de sentencia.

</div>
</div>
<div id="sa1b103_60" class="feedback js-hidden"><a name="sa1b103_60" href="./recopila_files/saved_resource"></a>
<div id="taf103_155" class=" iDevice_content">
Efectivamente, ya que también podemos definir disparador de sentencia.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b103_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_155">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b103_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-103_158" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion103_158" class="block question iDevice_content">
<strong>La diferente entre un disparador de fila y uno de sentencia es que el de fila es lanzado una vez por fila a la que afecta la sentencia y el de sentencia es lanzado una sola vez.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i103_161" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_161">Opción 1</a></label><input type="radio" name="option103_158" id="i103_161" class="exe-radio-option exe-radio-option-0-2-103_158-multi">
</p>
<div class="iDevice_answer-content" id="answer-103_161"><a name="answer-103_161" href="./recopila_files/saved_resource"></a>
<div id="taans103_161" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i103_164" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_164">Opción 2</a></label><input type="radio" name="option103_158" id="i103_164" class="exe-radio-option exe-radio-option-1-2-103_158-multi">
</p>
<div class="iDevice_answer-content" id="answer-103_164"><a name="answer-103_164" href="./recopila_files/saved_resource"></a>
<div id="taans103_164" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b103_158" class="feedback js-hidden"><a name="sa0b103_158" href="./recopila_files/saved_resource"></a>
<div id="taf103_161" class=" iDevice_content">
Muy bien, vas por buen camino.

</div>
</div>
<div id="sa1b103_158" class="feedback js-hidden"><a name="sa1b103_158" href="./recopila_files/saved_resource"></a>
<div id="taf103_164" class=" iDevice_content">
Incorrecto, creo que deberías repasar este apartado otra vez.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_161">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b103_158">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-103_164">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b103_158">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">5.1.- Definición de disparadores.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id104">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id104-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta104_73" class="block iDevice_content">
<img alt="Ilustración en la que se ven dos chicos, un cañón y se puede leer “Bang!”." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R41_Disparar.jpg" title="Disparar." width="132">
<p>
Por lo visto anteriormente, para definir un disparador deberemos indicar si será lanzado antes o después de la ejecución de la sentencia que lo lanza, si se lanzará una vez por sentencia o una vez por fila a la que afecta, y si será lanzado al insertar y/o al actualizar y/o al borrar. La sintaxis que seguiremos para definir un disparador será la siguiente:
</p>
<div class="codigo elemento_centrado" style="width: 33.5em">
<div class="texto_izquierda">
<pre>CREATE [OR REPLACE] TRIGGER nombre 
</pre>
<pre>momento acontecimiento ON tabla
</pre>
<pre>[[REFERENCING (old AS alias_old|new AS alias_new) 
</pre>
<pre>FOR EACH ROW 
</pre>
<pre>[WHEN condicion]]
</pre>
<pre>bloque_PL/SQL;
</pre>
</div>
</div>
&nbsp;
<p>
Donde nombre nos indica el nombre que le damos al disparador, momento nos dice cuando será lanzado el disparador (BEFORE o <code>AFTER</code>), acontecimiento será la acción que provoca el lanzamiento del disparador (INSERT y/o DELETE y/o UPDATE). <code>REFERENCING</code> y WHEN sólo podrán ser utilizados con disparadores para filas. REFERENCING nos permite asignar un alias a los valores NEW o/y OLD de las filas afectadas por la operación, y WHEN nos permite indicar al disparador que sólo sea lanzado cuando sea TRUE una cierta condición evaluada para cada fila afectada.
</p>
<p>
En un disparador de fila, podemos acceder a los valores antiguos y nuevos de la fila afectada por la operación, referenciados como :old y <code>:new</code> (de ahí que podamos utilizar la opción REFERENCING para asignar un alias). Si el disparador es lanzado al insertar, el valor antiguo no tendrá sentido y el valor nuevo será la fila que estamos insertando. Para un disparador lanzado al actualizar el valor antiguo contendrá la fila antes de actualizar y el valor nuevo contendrá la fila que vamos actualizar. Para un disparador lanzado al borrar sólo tendrá sentido el valor antiguo.
</p>
<p>
En el cuerpo de un disparador también podemos acceder a unos predicados que nos dicen qué tipo de operación se está llevando a cabo, que son: INSERTING, <code>UPDATING</code> y DELETING.
</p>
<p>
Un disparador de fila no puede acceder a la tabla asociada. Se dice que esa tabla está mutando. Si un disparador es lanzado en cascada por otro disparador, éste no podrá acceder a ninguna de las tablas asociadas, y así recursivamente.
</p>
<div class="codigo elemento_centrado" style="width: 57.15em">
<div class="texto_izquierda">
<pre>CREATE TRIGGER prueba BEFORE UPDATE ON agentes
</pre>
<pre>FOR EACH ROW
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     SELECT identificador FROM agentes WHERE ...     
</pre>
<pre>/*devolvería el error ORA-04091: table AGENTES is mutating, trigger/function may not see it*/
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
<pre>/
</pre>
</div>
</div>
&nbsp;
<p>
Si tenemos varios tipos de disparadores sobre una misma tabla, el orden de ejecución será:
</p>
<ul class="lista_verificacion">
	<li><span lang="en">Triggers before</span> de sentencia.</li>
	<li><span lang="en">Triggers before</span> de fila.</li>
	<li><span lang="en">Triggers after</span> de fila.</li>
	<li><span lang="en">Triggers after</span> de sentencia.</li>
</ul>
<p>
Existe una vista del diccionario de datos con información sobre los disparadores: USER_TRIGGERS;
</p>
<div class="codigo elemento_centrado" style="width: 36.25em">
<div class="texto_izquierda">
<pre>SQL&gt;DESC USER_TRIGGERS;
</pre>
<pre>Name                            Null?    Type
</pre>
<pre>------------------------------- -------- ----
</pre>
<pre>TRIGGER_NAME                    NOT NULL VARCHAR2(30)
</pre>
<pre>TRIGGER_TYPE                             VARCHAR2(16)
</pre>
<pre>TRIGGERING_EVENT                         VARCHAR2(26)
</pre>
<pre>TABLE_OWNER                     NOT NULL VARCHAR2(30)
</pre>
<pre>TABLE_NAME                      NOT NULL VARCHAR2(30)
</pre>
<pre>REFERENCING_NAMES                        VARCHAR2(87)
</pre>
<pre>WHEN_CLAUSE                              VARCHAR2(4000)
</pre>
<pre>STATUS                                   VARCHAR2(8)
</pre>
<pre>DESCRIPTION                              VARCHAR2(4000)
</pre>
<pre>TRIGGER_BODY                             LONG
</pre>
</div>
</div>

</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">5.2.- Ejemplos de disparadores.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id105">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id105-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta105_73" class="block iDevice_content">
<img alt="Dibujo en blanco y negro que representa una chica con una escopeta." class="elemento_derecha" height="132" src="./recopila_files/BD06_CONT_R42_Disparar.jpg" title="Disparar." width="200">
<p>
Ya hemos visto qué son los disparadores, los tipos que existen, cómo definirlos y algunas consideraciones a tener en cuenta a la hora de trabajar con ellos.
</p>
<p>
Ahora vamos a ver algunos ejemplos de su utilización con los que podremos comprobar la potencia que éstos nos ofrecen.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id130">
<div class="iDevice emphasis_debesconocerfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id130-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta130_44" class="block iDevice_content">
<p>En los siguientes videotutoriales puedes ver algunos ejemplos de disparadores y su utilización en una base de datos. Recuerda que los disparadores se ejecutan de forma automática cuando se produce la operación para la que han sido programados. En el primer videotutorial se puede ver uno de los usos de los triggers cuando se desea tener automatizado el cálculo de campos derivados en alguna tabla. En el segundo videotutorial se puede ver cómo llevar el control en una tabla "auditoría" de las operaciones que hacen determinados usuarios.</p>
<table cellspacing="10" cellpadding="10" border="0" align="center">
<tbody>
<tr>
<td style="text-align: center;">
<p><strong>Ejemplo de disparador para automatizar cálculos<br></strong></p>
</td>
<td style="text-align: center;"><strong>Ejemplo de disparador para llevar control de auditoría<br></strong></td>
</tr>
<tr>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/EA-WKaf2nlA">https://www.youtube.com/embed/EA-WKaf2nlA</a></span><iframe width="560" height="315" src="./recopila_files/EA-WKaf2nlA.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
<td><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/HPP271RsfE8">https://www.youtube.com/embed/HPP271RsfE8</a></span><iframe width="560" height="315" src="./recopila_files/HPP271RsfE8.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id131">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id131-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta131_69" class="block iDevice_content">
<p></p>
<p></p>
<p>Además, en los siguientes ejercicios puedes ver más ejemplos:</p>
</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id106">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id106-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta106_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b106" class="block iDevice_content">
Como un agente debe pertenecer a una familia o una oficina pero no puede pertenecer a una familia y a una oficina a la vez, deberemos implementar un disparador para llevar a cabo esta restricción que <span lang="en">Oracle</span> no nos permite definir.

</div>
<form name="feedback-form-quesFeedback0b106" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b106text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b106" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b106" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<p>
Para este cometido definiremos un disparador de fila que saltará antes de que insertemos o actualicemos una fila en la tabla agentes, cuyo código podría ser el siguiente:
</p>
<div class="codigo elemento_centrado" style="width: 50.55em">
<div class="texto_izquierda">
<pre>CREATE OR REPLACE TRIGGER integridad_agentes
</pre>
<pre>BEFORE INSERT OR UPDATE ON agentes
</pre>
<pre>FOR EACH ROW
</pre>
<pre>BEGIN
</pre>
<pre>     IF (:new.familia IS NULL and :new.oficina IS NULL) THEN
</pre>
<pre>          RAISE_APPLICATION_ERROR(-20201, 'Un agente no puede ser huérfano');
</pre>
<pre>     ELSIF (:new.familia IS NOT NULL and :new.oficina IS NOT NULL) THEN
</pre>
<pre>          RAISE_APPLICATION_ERROR(-20202, 'Un agente no puede tener dos padres');
</pre>
<pre>     END IF;
</pre>
<pre>END;
</pre>
<pre>/
</pre>
</div>
</div>
&nbsp;
</div>
</form>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id108">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id108-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta108_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b108" class="block iDevice_content">
Supongamos que tenemos una tabla de históricos para agentes que nos permita auditar las familias y oficinas por la que ha ido pasando un agente. La tabla tiene la fecha de inicio y la fecha de finalización del agente en esa familia u oficina, el identificador del agente, el nombre del agente, el nombre de la familia y el nombre de la oficina. Queremos hacer un disparador que inserte en esa tabla.

</div>
<form name="feedback-form-quesFeedback0b108" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b108text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b108" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b108" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<p>
Para llevar a cabo esta tarea definiremos un disparador de fila que saltará después de insertar, actualizar o borrar una fila en la tabla agentes, cuyo código podría ser el siguiente:
</p>
<div class="codigo elemento_centrado" style="width: 70.9em">
<div class="texto_izquierda">
<pre>CREATE OR REPLACE TRIGGER historico_agentes
</pre>
<pre>AFTER INSERT OR UPDATE OR DELETE ON agentes
</pre>
<pre>FOR EACH ROW
</pre>
<pre>DECLARE
</pre>
<pre>     oficina VARCHAR2(40);
</pre>
<pre>     familia VARCHAR2(40);
</pre>
<pre>     ahora DATE := sysdate;
</pre>
<pre>BEGIN
</pre>
<pre>     IF INSERTING THEN
</pre>
<pre>          IF (:new.familia IS NOT NULL) THEN
</pre>
<pre>               SELECT nombre INTO familia FROM familias WHERE identificador = :new.familia;
</pre>
<pre>               oficina := NULL;
</pre>
<pre>          ELSIF
</pre>
<pre>               SELECT nombre INTO oficina FROM oficinas WHERE identificador = :new.oficina;
</pre>
<pre>               familia := NULL;
</pre>
<pre>          END IF;
</pre>
<pre>          INSERT INTO histagentes VALUES (ahora, NULL, :new.identificador, :new.nombre, familia, oficina);
</pre>
<pre>          COMMIT;
</pre>
<pre>     ELSIF UPDATING THEN
</pre>
<pre>          UPDATE histagentes SET fecha_hasta = ahora WHERE identificador = :old.identificador and fecha_hasta IS NULL;
</pre>
<pre>          IF (:new.familia IS NOT NULL) THEN
</pre>
<pre>               SELECT nombre INTO familia FROM familias WHERE identificador = :new.familia;
</pre>
<pre>               oficina := NULL;
</pre>
<pre>          ELSE
</pre>
<pre>               SELECT nombre INTO oficina FROM oficinas WHERE identificador = :new.oficina;
</pre>
<pre>               familia := NULL;
</pre>
<pre>          END IF;
</pre>
<pre>          INSERT INTO histagentes VALUES (ahora, NULL, :new.identificador, :new.identificador, familia, oficina);
</pre>
<pre>          COMMIT;
</pre>
<pre>     ELSE
</pre>
<pre>          UPDATE histagentes SET fecha_hasta = ahora WHERE identificador = :old.identificador and fecha_hasta IS NULL;
</pre>
<pre>          COMMIT;
</pre>
<pre>     END IF;
</pre>
<pre>END;
</pre>
<pre>/
</pre>
</div>
</div>
&nbsp;
</div>
</form>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id109">
<div class="iDevice emphasis_ejercicioresueltofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_ejercicioresueltofpd.png)"><h2 class="iDeviceTitle">Ejercicio resuelto</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id109-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta109_67" class="block story iDevice_content">

</div>
<div id="taquesQuestion0b109" class="block iDevice_content">
Queremos realizar un disparador que no nos permita llevar a cabo operaciones con familias si no estamos en la jornada laboral.

</div>
<form name="feedback-form-quesFeedback0b109" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b109text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b109" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler"></p>
</div>
<div id="feedback-quesFeedback0b109" class="feedback js-feedback js-hidden" role="status">
<h3 class="js-sr-av">Retroalimentación</h3>
<div class="codigo elemento_centrado" style="width: 63.2em">
<div class="texto_izquierda">
<pre>CREATE OR REPLACE TRIGGER jornada_familias
</pre>
<pre>BEFORE INSERT OR DELETE OR UPDATE ON familias
</pre>
<pre>DECLARE
</pre>
<pre>     ahora DATE := sysdate;
</pre>
<pre>BEGIN
</pre>
<pre>     IF (TO_CHAR(ahora, 'DY') = 'SAT' OR TO_CHAR(ahora, 'DY') = 'SUN') THEN
</pre>
<pre>          RAISE_APPLICATION_ERROR(-20301, 'No podemos manipular familias en fines de semana');
</pre>
<pre>     END IF;
</pre>
<pre>     IF (TO_CHAR(ahora, 'HH24') &lt; 8 OR TO_CHAR(ahora, 'HH24') &gt; 18) THEN
</pre>
<pre>          RAISE_APPLICATION_ERROR(-20302, 'No podemos manipular familias fuera del horario de trabajo');
</pre>
<pre>     END IF;
</pre>
<pre>END;
</pre>
<pre>/
</pre>
</div>
</div>
</div>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">6.- Interfaces de programación de aplicaciones para lenguajes externos.</h1></div></div>
<div class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id110">
<div class="iDevice emphasis_casopracticofpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id110-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta110_66" class="block iDevice_content">
<img alt="Dibujo en el que se representa un chico con un bocadillo en el que se puede leer un signo de interrogación." class="elemento_derecha" height="200" src="./recopila_files/BD06_CONT_R44_Duda.jpg" title="Duda." width="136">
<p>
<strong>Juan</strong> y <strong>María</strong> tienen la base de datos de juegos <span lang="en">on-line</span> lista, pero no tienen claro si todo lo que han hecho lo tienen que utilizar desde dentro de la base de datos o si pueden reutilizar todo ese trabajo desde otro lenguaje de programación desde el que están creando la interfaz web desde la que los jugadores y jugadoras se conectarán para jugar y desde la que también se conectará la administradora para gestionar la base de datos de una forma más amigable.
</p>
<p>
En ese momento pasa <strong>Ada</strong> al lado y ambos la asaltan con su gran duda. <strong>Ada</strong>, muy segura, les responde que para eso existen las interfaces de programación de aplicaciones o <acronym lang="en" title="Application Programming Interface.">APIs</acronym>, que les permiten acceder desde otros lenguajes de programación a la base de datos.
</p>

</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id111">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id111-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta111_73" class="block iDevice_content">
<p>
Llegados a este punto ya sabemos programar nuestra base de datos, pero al igual que a <strong>Juan</strong> y <strong>María</strong> te surgirá la duda de si todo lo que has hecho puedes aprovecharlo desde cualquier otro lenguaje de programación. La respuesta es la misma que dio <strong>Ada</strong>: SÍ.
</p>
<p>
En este apartado te vamos a dar algunas referencias sobre las APIs para acceder a las bases de datos desde un lenguaje de programación externo. No vamos a ser exhaustivos ya que eso queda fuera del alcance de esta unidad e incluso de este módulo. Todo ello lo vas a estudiar con mucha más profundidad en otros módulos de este ciclo (o incluso ya lo conoces). Aquí sólo pretendemos que sepas que existen y que las puedes utilizar.
</p>
<p>
Las primeras APIs utilizadas para acceder a bases de datos <span lang="en">Oracle</span> fueron las que el mismo <span lang="en">Oracle</span> proporcionaba: <span lang="en">Pro*C</span>, <span lang="en">Pro*Fortran</span> y <span lang="en">Pro*Cobol</span>. Todas permitían embeber llamadas a la base de datos en nuestro programa y a la hora de compilarlo, primero debíamos pasar el precompilador adecuado que trasladaba esas llamadas embebidas en llamadas a una librería utilizada en tiempo de ejecución. Sin duda, el más utilizado fue <span lang="en">Pro*C</span>, ya que el lenguaje C y C++ tuvieron un gran auge.
</p>

</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id112">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id112-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta112_47" class="block iDevice_content">
<p>En los siguientes enlaces podrás obtener más información sobre <span lang="en">Pro*C</span> y cómo crear un programa para acceder a nuestra base de datos.</p>
<p class="enlace_centrado"><a title="Acceder a un artículo en el que se introduce Pro*C." href="http://infolab.stanford.edu/~ullman/fcdb/oracle/or-proc.html" target="_self">Introducción a <span lang="en">Pro*C</span>.</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id113">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id113-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta113_73" class="block iDevice_content">
Hoy día existen muchas más APIs para acceder a las bases de datos ya que tanto los lenguajes de programación como las tecnologías han evolucionado mucho. Antes la programación para la web casi no existía y por eso todos los programas que accedían a bases de datos lo hacían bien en local o bien a través de una red local. Hoy día eso sería impensable, de ahí que las APIs también hayan evolucionado mucho y tengamos una gran oferta a nuestro alcance para elegir la que más se adecue a nuestra necesidades.

</div>
</div>
</div>
<div class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id114">
<div class="iDevice emphasis_parasabermasfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id114-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta114_47" class="block iDevice_content">
<p>En los siguientes enlaces podrás ampliar información sobre algunas APIs muy comunes para acceder a bases de datos.</p>
<p class="enlace_centrado"><a title="Acceder a un artículo sobre las tecnologías que nos ofrece Oracle para acceder a bases de datos desde Java (en inglés)." href="http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136101.html" target="_self">Tecnologías Java para acceder a bases de datos.</a></p>
<p class="enlace_centrado"><a title="Acceder a un artículo que explica qué es ODBC (en inglés)." href="http://en.wikipedia.org/wiki/ODBC" target="_self">Conectividad abierta de bases de datos.</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">7.- Tutorial y ejercicios resueltos</h1></div></div>
<div class="iDevice_wrapper RecomendacionfpdIdevice em_iDevice" id="id118">
<div class="iDevice emphasis_recomendacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_recomendacionfpd.png)"><h2 class="iDeviceTitle">Recomendación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id118-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta118_46" class="block iDevice_content">
<p>En esta sección puedes consultar los siguientes videos a modo de resumen de todo lo comentado a lo largo de la unidad,&nbsp; un tutorial sobre PL/SQL para ampliar y complementar los contenidos y además realizar los ejercicios prácticos resueltos que te ayudarán a comprender mejor la utilización del lenguaje PL/SQL.</p>
<div class="elemento_centrado">
<p class="titulo">Introducción a PLSQL</p>
<div class="elemento_centrado"><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/bwwhM8Un20A">https://www.youtube.com/embed/bwwhM8Un20A</a></span><iframe width="560" height="315" src="./recopila_files/bwwhM8Un20A.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></div>
</div>
<p></p>
<p></p>
<div class="elemento_centrado">
<p class="titulo">Fundamentos de PLSQL</p>
<div class="elemento_centrado"><span class="external-iframe-src" style="display:none"><a href="https://www.youtube.com/embed/WEunKazZ_SU">https://www.youtube.com/embed/WEunKazZ_SU</a></span><iframe width="560" height="315" src="./recopila_files/WEunKazZ_SU.html" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="external-iframe"></iframe></div>
</div>
<p><span style="font-size: 1em;">&nbsp;</span></p>
<p style="text-align: center;"><a class="pdf" title="Descargar el fichero " tutorial_plsql""="" href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/TUTORIAL_PLSQL.pdf">Tutorial de PL/SQL</a></p>
<p style="text-align: center;"><a class="pdf" title="Descargar el fichero " ejercicios="" resueltos="" pl-sql""="" href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/EJERCICIOS_RESUELTOS_DE_PL-SQL.pdf">Ejercicios Resueltos de PL/SQL</a></p>
<p style="text-align: center;">&nbsp;</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo I.- Caso de estudio.</h1></div></div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id4">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id4-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta4_70" class="block iDevice_content">
<p><a name="anexo_i_caso_de_estudio.html" title="anexo_i_caso_de_estudio.html" href="./recopila_files/saved_resource"></a></p>
<p>Una empresa de telefonía tiene sus centros de llamadas distribuidos por la geografía española en diferentes oficinas. Estas oficinas están jerarquizadas en familias de agentes telefónicos. Cada familia, por tanto, podrá contener agentes u otras familias. Los agentes telefónicos, según su categoría, además se encargarán de supervisar el trabajo de todos los agentes de una oficina o de coordinar el trabajo de los agentes de una familia dada. El único agente que pertenecerá directamente a una oficina y que no formará parte de ninguna familia será el supervisor de dicha oficina, cuya categoría es la 2. Los coordinadores de las familias deben pertenecer a dicha familia y su categoría será 1 (no todas las familias tienen por qué tener un coordinador y dependerá del tamaño de la oficina, ya que de ese trabajo también se puede encargar el supervisor de la oficina). Los demás agentes deberán pertenecer a una familia, su categoría será 0 y serán los que principalmente se ocupen de atender las llamadas.</p>
<ul class="lista_verificacion">
<li>De los agentes queremos conocer su nombre, su clave y contraseña para entrar al sistema, su categoría y su habilidad que será un número entre 0 y 9 indicando su habilidad para atender llamadas.</li>
<li>Para las familias sólo nos interesa conocer su nombre.</li>
<li>Finalmente, para las oficinas queremos saber su nombre, domicilio, localidad y código postal de la misma.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id5">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id5-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta5_73" class="block iDevice_content">
<p></p>
<p>Un posible modelo entidad-relación para el problema expuesto podría ser el siguiente:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/BD06_AUXR01_R01_ER_CallCenter.png" title="Ampliar imagen."><img alt="Modelo Entidad-relación del caso de estudio en el que se puede ver que hay tres entidades (con sus atributos): Oficinas (identificador que es clave primaria, nombre, dirección, código postal y localidad), Agentes (identificador que es clave primaria, nombre, clave, usuario, habilidad y categoría) y Familias (identificador que es clave primaria y nombre). Las oficinas está relacionadas con una relación de 1 a n con agentes y familias. Las familias están también relacionadas con una relación de 1 a n con agentes y con familias." class="imagen_ampliable" src="./recopila_files/BD06_AUXR01_R01_ER_CallCenter_miniatura.png" style="width: 200px; height: 132px;" title="Modelo Entidad-relación del caso de estudio." width="200" height="132"></a></div>
</div>
<p>De este modelo de datos surgen tres tablas, que podrían ser creadas en <span lang="en">Oracle</span> con las siguientes sentencias:</p>
<div class="codigo elemento_centrado" style="width: 35.7em;">
<div class="texto_izquierda">
<pre>create table oficinas (
</pre>
<pre>     identificador     number(6) not null primary key,
</pre>
<pre>     nombre          varchar2(40) not null unique,
</pre>
<pre>     domicilio     varchar2(40),
</pre>
<pre>     localidad     varchar2(20),
</pre>
<pre>     codigo_postal     number(5)
</pre>
<pre>);
</pre>
<pre>
</pre>
<pre>create table familias (
</pre>
<pre>     identificador     number(6) not null primary key,
</pre>
<pre>     nombre          varchar2(40) not null unique,
</pre>
<pre>     familia          number(6) references familias,
</pre>
<pre>     oficina          number(6) references oficinas
</pre>
<pre>);
</pre>
<pre>
</pre>
<pre>create table agentes (
</pre>
<pre>     identificador     number(6) not null primary key,
</pre>
<pre>     nombre          varchar2(60) not null,
</pre>
<pre>     usuario          varchar2(20) not null unique,
</pre>
<pre>     clave          varchar2(20) not null,
</pre>
<pre>     habilidad     number(1) not null,
</pre>
<pre>     categoria     number(1) not null,
</pre>
<pre>     familia          number(6) references familias,
</pre>
<pre>     oficina          number(6) references oficinas
</pre>
<pre>);
</pre>
</div>
</div>
<p></p>
<p>Vamos a insertar algunas filas para que las pruebas de nuestros ejemplos tengan algo de sentido. Para ello podemos utilizar las siguientes sentencias:</p>
<div class="codigo elemento_centrado" style="width: 65.95em;">
<div class="texto_izquierda">
<pre>insert into oficinas values (1, 'Madrid', 'Gran vía, 37', 'Madrid', 28000);
</pre>
<pre>insert into oficinas values (2, 'Granada', 'Camino Ronda, 50', 'Granada', 36000);
</pre>
<pre>insert into oficinas values (3, 'Jaén', 'Gran Eje, 80', 'Jaén', 27000);
</pre>
<pre>
</pre>
<pre>insert into familias values (11, 'Madrid-1', NULL, 1);
</pre>
<pre>insert into familias values (111, 'Madrid-1.1', 11, NULL);
</pre>
<pre>insert into familias values (112, 'Madrid-1.2', 11, NULL);
</pre>
<pre>insert into familias values (1121, 'Madrid-1.2.1', 112, NULL);
</pre>
<pre>insert into familias values (1122, 'Madrid-1.2.2', 112, NULL);
</pre>
<pre>insert into familias values (1123, 'Madrid-1.2.3', 112, NULL);
</pre>
<pre>insert into familias values (21, 'Granada-1', NULL, 2);
</pre>
<pre>insert into familias values (211, 'Granada-1.1', 21, NULL);
</pre>
<pre>insert into familias values (212, 'Granada-1.2', 21, NULL);
</pre>
<pre>insert into familias values (213, 'Granada-1.3', 21, NULL);
</pre>
<pre>insert into familias values (31, 'Jaén-1', NULL, 3);
</pre>
<pre>
</pre>
<pre>insert into agentes values (31, 'José Ramón Jiménez Reyes', 'jrjr', 'sup31', 9, 2, NULL, 3);
</pre>
<pre>insert into agentes values (311, 'Pedro Fernández Arias', 'pfa', 'ag311', 5, 0, 31, NULL);
</pre>
<pre>insert into agentes values (312, 'Vanesa Sánchez Rojo', 'vsr', 'ag312', 5, 0, 31, NULL);
</pre>
<pre>insert into agentes values (313, 'Francisco Javier García Escobedo', 'fjge', 'ag313', 5, 0, 31, NULL);
</pre>
<pre>insert into agentes values (314, 'Pilar Ramirez Pérez', 'prp', 'ag314', 5, 0, 31, NULL);
</pre>
<pre>insert into agentes values (315, 'José Luis García Martínez', 'jlgm', 'ag315', 5, 0, 31, NULL);
</pre>
<pre>insert into agentes values (21, 'Sebastián López Ojeda', 'slo', 'sup21', 9, 2, NULL, 2);
</pre>
<pre>insert into agentes values (211, 'Diosdado Sánchez Hernández', 'dsh', 'ag211', 8, 1, 21, NULL);
</pre>
<pre>insert into agentes values (2111, 'José Juan Cano Pardo', 'jjcp', 'ag2111', 5, 0, 211, NULL);
</pre>
<pre>insert into agentes values (2112, 'Flor Moncada Añón', 'ag2112', 'fma', 5, 0, 211, NULL);
</pre>
<pre>insert into agentes values (2113, 'Juan Manuel Alcazar Donaire', 'jmad', 'ag2113', 5, 0, 211, NULL);
</pre>
<pre>insert into agentes values (2121, 'Manuel Jesús Rubia Mateos', 'mjrm', 'ag2121', 5, 0, 212, NULL);
</pre>
<pre>insert into agentes values (2122, 'Esther López Delgado', 'eld', 'ag2122', 5, 0, 212, NULL);
</pre>
<pre>insert into agentes values (2123, 'Francisco Javier Cabrerizo Membrilla', 'fjcm', 'ag2123', 5, 0, 212, NULL);
</pre>
<pre>insert into agentes values (2124, 'Verónica Cabrerizo Menbrilla', 'vcm', 'ag2124', 5, 0, 212, NULL);
</pre>
<pre>insert into agentes values (2125, 'María José Navascués Morales', 'mjnm', 'ag2125', 5, 0, 212, NULL);
</pre>
<pre>insert into agentes values (2131, 'Isabel Cruz Granados', 'icg', 'ag2131', 5, 0, 213, NULL);
</pre>
<pre>insert into agentes values (2132, 'Antonio Casado Fernández', 'acf', 'ag2132', 5, 0, 213, NULL);
</pre>
<pre>insert into agentes values (2133, 'Gabriel Callejón García', 'gcg', 'ag2133', 5, 0, 213, NULL);
</pre>
<pre>insert into agentes values (2134, 'Enrique Cano Balsera', 'ecb', 'ag2134', 5, 0, 213, NULL);
</pre>
<pre>insert into agentes values (11, 'Narciso Jáimez Toro', 'njt', 'sup11', 9, 2, NULL, 1);
</pre>
<pre>insert into agentes values (111, 'Jesús Baños Sancho', 'jbs', 'ag111', 8, 1, 11, NULL);
</pre>
<pre>insert into agentes values (1111, 'Salvador Romero Villegas', 'srv', 'ag1111', 7, 1, 111, NULL);
</pre>
<pre>insert into agentes values (1112, 'José Javier Bermúdez Hernández', 'jjbh', 'ag1112', 7, 1, 111, NULL);
</pre>
<pre>insert into agentes values (1113, 'Alfonso Bonillo Sierra', 'abs', 'ag1113', 7, 1, 111, NULL);&lt;br /&gt;</pre>
<pre>insert into agentes values (1114, 'Víctor Gil Rodríguez', 'vgr', 'ag1114', 7, 1, 111, NULL);</pre>
<pre>insert into agentes values (1121, 'Silvia Thomas Barrós', 'stb', 'ag1121', 7, 1, 112, NULL);
</pre>
<pre>insert into agentes values (11211, 'Ernesto Osoro Gorrotxategi', 'eog', 'ag11211', 5, 0, 1121, NULL);
</pre>
<pre>insert into agentes values (11212, 'Guillermo Campos Guillén', 'gcg', 'ag11212', 5, 0, 1121, NULL);
</pre>
<pre>insert into agentes values (11213, 'Antonio Fernández Ruíz', 'afr', 'ag11213', 5, 0, 1121, NULL);
</pre>
<pre>insert into agentes values (11214, 'María Luisa López Caballero', 'mllc', 'ag11214', 5, 0, 1121, NULL);
</pre>
<pre>insert into agentes values (11221, 'Virginia Morenas Rubio', 'vmr', 'ag11221', 5, 0, 1121, NULL);
</pre>
<pre>insert into agentes values (11222, 'Rosario Castro García', 'rcg', 'ag11222', 5, 0, 1122, NULL);
</pre>
<pre>insert into agentes values (11223, 'Antonio Álvarez Palomeque', 'aap', 'ag11223', 5, 0, 1122, NULL);
</pre>
<pre>insert into agentes values (11224, 'David Martínez Martínez', 'dmm', 'ag11224', 5, 0, 1122, NULL);
</pre>
<pre>insert into agentes values (11225, 'Juan Corral González', 'jcg', 'ag11225', 5, 0, 1122, NULL);
</pre>
<pre>insert into agentes values (11226, 'Eduardo Alfada Pereira', 'eap', 'ag11226', 5, 0, 1122, NULL);
</pre>
<pre>insert into agentes values (11231, 'Cayetano García Herrera', 'cgh', 'ag11231', 5, 0, 1123, NULL);
</pre>
<pre>insert into agentes values (11232, 'José Antonio Sieres Vega', 'jasv', 'ag11232', 5, 0, 1123, NULL);
</pre>
<pre>insert into agentes values (11233, 'Juan Manuel Guzmán García', 'jmgg', 'ag11233', 5, 0, 1123, NULL);
</pre>
<pre>
</pre>
<pre>commit;
</pre>
</div>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo II.- Excepciones predefinidas en Oracle.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id35">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id35-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta35_73" class="block iDevice_content">
<p><a name="anexo_ii_excepciones_predefinidas_en_oracle.html" title="anexo_ii_excepciones_predefinidas_en_oracle.html" href="./recopila_files/saved_resource"></a></p>
<p>Las excepciones predefinidas son:</p>
<table class="tabla" summary="Tabla en la que se muestran los nombres de las distintas excepciones definidas en Oracle, junto a su código de error y  una explicación de cuándo son lanzadas. Primera columna: excepción, segunda columna: código de error, tercera columna: cuando se lanza."><caption>Excepciones predefinidas en <span lang="en">Oracle</span>.</caption>
<thead>
<tr><th scope="col">Excepción.</th><th scope="col">SQLCODE</th><th scope="col">Lanzada cuando ...</th></tr>
</thead>
<tbody>
<tr>
<td>ACCES_INTO_NULL</td>
<td>-6530</td>
<td>Intentamos asignar valor a atributos de objetos no inicializados.</td>
</tr>
<tr>
<td>COLECTION_IS_NULL</td>
<td>-6531</td>
<td>Intentamos asignar valor a elementos de colecciones no inicializadas, o acceder a métodos distintos de EXISTS.</td>
</tr>
<tr>
<td>CURSOR_ALREADY_OPEN</td>
<td>-6511</td>
<td>Intentamos abrir un cursor ya abierto.</td>
</tr>
<tr>
<td>DUP_VAL_ON_INDEX</td>
<td>-1</td>
<td>Índice único violado.</td>
</tr>
<tr>
<td>INVALID_CURSOR</td>
<td>-1001</td>
<td>Intentamos hacer una operación con un cursor que no está abierto.</td>
</tr>
<tr>
<td>INVALID_NUMBER</td>
<td>-1722</td>
<td>Conversión de cadena a número falla.</td>
</tr>
<tr>
<td>LOGIN_DENIED</td>
<td>-1403</td>
<td>El usuario y/o contraseña para conectarnos a <span lang="en">Oracle</span> no es válido.</td>
</tr>
<tr>
<td>NO_DATA_FOUND</td>
<td>+100</td>
<td>Una sentencia SELECT no devuelve valores, o intentamos acceder a un elemento borrado de una tabla anidada.</td>
</tr>
<tr>
<td>NOT_LOGGED_ON</td>
<td>-1012</td>
<td>No estamos conectados a <span lang="en">Oracle</span>.</td>
</tr>
<tr>
<td>PROGRAM_ERROR</td>
<td>-6501</td>
<td>Ha ocurrido un error interno en PL/SQL.</td>
</tr>
<tr>
<td>ROWTYPE_MISMATCH</td>
<td>-6504</td>
<td>Diferentes tipos en la asignación de 2 cursores.</td>
</tr>
<tr>
<td>STORAGE_ERROR</td>
<td>-6500</td>
<td>Memoria corrupta.</td>
</tr>
<tr>
<td>SUBSCRIPT_BEYOND_COUNT</td>
<td>-6533</td>
<td>El índice al que intentamos acceder en una colección sobrepasa su límite superior.</td>
</tr>
<tr>
<td>SUBSCRIPT_OUTSIDE_LIMIT</td>
<td>-6532</td>
<td>Intentamos acceder a un rango no válido dentro de una colección (-1 por ejemplo).</td>
</tr>
<tr>
<td>TIMEOUT_ON_RESOURCE</td>
<td>-51</td>
<td>Un <span lang="en">timeout</span> ocurre mientras Oracle espera por un recurso.</td>
</tr>
<tr>
<td>TOO_MANY_ROWS</td>
<td>-1422</td>
<td>Una sentencia SELECT...INTO... devuelve más de una fila.</td>
</tr>
<tr>
<td>VALUE_ERROR</td>
<td>-6502</td>
<td>Ocurre un error de conversión, aritmético, de truncado o de restricción de tamaño.</td>
</tr>
<tr>
<td>ZERO_DIVIDE</td>
<td>-1476</td>
<td>Intentamos dividir un número por 0.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo II a.- Manejo de errores (I).</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id38">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id38-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta38_73" class="block iDevice_content">
<p><img alt="Escultura en la que se ve un ojo pinchado en un tenedor." class="elemento_derecha" src="./recopila_files/BD06_CONT_R16_Ojo.jpg" title="Ojo." width="132" height="200"></p>
<p>Continuemos viendo algunos detalles a tener en cuenta, relativos al uso de las excepciones.</p>
<ul class="lista_verificacion">
<li style="margin-bottom: 20px;">Cuando ejecutamos varias sentencias seguidas del mismo tipo y queremos capturar alguna posible excepción debida al tipo de sentencia, podemos encapsular cada sentencia en un bloque y manejar en cada bloque la excepción, o podemos utilizar una variable localizadora para saber qué sentencia ha sido la que ha lanzado la excepción (aunque de esta manera no podremos continuar por la siguiente sentencia).
<div class="codigo elemento_centrado" style="width: 29.65em;">
<div class="texto_izquierda">
<pre>DECLARE</pre>
<pre>     sentencia NUMBER := 0;</pre>
<pre>BEGIN</pre>
<pre>     ...</pre>
<pre>     SELECT * FROM agentes ...</pre>
<pre>     sentencia := 1;</pre>
<pre>     SELECT * FROM familias ...</pre>
<pre>     sentencia := 2;</pre>
<pre>     SELECT * FROM oficinas ...</pre>
<pre>     ...</pre>
<pre>EXCEPTION</pre>
<pre>     WHEN NO_DATA_FOUND THEN</pre>
<pre>          IF sentencia = 0 THEN</pre>
<pre>               RAISE agente_no_encontrado;</pre>
<pre>          ELSIF sentencia = 1 THEN</pre>
<pre>               RAISE familia_no_encontrada;</pre>
<pre>          ELSIF sentencia = 2 THEN</pre>
<pre>               RAISE oficina_no_encontrada;</pre>
<pre>          END IF;</pre>
<pre>END;</pre>
</div>
</div>
</li>
<li>Si la excepción es capturada por un manejador de excepción apropiado, ésta es tratada y posteriormente el control es devuelto al bloque superior. Si la excepción no es capturada y no existe bloque superior, el control se devolverá al entorno. También puede darse que la excepción sea manejada en un bloque superior a falta de manejadores para ella en los bloques internos, la excepción se propaga de un bloque al superior y así hasta que sea manejada o no queden bloques superiores con lo que el control se devuelve al entorno. Una excepción también puede ser relanzada en un manejador. En la siguiente presentación puedes ver cómo se propagan diferentes excepciones entre diferentes bloques.</li>
</ul>
<p style="text-align: center;"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/PropagacionExcepciones.pdf" target="_blank" class="pdf" title="Propagación de Excepciones" rel="noopener">Propagación Excepciones</a></p>
<div class="exe-fx exe-carousel" id="exe-carousel-0"><div class="fx-carousel-content fx-C2 fx-current" id="exe-carousel-0-0">
<h2>Propagación de las excepciones en PL/SQL</h2>
<p style="text-align: center;"><img src="./recopila_files/img2.png" width="549" height="294" alt="Propagación de las excepciones en PL/SQL" title="Propagación de las excepciones en PL/SQL"></p>
</div>
<div class="fx-carousel-content fx-C2" id="exe-carousel-0-1">
<h2>Propagación de las excepciones (a)</h2>
<p style="text-align: center;"><img src="./recopila_files/img3.png" width="549" height="521" alt="Propagación de las excepciones (a)" title="Propagación de las excepciones (a)"></p>
</div>
<div class="fx-carousel-content fx-C2" id="exe-carousel-0-2">
<h2>Propagación de las excepciones (b)</h2>
<p style="text-align: center;"><img src="./recopila_files/img4.png" width="550" height="516" alt="Propagación de las excepciones (b)" title="Propagación de las excepciones (b)"></p>
</div>
<div class="fx-carousel-content fx-C2" id="exe-carousel-0-3">
<h2>Propagación de las excepciones (c)</h2>
<p style="text-align: center;"><img src="./recopila_files/img5.png" width="550" height="542" alt="Propagación de las excepciones (c)" title="Propagación de las excepciones (c)"></p>
</div><ul class="fx-pagination fx-carousel-pagination">
<li id="exe-carousel-0-prev" class="fx-carousel-prev-next fx-carousel-prev fx-disabled fx-C2"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="exe-carousel-0-prev-lnk" title="Anterior" class="fx-disabled-link"><span>◄</span><span class="sr-av"> Anterior</span></a></li><li class="fx-current fx-C1" id="exe-carousel-0-0-link"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#exe-carousel-0-0" class="exeFXSlideLinkexe-carousel-0_exe-carousel-0-0_0" title="Propagación de las excepciones en PL/SQL">1</a></li>
<li id="exe-carousel-0-1-link"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#exe-carousel-0-1" class="exeFXSlideLinkexe-carousel-0_exe-carousel-0-1_1" title="Propagación de las excepciones (a)">2</a></li>
<li id="exe-carousel-0-2-link"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#exe-carousel-0-2" class="exeFXSlideLinkexe-carousel-0_exe-carousel-0-2_2" title="Propagación de las excepciones (b)">3</a></li>
<li id="exe-carousel-0-3-link"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#exe-carousel-0-3" class="exeFXSlideLinkexe-carousel-0_exe-carousel-0-3_3" title="Propagación de las excepciones (c)">4</a></li>
<li id="exe-carousel-0-next" class="fx-carousel-prev-next fx-carousel-next fx-C2"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="exe-carousel-0-next-lnk" title="Siguiente" class="exeFXSlideLinkexe-carousel-0_exe-carousel-0-1_1"><span>►</span><span class="sr-av"> Siguiente</span></a></li></ul></div>
<div class="elemento_centrado">
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " propagación="" de="" excepciones="" en="" pl="" sql"."="" href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/BD06_Descripcion_Presentacion_Propagacion_excepciones_plsql.html">Resumen textual alternativo</a></div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id39">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id39-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<form name="multi-choice-form-39_60" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion39_60" class="block question iDevice_content">
<strong>Todas las excepciones están predefinidas y nosotros no podemos definir nuevas excepciones.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_63" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_63">Opción 1</a></label><input type="radio" name="option39_60" id="i39_63" class="exe-radio-option exe-radio-option-0-2-39_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_63"><a name="answer-39_63" href="./recopila_files/saved_resource"></a>
<div id="taans39_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_119" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_119">Opción 2</a></label><input type="radio" name="option39_60" id="i39_119" class="exe-radio-option exe-radio-option-1-2-39_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_119"><a name="answer-39_119" href="./recopila_files/saved_resource"></a>
<div id="taans39_119" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b39_60" class="feedback js-hidden"><a name="sa0b39_60" href="./recopila_files/saved_resource"></a>
<div id="taf39_63" class=" iDevice_content">
No, también podemos definir nuestras propias excepciones.

</div>
</div>
<div id="sa1b39_60" class="feedback js-hidden"><a name="sa1b39_60" href="./recopila_files/saved_resource"></a>
<div id="taf39_119" class=" iDevice_content">
Efectivamente, esta afirmación es falsa.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_63">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b39_60">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_119">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b39_60">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-39_122" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion39_122" class="block question iDevice_content">
<strong>Las excepciones definidas por el usuario deben ser lanzadas explícitamente.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_125" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_125">Opción 1</a></label><input type="radio" name="option39_122" id="i39_125" class="exe-radio-option exe-radio-option-0-2-39_122-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_125"><a name="answer-39_125" href="./recopila_files/saved_resource"></a>
<div id="taans39_125" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_128" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_128">Opción 2</a></label><input type="radio" name="option39_122" id="i39_128" class="exe-radio-option exe-radio-option-1-2-39_122-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_128"><a name="answer-39_128" href="./recopila_files/saved_resource"></a>
<div id="taans39_128" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b39_122" class="feedback js-hidden"><a name="sa0b39_122" href="./recopila_files/saved_resource"></a>
<div id="taf39_125" class=" iDevice_content">
Efectivamente, las lanzamos explícitamente usando la sentencia RAISE.

</div>
</div>
<div id="sa1b39_122" class="feedback js-hidden"><a name="sa1b39_122" href="./recopila_files/saved_resource"></a>
<div id="taf39_128" class=" iDevice_content">
No, deberías repasar los contenidos.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_125">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b39_122">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_128">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b39_122">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
<br><div class="question">
<form name="multi-choice-form-39_131" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" onsubmit="return false" class="activity-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion39_131" class="block question iDevice_content">
<strong>Es obligatorio declarar todas las excepciones predefinidas que vamos a usar en nuestros bloques.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_134" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_134">Opción 1</a></label><input type="radio" name="option39_131" id="i39_134" class="exe-radio-option exe-radio-option-0-2-39_131-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_134"><a name="answer-39_134" href="./recopila_files/saved_resource"></a>
<div id="taans39_134" class="block iDevice_content">
Verdadero.

</div>
</div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_137" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_137">Opción 2</a></label><input type="radio" name="option39_131" id="i39_137" class="exe-radio-option exe-radio-option-1-2-39_131-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_137"><a name="answer-39_137" href="./recopila_files/saved_resource"></a>
<div id="taans39_137" class="block iDevice_content">
Falso.

</div>
</div>
</div>
</div>
<div class="iDevice_feedbacks js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>
<div id="sa0b39_131" class="feedback js-hidden"><a name="sa0b39_131" href="./recopila_files/saved_resource"></a>
<div id="taf39_134" class=" iDevice_content">
No y además no es aconsejable hacerlo.

</div>
</div>
<div id="sa1b39_131" class="feedback js-hidden"><a name="sa1b39_131" href="./recopila_files/saved_resource"></a>
<div id="taf39_137" class=" iDevice_content">
Efectivamente, ni es obligatorio ni debemos hacerlo.

</div>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_134">Incorrecto</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa0b39_131">Retroalimentación</a>)</span></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-39_137">Opción correcta</a><span> (<a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#sa1b39_131">Retroalimentación</a>)</span></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo II b.- Manejo de errores (II).</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id40">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id40-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta40_73" class="block iDevice_content">
<p>
<span lang="en">Oracle</span> también permite que nosotros lancemos nuestros propios mensajes de error a las aplicaciones y asociarlos a un código de error que <span lang="en">Oracle</span> reserva, para no interferir con los demás códigos de error. Lo hacemos por medio del procedimiento:
</p>
<div class="codigo elemento_centrado" style="width: 41.2em">
<div class="texto_izquierda">
<pre>RAISE_APPLICATION_ERROR(error_number, message [, (TRUE|FALSE)]);
</pre>
</div>
</div>
<br>
<p>
Donde error_number es un entero negativo comprendido entre –20000..-20999 y message es una cadena que devolvemos a la aplicación. El tercer parámetro especifica si el error se coloca en la pila de errores (TRUE) o se vacía la pila y se coloca únicamente el nuestro (FALSE). Sólo podemos llamar a este procedimiento desde un subprograma.
</p>
<p>
No hay excepciones predefinidas asociadas a todos los posibles errores de <span lang="en">Oracle</span>, por lo que nosotros podremos asociar excepciones definidas por nosotros a errores <span lang="en">Oracle</span>, por medio de la directiva al compilador (o pseudoinstrucción):
</p>
<div class="codigo elemento_centrado" style="width: 31.3em">
<div class="texto_izquierda">
<pre>PRAGMA_INIT( nombre_excepcion, error_Oracle )
</pre>
</div>
</div>
<br>
<p>
Donde nombre_excepcion es el nombre de una excepción definida anteriormente, y error_Oracle es el número negativo asociado al error.
</p>
<div class="codigo elemento_centrado" style="width: 37.9em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     no_null EXCEPTION;
</pre>
<pre>     PRAGMA EXCEPTION_INIT(no_null, -1400);
</pre>
<pre>     id familias.identificador%TYPE;
</pre>
<pre>     nombre familias.nombre%TYPE;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     nombre := NULL;
</pre>
<pre>     ...          
</pre>
<pre>     INSERT INTO familias VALUES (id, nombre, null, null);
</pre>
<pre>EXCEPTION
</pre>
<pre>     WHEN no_null THEN
</pre>
<pre>          ...
</pre>
<pre>END;
</pre>
</div>
</div>
<br>
<p>
<span lang="en">Oracle</span> asocia 2 funciones para comprobar la ejecución de cualquier sentencia. SQLCODE nos devuelve el código de error y SQLERRM devuelve el mensaje de error asociado. Si una sentencia es ejecutada correctamente, SQLCODE nos devuelve 0 y en caso contrario devolverá un número negativo asociado al error (excepto NO_DATA_FOUND que tiene asociado el +100).
</p>
<div class="codigo elemento_centrado" style="width: 29.65em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>cod number;
</pre>
<pre>msg varchar2(100);
</pre>
<pre>BEGIN
</pre>
<pre>...
</pre>
<pre>EXCEPTION
</pre>
<pre>WHEN OTHERS THEN
</pre>
<pre>     cod := SQLCODE;
</pre>
<pre>     msg := SUBSTR(SQLERRM, 1, 1000);
</pre>
<pre>     INSERT INTO errores VALUES (cod, msg);
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
<div class="iDevice_wrapper SeleccionmultiplefpdIdevice em_iDevice" id="id42">
<div class="iDevice emphasis_autoevaluacionfpd">
<div class="iDevice_header" style="background-image:url(https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2><p class="toggle-idevice toggle-em1"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id42-em1" title="Ocultar"><span>Ocultar</span></a></p></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<div id="actitity-42_55">
<form name="multi-select-form-42_55" action="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" class="activity-form multi-select-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion42_55" class="block question iDevice_content">
<strong>De las siguientes afirmaciones marca las que creas que son correctas.</strong>

</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op42_550" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-42_58">Opción 1</a></label><input type="checkbox" id="op42_550" value="True">
</p>
<div class="iDevice_answer-content" id="answer-42_58"><a name="answer-42_58" href="./recopila_files/saved_resource"></a>
<div id="taans42_58" class="block iDevice_content">
Podemos lanzar nuestros propios mensajes de error a las aplicaciones.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-42_550" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op42_551" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-42_140">Opción 2</a></label><input type="checkbox" id="op42_551" value="False">
</p>
<div class="iDevice_answer-content" id="answer-42_140"><a name="answer-42_140" href="./recopila_files/saved_resource"></a>
<div id="taans42_140" class="block iDevice_content">
Podemos acceder al código de error generado por la ejecución de una sentencia pero no a su mensaje asociado.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-42_551" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op42_552" class="sr-av"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-42_142">Opción 3</a></label><input type="checkbox" id="op42_552" value="True">
</p>
<div class="iDevice_answer-content" id="answer-42_142"><a name="answer-42_142" href="./recopila_files/saved_resource"></a>
<div id="taans42_142" class="block iDevice_content">
Podemos asociar excepciones definidas por nosotros a códigos de error de <span lang="en">Oracle</span>.

</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-42_552" style="display:none"></div>
</div>
</div>
<div class="block iDevice_buttons feedback-button js-required">
<p>
<input type="button" name="submitSelect" class="feedbackbutton multi-select-feedback-toggler" value="Mostrar retroalimentación" id="multi-select-feedback-toggler-3-42_55"> 
</p>
</div>
<div id="f42_55" class="js-hidden js-feedback" role="status">
<h4 class="js-sr-av">Retroalimentación</h4>

<div id="tafeedback42_55" class="feedback iDevice_content">
Podemos lanzar nuestros propios mensajes de error a las aplicaciones, acceder al código de error y al mensaje asociado al mismo generado por la ejecución de una sentencia y asociar excepciones definidas por nosotros a códigos de error de <span lang="en">Oracle</span>.

</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-42_58" class="right">Correcto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-42_140" class="wrong">Incorrecto</a></li>
<li><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/pluginfile.php/55328/mod_scorm/content/0/#answer-42_142" class="right">Correcto</a></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo III.- Evaluación de los atributos de un cursor explícito.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id60">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id60-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta60_73" class="block iDevice_content">
<p><a name="anexo_iii_evaluacin_de_los_atributos_de_un_cursor_explcito.html" title="anexo_iii_evaluacin_de_los_atributos_de_un_cursor_explcito.html" href="./recopila_files/saved_resource"></a></p>
<table class="tabla" summary="Tabla en la que se muestra el valor de cada atributo de un cursor explícito según las operaciones que hayamos realizado con él."><caption>Evaluación de los atributos de un cursor explícito según las operaciones realizadas con él.</caption>
<thead>
<tr><th scope="col">Operación realizada.</th><th scope="col">%FOUND</th><th scope="col">%NOTFOUND</th><th scope="col">%ISOPEN</th><th scope="col">%ROWCOUNT</th></tr>
</thead>
<tbody>
<tr>
<td>Antes del OPEN</td>
<td>Excepción.</td>
<td>Excepción.</td>
<td>FALSE</td>
<td>Excepción.</td>
</tr>
<tr>
<td>Después del OPEN</td>
<td>NULL</td>
<td>NULL</td>
<td>TRUE</td>
<td>0</td>
</tr>
<tr>
<td>Antes del primer FETCH</td>
<td>NULL</td>
<td>NULL</td>
<td>TRUE</td>
<td>0</td>
</tr>
<tr>
<td>Después del primer FETCH</td>
<td>TRUE</td>
<td>FALSE</td>
<td>TRUE</td>
<td>1</td>
</tr>
<tr>
<td>Antes de los siguientes FETCH</td>
<td>TRUE</td>
<td>FALSE</td>
<td>TRUE</td>
<td>1</td>
</tr>
<tr>
<td>Después de los siguientes FETCH</td>
<td>TRUE</td>
<td>FALSE</td>
<td>TRUE</td>
<td>Depende datos.</td>
</tr>
<tr>
<td>Antes del último FETCH</td>
<td>TRUE</td>
<td>FALSE</td>
<td>TRUE</td>
<td>Depende datos.</td>
</tr>
<tr>
<td>Después del último FETCH</td>
<td>FALSE</td>
<td>TRUE</td>
<td>TRUE</td>
<td>Depende datos.</td>
</tr>
<tr>
<td>Antes del CLOSE</td>
<td>FALSE</td>
<td>TRUE</td>
<td>TRUE</td>
<td>Depende datos.</td>
</tr>
<tr>
<td>Después del CLOSE</td>
<td>Excepción.</td>
<td>Excepción.</td>
<td>FALSE</td>
<td>Excepción.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo IV.- Paso de parámetros a subprogramas.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id79">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id79-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta79_73" class="block iDevice_content">
<a name="anexo_iv_paso_de_parmetros_a_subprogramas.html" title="anexo_iv_paso_de_parmetros_a_subprogramas.html" href="./recopila_files/saved_resource"></a>
<p>
Veamos algunos ejemplos del paso de parámetros a subprogramas:
</p>
<ul class="lista_verificacion">
	<li style="margin-bottom: 20px">Notación mixta.
	<div class="codigo elemento_centrado" style="width: 40.1em">
	<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     PROCEDURE prueba( formal1 NUMBER, formal2 VARCHAR2) IS
</pre>
<pre>     BEGIN
</pre>
<pre>          ...
</pre>
<pre>     END;
</pre>
<pre>     actual1 NUMBER;
</pre>
<pre>     actual2 VARCHAR2;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     prueba(actual1, actual2);               --posicional
</pre>
<pre>     prueba(formal2=&gt;actual2,formal1=&gt;actual1);     --nombrada
</pre>
<pre>     prueba(actual1, formal2=&gt;actual2);          --mixta
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Parámetros de entrada.
	<div class="codigo elemento_centrado" style="width: 37.35em">
	<div class="texto_izquierda">
<pre>FUNCTION categoria( id_agente IN NUMBER ) 
</pre>
<pre>RETURN NUMBER IS
</pre>
<pre>     cat NUMBER;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     SELECT categoria INTO cat FROM agentes 
</pre>
<pre>WHERE identificador = id_agente;
</pre>
<pre>RETURN cat;
</pre>
<pre>EXCEPTION
</pre>
<pre>     WHEN NO_DATA_FOUND THEN
</pre>
<pre>          id_agente := -1; --ilegal, parámetro de entrada
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li>
	<li style="margin-bottom: 20px">Parámetros de salida.
	<div class="codigo elemento_centrado" style="width: 38.45em">
	<div class="texto_izquierda">
<pre>PROCEDURE nombre( id_agente NUMBER, nombre OUT VARCHAR2) IS
</pre>
<pre>BEGIN
</pre>
<pre>     IF (nombre = 'LUIS') THEN     --error de sintaxis
</pre>
<pre>     END IF;
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li>
	<li>Parámetros con valor por defecto de los que podemos prescindir.
	<div class="codigo elemento_centrado" style="width: 69.25em">
	<div class="texto_izquierda">
<pre>DECLARE 
</pre>
<pre>     SUBTYPE familia IS familias%ROWTYPE;
</pre>
<pre>     SUBTYPE agente IS agentes%ROWTYPE;
</pre>
<pre>     SUBTYPE tabla_agentes IS TABLE OF agente;
</pre>
<pre>     familia1 familia;
</pre>
<pre>     familia2 familia;
</pre>
<pre>     hijos_fam tabla_agentes;
</pre>
<pre>     FUNCTION inserta_familia( mi_familia familia, 
</pre>
<pre>          mis_agentes tabla_agentes := tabla_agentes() ) 
</pre>
<pre>RETURN NUMBER IS
</pre>
<pre>     BEGIN
</pre>
<pre>          INSERT INTO familias VALUES (mi_familia);
</pre>
<pre>          FOR i IN 1..mis_agentes.COUNT LOOP
</pre>
<pre>               IF (mis_agentes(i).oficina IS NOT NULL) or (mis_agentes(i).familia ¡= mi_familia.identificador) THEN
</pre>
<pre>                    ROLLBACK;
</pre>
<pre>                    RETURN –1;
</pre>
<pre>               END IF;
</pre>
<pre>               INSERT INTO agentes VALUES (mis_agentes(i));
</pre>
<pre>          END LOOP;
</pre>
<pre>          COMMIT;
</pre>
<pre>          RETURN 0;
</pre>
<pre>     EXCEPTION
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>               ROLLABACK;
</pre>
<pre>               RETURN –1;
</pre>
<pre>          WHEN OTHERS THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN SQLCODE;
</pre>
<pre>     END inserta_familia;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     resultado := inserta_familia( familia1 );
</pre>
<pre>     ...
</pre>
<pre>     resultado := inserta_familia( familia2, hijos_fam2 );
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
	</div>
	</div>
	</li>
</ul>

</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo V.- Sobrecarga de subprogramas.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id83">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id83-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta83_73" class="block iDevice_content">
<a name="anexo_v_sobrecarga_de_subprogramas.html" title="anexo_v_sobrecarga_de_subprogramas.html" href="./recopila_files/saved_resource"></a>
<p>
Veamos un ejemplo de sobrecarga de subprogramas en el que una misma función es sobrecargada tres veces para diferentes tipos de parámetros.
</p>
<div class="codigo elemento_centrado" style="width: 116em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     TYPE agente IS agentes%ROWTYPE;
</pre>
<pre>     TYPE familia IS familias%ROWTYPE;
</pre>
<pre>     TYPE tAgentes IS TABLE OF agente;
</pre>
<pre>     TYPE tFamilias IS TABLE OF familia;
</pre>
<pre>     
</pre>
<pre>     FUNCTION inserta_familia( mi_familia familia ) 
</pre>
<pre>     RETURN NUMBER IS
</pre>
<pre>     BEGIN
</pre>
<pre>          INSERT INTO familias VALUES (mi_familia.identificador, mi_familia.nombre, mi_familia.familia, mi_familia.oficina );
</pre>
<pre>          COMMIT;
</pre>
<pre>          RETURN 0;
</pre>
<pre>     EXCEPTION
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN –1;
</pre>
<pre>          WHEN OTHERS THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN SQLCODE;
</pre>
<pre>     END inserta_familia;
</pre>
<pre>     
</pre>
<pre>     FUNCTION inserta_familia( mi_familia familia, hijas tFamilias )
</pre>
<pre>     RETURN NUMBER IS
</pre>
<pre>     BEGIN
</pre>
<pre>          INSERT INTO familias VALUES (mi_famila.identificador, mi_familia.nombre, mi_familia.familia, mi_familia.oficina );
</pre>
<pre>          IF (hijas IS NOT NULL) THEN
</pre>
<pre>               FOR i IN 1..hijas.COUNT LOOP
</pre>
<pre>                    IF (hijas(i).oficina IS NOT NULL) or (hijas(i).familia ¡= mi_familia.identificador) THEN
</pre>
<pre>                         ROLLBACK;
</pre>
<pre>                         RETURN –1;
</pre>
<pre>                    END IF;
</pre>
<pre>                    INSERT INTO familias VALUES (hijas(i).identificador, hijas(i).nombre, hijas(i).familia, hijas(i).oficina );
</pre>
<pre>               END LOOP;
</pre>
<pre>          END IF;
</pre>
<pre>          COMMIT;
</pre>
<pre>          RETURN 0;
</pre>
<pre>     EXCEPTION
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN –1;
</pre>
<pre>          WHEN OTHERS THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN –1;
</pre>
<pre>     END inserta_familia;
</pre>
<pre>     
</pre>
<pre>     FUNCTION inserta_familia( mi_familia familia, hijos tAgentes )
</pre>
<pre>     RETURN NUMBER IS
</pre>
<pre>     BEGIN
</pre>
<pre>          INSERT INTO familias VALUES (mi_familia.identificador, mi_familia.nombre, mi_familia.familia, mi_familia.oficina );
</pre>
<pre>          IF (hijos IS NOT NULL) THEN
</pre>
<pre>               FOR i IN 1..hijos.COUNT LOOP
</pre>
<pre>                    IF (hijos(i).oficina IS NOT NULL) or (hijos(i).familia ¡= mi_familia.identificador) THEN
</pre>
<pre>                         ROLLBACK;
</pre>
<pre>                         RETURN –1;
</pre>
<pre>                    END IF;
</pre>
<pre>                    INSERT INTO agentes VALUES (hijos(i).identificador, hijos(i).nombre, hijos(i).usuario, hijos(i).clave, hijos(i).habilidad, hijos(i).categoria, hijos(i).familia, hijos(i).oficina );
</pre>
<pre>               END LOOP;
</pre>
<pre>          END IF;
</pre>
<pre>          COMMIT;
</pre>
<pre>          RETURN 0;
</pre>
<pre>     EXCEPTION
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN –1;
</pre>
<pre>          WHEN OTHERS THEN
</pre>
<pre>               ROLLBACK;
</pre>
<pre>               RETURN –1;
</pre>
<pre>     END inserta_familias;
</pre>
<pre>     
</pre>
<pre>     mi_familia familia;
</pre>
<pre>     mi_familia1 familia;
</pre>
<pre>     familias_hijas tFamilias;
</pre>
<pre>     mi_familia2 familia;
</pre>
<pre>     hijos tAgentes;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     resultado := inserta_familia(mi_familia);
</pre>
<pre>     ...
</pre>
<pre>     resultado := inserta_familia(mi_familia1, familias_hijas);
</pre>
<pre>     ...
</pre>
<pre>     resultado := inserta_familia(mi_familia2, hijos);
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo VI.- Ejemplo de recursividad.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id86">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id86-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta86_73" class="block iDevice_content">
<a name="anexo_vi_ejemplo_de_recursividad.html" title="anexo_vi_ejemplo_de_recursividad.html" href="./recopila_files/saved_resource"></a>
<p>
Aquí tienes un ejemplo del uso de la recursividad en nuestros subprogramas.
</p>
<div class="codigo elemento_centrado" style="width: 54.4em">
<div class="texto_izquierda">
<pre>DECLARE
</pre>
<pre>     TYPE agente IS agentes%ROWTYPE;
</pre>
<pre>     TYPE tAgentes IS TABLE OF agente;
</pre>
<pre>     hijos10 tAgentes;
</pre>
<pre>     PROCEDURE dame_hijos( id_familia NUMBER,
</pre>
<pre>                    hijos IN OUT tAgentes ) IS
</pre>
<pre>          CURSOR hijas IS SELECT identificador FROM familias WHERE familia = id_familia;
</pre>
<pre>hija NUMBER;
</pre>
<pre>     CURSOR cHijos IS SELECT * FROM agentes WHERE familia = id_familia;
</pre>
<pre>hijo agente;
</pre>
<pre>     BEGIN
</pre>
<pre>          --Si la tabla no está inicializada -&gt; la inicializamos
</pre>
<pre>          IF hijos IS NULL THEN
</pre>
<pre>               hijos = tAgentes();
</pre>
<pre>          END IF;
</pre>
<pre>          --Metemos en la tabla los hijos directos de esta familia
</pre>
<pre>          OPEN cHijos;
</pre>
<pre>          LOOP
</pre>
<pre>               FETCH cHijos INTO hijo;
</pre>
<pre>               EXIT WHEN cHijos%NOTFOUND;
</pre>
<pre>               hijos.EXTEND;
</pre>
<pre>               hijos(hijos.LAST) := hijo;
</pre>
<pre>          END LOOP;
</pre>
<pre>          CLOSE cHijos;
</pre>
<pre>          --Hacemos lo mismo para todas las familias hijas de la actual
</pre>
<pre>          OPEN hijas;
</pre>
<pre>          LOOP
</pre>
<pre>               FETCH hijas INTO hija;
</pre>
<pre>               EXIT WHEN hijas%NOTFOUND;
</pre>
<pre>               dame_hijos( hija, hijos );
</pre>
<pre>          END LOOP;
</pre>
<pre>          CLOSE hijas;
</pre>
<pre>     END dame_hijos;
</pre>
<pre>BEGIN
</pre>
<pre>     ...
</pre>
<pre>     dame_hijos( 10, hijos10 );
</pre>
<pre>     ...
</pre>
<pre>END;
</pre>
</div>
</div>

</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo VII.- Ejemplo de paquete.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id90">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id90-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta90_73" class="block iDevice_content">
<a name="anexo_vii_ejemplo_de_paquete.html" title="anexo_vii_ejemplo_de_paquete.html" href="./recopila_files/saved_resource"></a>
<p>
Aquí puedes ver un ejemplo de un paquete que agrupa las principales tareas que llevamos a cabo con la base de datos de ejemplo.
</p>
<div class="codigo elemento_centrado" style="width: 115.45em">
<div class="texto_izquierda">
<pre>CREATE OR REPLACE PACKAGE call_center AS     --inicialización 
</pre>
<pre>     --Definimos los tipos que utilizaremos 
</pre>
<pre>     SUBTYPE agente IS agentes%ROWTYPE; 
</pre>
<pre>     SUBTYPE familia IS familias%ROWTYPE; 
</pre>
<pre>     SUBTYPE oficina IS oficinas%ROWTYPE; 
</pre>
<pre>     TYPE tAgentes IS TABLE OF agente; 
</pre>
<pre>     TYPE tFamilias IS TABLE OF familia; 
</pre>
<pre>     TYPE tOficinas IS TABLE OF oficina; 
</pre>
<pre>     
</pre>
<pre>     --Definimos las excepciones propias 
</pre>
<pre>     referencia_no_encontrada exception; 
</pre>
<pre>     referencia_encontrada exception; 
</pre>
<pre>     no_null exception; 
</pre>
<pre>     PRAGMA EXCEPTION_INIT(referencia_no_encontrada, -2291); 
</pre>
<pre>     PRAGMA EXCEPTION_INIT(referencia_encontrada, -2292); 
</pre>
<pre>     PRAGMA EXCEPTION_INIT(no_null, -1400); 
</pre>
<pre>     
</pre>
<pre>     --Definimos los errores que vamos a tratar 
</pre>
<pre>     todo_bien                CONSTANT NUMBER := 0; 
</pre>
<pre>     elemento_existente           CONSTANT NUMBER:= -1; 
</pre>
<pre>     elemento_inexistente           CONSTANT NUMBER:= -2; 
</pre>
<pre>     padre_existente          CONSTANT NUMBER:= -3; 
</pre>
<pre>     padre_inexistente          CONSTANT NUMBER:= -4; 
</pre>
<pre>     no_null_violado          CONSTANT NUMBER:= -5; 
</pre>
<pre>     operacion_no_permitida          CONSTANT NUMBER:= -6; 
</pre>
<pre>     
</pre>
<pre>     --Definimos los subprogramas públicos 
</pre>
<pre>     --Nos devuelve la oficina padre de un agente 
</pre>
<pre>     PROCEDURE oficina_padre( mi_agente agente, padre OUT oficina ); 
</pre>
<pre>     
</pre>
<pre>     --Nos devuelve la oficina padre de una familia 
</pre>
<pre>     PROCEDURE oficina_padre( mi_familia familia, padre OUT oficina ); 
</pre>
<pre>     
</pre>
<pre>     --Nos da los hijos de una familia 
</pre>
<pre>     PROCEDURE dame_hijos( mi_familia familia, hijos IN OUT tAgentes ); 
</pre>
<pre>     
</pre>
<pre>     --Nos da los hijos de una oficina 
</pre>
<pre>     PROCEDURE dame_hijos( mi_oficina oficina, hijos IN OUT tAgentes ); 
</pre>
<pre>     
</pre>
<pre>     --Inserta un agente 
</pre>
<pre>     FUNCTION inserta_agente ( mi_agente agente ) 
</pre>
<pre>     RETURN NUMBER; 
</pre>
<pre>     
</pre>
<pre>     --Inserta una familia 
</pre>
<pre>     FUNCTION inserta_familia( mi_familia familia ) 
</pre>
<pre>     RETURN NUMBER; 
</pre>
<pre>     
</pre>
<pre>     --Inserta una oficina 
</pre>
<pre>     FUNCTION inserta_oficina ( mi_oficina oficina ) 
</pre>
<pre>     RETURN NUMBER; 
</pre>
<pre>     
</pre>
<pre>     --Borramos una oficina 
</pre>
<pre>     FUNCTION borra_oficina( id_oficina NUMBER ) 
</pre>
<pre>     RETURN NUMBER; 
</pre>
<pre>     
</pre>
<pre>     --Borramos una familia 
</pre>
<pre>     FUNCTION borra_familia( id_familia NUMBER ) 
</pre>
<pre>     RETURN NUMBER; 
</pre>
<pre>     
</pre>
<pre>     --Borramos un agente 
</pre>
<pre>     FUNCTION borra_agente( id_agente NUMBER ) 
</pre>
<pre>     RETURN NUMBER; 
</pre>
<pre>END call_center; 
</pre>
<pre>/ 
</pre>
<pre>
</pre>
<pre>CREATE OR REPLACE PACKAGE BODY call_center AS          --cuerpo 
</pre>
<pre>     --Implemento las funciones definidas en la especificación 
</pre>
<pre>     
</pre>
<pre>     --Nos devuelve la oficina padre de un agente 
</pre>
<pre>     PROCEDURE oficina_padre( mi_agente agente, padre OUT oficina ) IS 
</pre>
<pre>          mi_familia familia; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          IF (mi_agente.oficina IS NOT NULL) THEN 
</pre>
<pre>               SELECT * INTO padre FROM oficinas 
</pre>
<pre>               WHERE identificador = mi_agente.oficina; 
</pre>
<pre>          ELSE 
</pre>
<pre>               SELECT * INTO mi_familia FROM familias 
</pre>
<pre>               WHERE identificador = mi_agente.familia; 
</pre>
<pre>               oficina_padre( mi_familia, padre ); 
</pre>
<pre>          END IF; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               padre := NULL; 
</pre>
<pre>     END oficina_padre; 
</pre>
<pre>     
</pre>
<pre>     --Nos devuelve la oficina padre de una familia 
</pre>
<pre>     PROCEDURE oficina_padre( mi_familia familia, padre OUT oficina ) IS 
</pre>
<pre>          madre familia; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          IF (mi_familia.oficina IS NOT NULL) THEN 
</pre>
<pre>               SELECT * INTO padre FROM oficinas 
</pre>
<pre>               WHERE identificador = mi_familia.oficina; 
</pre>
<pre>          ELSE 
</pre>
<pre>               SELECT * INTO madre FROM familias 
</pre>
<pre>               WHERE identificador = mi_familia.familia; 
</pre>
<pre>               oficina_padre( madre, padre ); 
</pre>
<pre>          END IF; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               padre := NULL; 
</pre>
<pre>     END oficina_padre; 
</pre>
<pre>     
</pre>
<pre>     --Nos da los hijos de una familia 
</pre>
<pre>     PROCEDURE dame_hijos( mi_familia familia, hijos IN OUT tAgentes ) IS 
</pre>
<pre>          CURSOR cHijos IS SELECT * FROM agentes 
</pre>
<pre>          WHERE familia = mi_familia.identificador; 
</pre>
<pre>          CURSOR cHijas IS SELECT * FROM familias 
</pre>
<pre>          WHERE familia = mi_familia.identificador; 
</pre>
<pre>          hijo agente; 
</pre>
<pre>          hija familia; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          --inicializamos la tabla si no lo está 
</pre>
<pre>          if (hijos IS NULL) THEN 
</pre>
<pre>               hijos := tAgentes(); 
</pre>
<pre>          END IF; 
</pre>
<pre>          --metemos en la tabla los hijos directos 
</pre>
<pre>          OPEN cHijos; 
</pre>
<pre>          LOOP 
</pre>
<pre>               FETCH cHijos INTO hijo; 
</pre>
<pre>               EXIT WHEN cHijos%NOTFOUND; 
</pre>
<pre>               hijos.EXTEND; 
</pre>
<pre>               hijos(hijos.LAST) := hijo; 
</pre>
<pre>          END LOOP; 
</pre>
<pre>          CLOSE cHijos; 
</pre>
<pre>          --hacemos lo mismo para las familias hijas 
</pre>
<pre>          OPEN cHijas; 
</pre>
<pre>          LOOP 
</pre>
<pre>               FETCH cHijas INTO hija; 
</pre>
<pre>               EXIT WHEN cHijas%NOTFOUND; 
</pre>
<pre>               dame_hijos( hija, hijos ); 
</pre>
<pre>          END LOOP; 
</pre>
<pre>          CLOSE cHijas; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               hijos := tAgentes(); 
</pre>
<pre>     END dame_hijos; 
</pre>
<pre>     
</pre>
<pre>     --Nos da los hijos de una oficina 
</pre>
<pre>     PROCEDURE dame_hijos( mi_oficina oficina, hijos IN OUT tAgentes ) IS 
</pre>
<pre>          CURSOR cHijos IS SELECT * FROM agentes 
</pre>
<pre>          WHERE oficina = mi_oficina.identificador; 
</pre>
<pre>          CURSOR cHijas IS SELECT * FROM familias 
</pre>
<pre>          WHERE oficina = mi_oficina.identificador; 
</pre>
<pre>          hijo agente; 
</pre>
<pre>          hija familia; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          --inicializamos la tabla si no lo está 
</pre>
<pre>          if (hijos IS NULL) THEN 
</pre>
<pre>               hijos := tAgentes(); 
</pre>
<pre>          END IF; 
</pre>
<pre>          --metemos en la tabla los hijos directos 
</pre>
<pre>          OPEN cHijos; 
</pre>
<pre>          LOOP 
</pre>
<pre>               FETCH cHijos INTO hijo; 
</pre>
<pre>               EXIT WHEN cHijos%NOTFOUND; 
</pre>
<pre>               hijos.EXTEND; 
</pre>
<pre>               hijos(hijos.LAST) := hijo; 
</pre>
<pre>          END LOOP; 
</pre>
<pre>          CLOSE cHijos; 
</pre>
<pre>          --hacemos lo mismo para las familias hijas 
</pre>
<pre>          OPEN cHijas; 
</pre>
<pre>          LOOP 
</pre>
<pre>               FETCH cHijas INTO hija; 
</pre>
<pre>               EXIT WHEN cHijas%NOTFOUND; 
</pre>
<pre>               dame_hijos( hija, hijos ); 
</pre>
<pre>          END LOOP; 
</pre>
<pre>          CLOSE cHijas; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               hijos := tAgentes(); 
</pre>
<pre>     END dame_hijos; 
</pre>
<pre>     
</pre>
<pre>     --Inserta un agente 
</pre>
<pre>     FUNCTION inserta_agente ( mi_agente agente ) 
</pre>
<pre>     RETURN NUMBER IS 
</pre>
<pre>     BEGIN 
</pre>
<pre>          IF (mi_agente.familia IS NULL and mi_agente.oficina IS NULL) THEN 
</pre>
<pre>               RETURN operacion_no_permitida; 
</pre>
<pre>          END IF; 
</pre>
<pre>          IF (mi_agente.familia IS NOT NULL and mi_agente.oficina IS NOT NULL) THEN 
</pre>
<pre>               RETURN operacion_no_permitida; 
</pre>
<pre>          END IF; 
</pre>
<pre>          INSERT INTO agentes VALUES (mi_agente.identificador, mi_agente.nombre, mi_agente.usuario, mi_agente.clave, mi_agente.habilidad, mi_agente.categoria, mi_agente.familia, mi_agente.oficina ); 
</pre>
<pre>          COMMIT; 
</pre>
<pre>          RETURN todo_bien; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN referencia_no_encontrada THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN padre_inexistente; 
</pre>
<pre>          WHEN no_null THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN no_null_violado; 
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN elemento_existente; 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN SQLCODE; 
</pre>
<pre>     END inserta_agente; 
</pre>
<pre>     
</pre>
<pre>     --Inserta una familia 
</pre>
<pre>     FUNCTION inserta_familia( mi_familia familia ) 
</pre>
<pre>     RETURN NUMBER IS 
</pre>
<pre>     BEGIN 
</pre>
<pre>          IF (mi_familia.familia IS NULL and mi_familia.oficina IS NULL) THEN 
</pre>
<pre>               RETURN operacion_no_permitida; 
</pre>
<pre>          END IF; 
</pre>
<pre>          IF (mi_familia.familia IS NOT NULL and mi_familia.oficina IS NOT NULL) THEN 
</pre>
<pre>               RETURN operacion_no_permitida; 
</pre>
<pre>          END IF; 
</pre>
<pre>          INSERT INTO familias VALUES ( mi_familia.identificador, mi_familia.nombre, mi_familia.familia, mi_familia.oficina ); 
</pre>
<pre>          COMMIT; 
</pre>
<pre>          RETURN todo_bien; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN referencia_no_encontrada THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN padre_inexistente; 
</pre>
<pre>          WHEN no_null THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN no_null_violado; 
</pre>
<pre>           WHEN DUP_VAL_ON_INDEX THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN elemento_existente; 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN SQLCODE; 
</pre>
<pre>     END inserta_familia; 
</pre>
<pre>     
</pre>
<pre>     --Inserta una oficina 
</pre>
<pre>     FUNCTION inserta_oficina ( mi_oficina oficina ) 
</pre>
<pre>     RETURN NUMBER IS 
</pre>
<pre>     BEGIN 
</pre>
<pre>          INSERT INTO oficinas VALUES (mi_oficina.identificador, mi_oficina.nombre, mi_oficina.domicilio, mi_oficina.localidad, mi_oficina.codigo_postal ); 
</pre>
<pre>          COMMIT; 
</pre>
<pre>          RETURN todo_bien; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN no_null THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN no_null_violado; 
</pre>
<pre>          WHEN DUP_VAL_ON_INDEX THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN elemento_existente; 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN SQLCODE; 
</pre>
<pre>     END inserta_oficina; 
</pre>
<pre>     
</pre>
<pre>     --Borramos una oficina 
</pre>
<pre>     FUNCTION borra_oficina( id_oficina NUMBER ) 
</pre>
<pre>     RETURN NUMBER IS 
</pre>
<pre>          num_ofi NUMBER; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          SELECT COUNT(*) INTO num_ofi FROM oficinas 
</pre>
<pre>          WHERE identificador = id_oficina; 
</pre>
<pre>          IF (num_ofi = 0) THEN 
</pre>
<pre>               RETURN elemento_inexistente; 
</pre>
<pre>          END IF; 
</pre>
<pre>          DELETE oficinas WHERE identificador = id_oficina; 
</pre>
<pre>          COMMIT; 
</pre>
<pre>          RETURN todo_bien; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN SQLCODE; 
</pre>
<pre>     END borra_oficina; 
</pre>
<pre>     
</pre>
<pre>     --Borramos una familia 
</pre>
<pre>     FUNCTION borra_familia( id_familia NUMBER ) 
</pre>
<pre>     RETURN NUMBER IS 
</pre>
<pre>          num_fam NUMBER; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          SELECT COUNT(*) INTO num_fam FROM familias 
</pre>
<pre>          WHERE identificador = id_familia; 
</pre>
<pre>          IF (num_fam = 0) THEN 
</pre>
<pre>               RETURN elemento_inexistente; 
</pre>
<pre>          END IF; 
</pre>
<pre>          DELETE familias WHERE identificador = id_familia; 
</pre>
<pre>          COMMIT; 
</pre>
<pre>          RETURN todo_bien; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN SQLCODE; 
</pre>
<pre>     END borra_familia; 
</pre>
<pre>      
</pre>
<pre>     --Borramos un agente 
</pre>
<pre>     FUNCTION borra_agente( id_agente NUMBER ) 
</pre>
<pre>     RETURN NUMBER IS 
</pre>
<pre>          num_ag NUMBER; 
</pre>
<pre>     BEGIN 
</pre>
<pre>          SELECT COUNT(*) INTO num_ag FROM agentes 
</pre>
<pre>          WHERE identificador = id_agente; 
</pre>
<pre>          IF (num_ag = 0) THEN 
</pre>
<pre>               RETURN elemento_inexistente; 
</pre>
<pre>          END IF; 
</pre>
<pre>          DELETE agentes WHERE identificador = id_agente; 
</pre>
<pre>          COMMIT; 
</pre>
<pre>          RETURN todo_bien; 
</pre>
<pre>     EXCEPTION 
</pre>
<pre>          WHEN OTHERS THEN 
</pre>
<pre>               ROLLBACK; 
</pre>
<pre>               RETURN SQLCODE; 
</pre>
<pre>     END borra_agente; 
</pre>
<pre>END call_center; 
</pre>
<pre>/ 
</pre>
</div>
</div>
&nbsp;

</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<div id="main">
<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Anexo.- Licencias de recursos.</h1></div></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id115">
<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id115-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
<div id="ta115_73" class="block iDevice_content">
Ningún recurso de fuentes externas que requiera citar explícitamente sus datos de licencia
ha sido usado en esta unidad, por lo que este anexo queda vacío. Todos los recursos utilizados,
de fuentes internas, se acogen al Aviso Legal de la plataforma.

</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div><script type="text/javascript">document.body.className+=" js"</script>
			<div id="outer">
			<div id="main">
			<div id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">Condiciones y términos de uso de los materiales</h1></div></div>
			<div class="iDevice_wrapper DestacadofpdIdevice" id="id60">
			<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id60-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
			<div class="iDevice_destacadofpd">
			<div id="ta60_66" class="block iDevice_content">
			<div title="Información acerca de la licencia de los materiales">
			<p align="center" style="margin: 2px 2px;"><strong>Materiales desarrollados inicialmente por el Ministerio de Educación, Cultura y Deporte y actualizados por el profesorado de la Junta de Andalucía bajo licencia Creative Commons <acronym title="Reconocimiento-NoComercial-CompartirIgual">BY-NC-SA.</acronym></strong></p>
						      <p align="center" style="font-size: 0.8em; margin: 2px 2px;"><strong><img src="./recopila_files/img_para_licencias.png" height="94" alt="Logotipos del Ministerio de Educación, Cultura y Deporte, Junta de Andalucía y licencia Creative Commons"></strong></p>
                              <p align="center" style="font-size: 0.8em; margin: 2px 2px;"><span>Antes de cualquier uso leer detenidamente el siguente</span> <a href="https://www.juntadeandalucia.es/educacion/gestionafp/documentacion/aviso_legal/aviso_legal_mjda/index.html" target="_blank" title="Enlace externo, se accede al aviso legal de los materiales">Aviso legal</a></p>
			</div>
			</div>
			</div>
			</div>
			</div>
			<div class="iDevice_wrapper FreeTextIdevice" id="id61">
			<p class="toggle-idevice toggle-em0"><a href="https://educacionadistancia.juntadeandalucia.es/formacionprofesional/blocks/recopila/recopila.php?id=3996&amp;dopt=1#" id="toggle-idevice-id61-em0" title="Ocultar"><span>Ocultar</span></a></p><div class="iDevice emphasis0">
			<div id="ta61_85" class="block iDevice_content">
			<h3>Historial de actualizaciones</h3>
			<table border="0" class="tabla" style="width: 100%;"><tbody><tr><th scope="col">Versión: 01.03.00</th><th scope="col">Fecha de actualización: 07/03/21</th><th scope="col">Autoría: Víctor Gil Rodríguez</th></tr><tr>
                            <td colspan="3"><p><strong>Ubicación: </strong>Toda la unidad<br><strong>Mejora (tipo 2): </strong>Introducción de videotutoriales a lo largo de toda la unidad explicando con ejemplos de la BD Conferencias para cargar los script de diferentes formas en Oracle XE y SQL Developer, trabajar con bloques PL, con funciones y procedimientos así como triggers.</p></td></tr></tbody></table><table border="0" class="tabla" style="width: 100%;"><tbody><tr><th scope="col">Versión: 01.02.00</th><th scope="col">Fecha de actualización: 06/03/15</th><th scope="col">Autoría: Víctor Gil Rodríguez</th></tr><tr>
                            <td colspan="3">Se ha modificado el glosario por las definiciones en cada palabra, se han cambiado los apartados de manejo de errores (III y IV) como anexos y por último se ha incluido videos en los siguientes apartados:<br>
Apartado 1:Instalación de SQL Developer, Configuración y conexión de SQL Developer a una BD creada en Oracle XE.<br>
Apartado 2.3:Introducción a PL/SQL (Parte I), Introducción a PL/SQL (Parte II)<br>
Apartado 3.3.1:Cursores en PL/SQL<br>
Apartado 4.4.1:Ejemplo de procedimiento almacenado, Ejemplo de fu</td></tr></tbody></table><table border="0" class="tabla" style="width: 100%;"><tbody><tr><th scope="col">Versión: 01.01.00</th><th scope="col">Fecha de actualización: 05/03/14</th><th scope="col">Autoría: Víctor Gil Rodríguez</th></tr><tr>
                            <td colspan="3">&nbsp;Se ha añadido un nuevo apartado para incluir un tutorial y ejercicios resueltos.</td></tr></tbody></table><table border="0" class="tabla" style="width: 100%;"><tbody><tr><th scope="col">Versión: 01.00.00</th><th scope="col" colspan="2">Fecha de actualización: 05/03/14</th></tr><tr>
                            <td colspan="3">Versión inicial de los materiales.</td></tr></tbody></table>
			</div>
			</div>
			</div>
			</div>
			</div>
			<script type="text/javascript" src="./recopila_files/_fpd_js.js"></script><div style="page-break-before: always;"></div>

</body></html>